{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../node_modules/react-hot-loader/index.js","webpack:///external \"vendor_19dcb43a348424cab493\"","webpack:///delegated ../node_modules/webpack/buildin/module.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/react/index.js from dll-reference vendor_19dcb43a348424cab493","webpack:///./core/index.ts","webpack:///delegated ../node_modules/mobx-react/index.module.js from dll-reference vendor_19dcb43a348424cab493","webpack:///./core/constants.ts","webpack:///delegated ../node_modules/typestyle/lib.es2015/index.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/mobx/lib/mobx.module.js from dll-reference vendor_19dcb43a348424cab493","webpack:///./core/feature-flags.ts","webpack:///./core/logging.ts","webpack:///delegated ../node_modules/lodash/lodash.js from dll-reference vendor_19dcb43a348424cab493","webpack:///./core/note.ts","webpack:///./components/group.tsx","webpack:///./core/theme.ts","webpack:///./core/editor.ts","webpack:///./core/undo.ts","webpack:///../node_modules/@material-ui/core/esm/Typography/index.js","webpack:///../node_modules/@material-ui/core/esm/Button/index.js","webpack:///../node_modules/@material-ui/core/esm/FormControl/index.js","webpack:///../node_modules/@material-ui/core/esm/MenuItem/index.js","webpack:///../node_modules/@material-ui/core/esm/Select/index.js","webpack:///./core/note-sequence.ts","webpack:///delegated ../node_modules/@magenta/music/es5/index.js from dll-reference vendor_19dcb43a348424cab493","webpack:///../node_modules/@material-ui/core/colors/blue.js","webpack:///delegated ../node_modules/@babel/runtime/helpers/esm/extends.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/core/esm/AppBar/AppBar.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/core/esm/Toolbar/Toolbar.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/core/esm/Typography/Typography.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/core/esm/Button/Button.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/core/esm/FormControl/FormControl.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/core/esm/FormControl/useFormControl.js from dll-reference vendor_19dcb43a348424cab493","webpack:///../node_modules/@material-ui/core/esm/FormHelperText/index.js","webpack:///delegated ../node_modules/@material-ui/core/esm/FormHelperText/FormHelperText.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/core/esm/MenuItem/MenuItem.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/core/esm/Select/Select.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/lab/esm/ToggleButton/ToggleButton.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/lab/esm/ToggleButtonGroup/ToggleButtonGroup.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/icons/esm/index.js from dll-reference vendor_19dcb43a348424cab493","webpack:///./core/api.ts","webpack:///./core/tonal-utils.ts","webpack:///delegated ../node_modules/tonal/index.js from dll-reference vendor_19dcb43a348424cab493","webpack:///./core/generator.ts","webpack:///./core/utils.ts","webpack:///delegated ../node_modules/@tensorflow/tfjs-core/dist/tf-core.esm.js from dll-reference vendor_19dcb43a348424cab493","webpack:///./core/coconet/magenta/logging.ts","webpack:///./core/magenta-utils.ts","webpack:///./core/masks.ts","webpack:///./core/player.ts","webpack:///../node_modules/@material-ui/core/esm/styles/index.js","webpack:///delegated ../node_modules/@material-ui/core/esm/styles/colorManipulator.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/core/esm/styles/createMuiTheme.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/core/esm/styles/createStyles.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/core/esm/styles/makeStyles.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/core/esm/styles/MuiThemeProvider.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/core/esm/styles/responsiveFontSizes.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/core/esm/styles/styled.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/core/esm/styles/transitions.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/core/esm/styles/useTheme.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/core/esm/styles/withStyles.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/core/esm/styles/withTheme.js from dll-reference vendor_19dcb43a348424cab493","webpack:///../node_modules/@material-ui/core/esm/Dialog/index.js","webpack:///delegated ../node_modules/@material-ui/core/esm/Dialog/Dialog.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/core/esm/DialogActions/DialogActions.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/core/esm/DialogContent/DialogContent.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/core/esm/DialogTitle/DialogTitle.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/core/esm/FormControlLabel/FormControlLabel.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/core/esm/Switch/Switch.js from dll-reference vendor_19dcb43a348424cab493","webpack:///./components/spacer.tsx","webpack:///delegated ../node_modules/@material-ui/core/esm/Slider/Slider.js from dll-reference vendor_19dcb43a348424cab493","webpack:///../node_modules/css-loader/dist/runtime/api.js","webpack:///../node_modules/style-loader/lib/addStyles.js","webpack:///delegated ../node_modules/@material-ui/core/esm/CircularProgress/CircularProgress.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@babel/runtime/helpers/esm/classCallCheck.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@babel/runtime/helpers/esm/createClass.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/jss/dist/jss.esm.js from dll-reference vendor_19dcb43a348424cab493","webpack:///./index.tsx","webpack:///../node_modules/react-hot-loader/dist/react-hot-loader.production.min.js","webpack:///delegated ../node_modules/react-dom/index.js from dll-reference vendor_19dcb43a348424cab493","webpack:///./components/app.tsx","webpack:///./components/main.tsx","webpack:///../node_modules/@material-ui/core/esm/AppBar/index.js","webpack:///../node_modules/@material-ui/core/esm/Toolbar/index.js","webpack:///./components/controls.tsx","webpack:///../node_modules/@material-ui/lab/esm/ToggleButton/index.js","webpack:///../node_modules/@material-ui/lab/esm/ToggleButtonGroup/index.js","webpack:///delegated ../node_modules/firebase/dist/index.cjs.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/query-string/index.js from dll-reference vendor_19dcb43a348424cab493","webpack:///./core/coconet/index.ts","webpack:///./core/coconet/model.ts","webpack:///./core/coconet/magenta/sequences.ts","webpack:///./core/coconet/coconet_utils.ts","webpack:///./core/interactions.ts","webpack:///./core/keyboard.ts","webpack:///delegated ../node_modules/tone/build/Tone.js from dll-reference vendor_19dcb43a348424cab493","webpack:///./core/save-load.ts","webpack:///./core/layout.ts","webpack:///../node_modules/@material-ui/core/colors/pink.js","webpack:///../node_modules/@material-ui/core/colors/red.js","webpack:///../node_modules/@material-ui/core/colors/yellow.js","webpack:///./components/key-signatures.tsx","webpack:///../node_modules/@material-ui/core/esm/DialogActions/index.js","webpack:///../node_modules/@material-ui/core/esm/DialogContent/index.js","webpack:///../node_modules/@material-ui/core/esm/DialogTitle/index.js","webpack:///../node_modules/@material-ui/core/esm/FormControlLabel/index.js","webpack:///../node_modules/@material-ui/core/esm/Switch/index.js","webpack:///./components/editor.tsx","webpack:///./components/piano-roll.tsx","webpack:///./components/filters.tsx","webpack:///./components/grid.tsx","webpack:///./components/loop-overlay.tsx","webpack:///./components/mask-lanes.tsx","webpack:///./components/notes.tsx","webpack:///./components/note.tsx","webpack:///./components/loop-handles.tsx","webpack:///./components/masks-select.tsx","webpack:///./components/generate.tsx","webpack:///../node_modules/@material-ui/core/esm/Slider/index.js","webpack:///./components/sequence.tsx","webpack:///./components/generate.css?93de","webpack:///./components/generate.css","webpack:///../node_modules/style-loader/lib/urls.js","webpack:///./components/working.tsx","webpack:///../node_modules/@material-ui/core/esm/CircularProgress/index.js","webpack:///./index.css?c4b5","webpack:///./index.css","webpack:///../node_modules/@material-ui/styles/esm/ServerStyleSheets/ServerStyleSheets.js","webpack:///../node_modules/@material-ui/styles/esm/index.js","webpack:///delegated ../node_modules/@material-ui/styles/esm/createGenerateClassName/createGenerateClassName.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/styles/esm/createStyles/createStyles.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/styles/esm/getThemeProps/getThemeProps.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/styles/esm/jssPreset/jssPreset.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/styles/esm/makeStyles/makeStyles.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/styles/esm/mergeClasses/mergeClasses.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/styles/esm/StylesProvider/StylesProvider.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/styles/esm/styled/styled.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/styles/esm/ThemeProvider/ThemeProvider.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/styles/esm/useTheme/useTheme.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/styles/esm/withStyles/withStyles.js from dll-reference vendor_19dcb43a348424cab493","webpack:///delegated ../node_modules/@material-ui/styles/esm/withTheme/withTheme.js from dll-reference vendor_19dcb43a348424cab493"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","vendor_19dcb43a348424cab493","api_1","__importDefault","editor_1","generator_1","interactions_1","keyboard_1","layout_1","logging_1","masks_1","player_1","undo_1","editor_2","EditorTool","note_1","Note","api","editor","generator","interactions","keyboard","layout","logging","masks","player","undo","DifferenceFromOriginal","Mood","MIDDLE_C","BOTTOM_A","N_NOTE_DIVISIONS","MIN_PITCH","MAX_PITCH","NOTE_VELOCITY","DEFAULT_BPM","TOTAL_SIXTEENTHS","SOUNDFONT_URL","MODEL_URL","DIVISIONS","DEFAULT_NOTES","DEFAULT_EDITOR_WIDTH","DEFAULT_SEQUENCES_WIDTH","PIANO_ROLL_WIDTH","NOTE_HEIGHT","MASK_LANE_HEIGHT","LOOP_HANDLE_HEIGHT","LOOP_HANDLE_MARGIN","VOICES","MIN_SURPRISE_FACTOR","MAX_SURPRISE_FACTOR","MIN_DIFFERENCE_FACTOR","VerySimilar","MAX_DIFFERENCE_FACTOR","VeryDifferent","MIN_HAPPY_SAD_FACTOR","MAX_HAPPY_SAD_FACTOR","HAPPY_SAD_MARKS","SAD","NEUTRAL","HAPPY","KEY_NAMES","MODE_NAMES","query_string_1","mobx_1","FeatureFlags","this","id","variant","parsed","parse","window","location","search","__decorate","observable","computed","Events","feature_flags_1","utils_1","LoggingService","logEvents","sessionId","getDateString","logEvent","event","payload","undefined","timestamp","Date","now","console","log","push","firebaseLogging","writeLogEvent","sheetsLogging","logToGoogleForm","document","getElementById","JSON","stringify","submit","Source","Voice","tonal","__importStar","generateId","pitch","position","duration","source","voice","USER","SOPRANO","isPlaying","fromMidi","quantizedStartStep","quantizedEndStep","end","instrument","serialize","moveStart","nextPosition","Math","min","nextDuration","max","moveEnd","nextEnd","fromSerialized","serializedNote","newNote","fromNote","note","react_1","Group","props","x","y","children","restProps","__rest","transform","createElement","__assign","defaultProps","styles_1","blue_1","pink_1","red_1","yellow_1","primary","secondary","error","theme","createMuiTheme","palette","COLOR_PRIMARY","COLOR_SECONDARY","COLOR_PLAYING","COLOR_SELECTED","COLOR_TIMELINE_HANDLE","COLOR_TIMELINE_RANGE","COLOR_SOPRANO","COLOR_ALTO","COLOR_TENOR","COLOR_BASS","IN_KEY_COLOR","VOICE_COLORS","MUTED_COLOR","lodash_1","tonal_utils_1","note_sequence_1","constants_1","Editor","_this","mainSequence","NoteSequence","mutedVoices","Set","noteBeingDrawn","_scale","makeNoteScale","_key","_mode","_constrainToKey","_noteHoverName","_activeNoteValue","totalSixteenths","_quantizeStep","_selectedTool","DRAW","_selectedVoice","currentlySelectedNotes","isNoteSelected","has","currentlyPlayingNotes","forEach","_a","_b","__read","addNote","clear","__spread","notes","candidateNoteSequence","selectedSequence","selectedCandidateSequence","empty","allNotes","filter","isVoiceMuted","AGENT","beginDrawingNote","beginUndoable","_addNote","trimNoteBeingDrawnSequence","isEmpty","trimOverlappingVoices","endDrawingNote","DRAW_NOTE","getUndoStep","completeUndoable","selectKey","SELECT_KEY","selectMode","SELECT_MODE","setConstrainToKey","constrainToKey","SET_CONSTRAIN_TO_KEY","setNoteHoverName","scaleValue","octave","scale","makeNoteScaleForKey","keyScale","map","isPitchInScale","keyPitchSet","setActiveNoteValue","noteValue","selectQuantization","quantizeStep","SELECT_QUANTIZATION","range","nDivisions","selectTool","tool","shouldLog","SELECT_TOOL","selectVoice","SELECT_VOICE","setCurrentlyPlaying","add","clearPlayingNotes","getNoteByPitchPosition","find","getTempNoteByPitchPosition","setNotePlaying","tempNote","__values","values","_c","next","done","playingNote","shouldSelect","isMasked","isNoteMasked","isCandidateSequenceSelected","baseline","addNoteToSelected","removeNote","_removeNote","DELETE_NOTE","removeNoteFromSelected","removeNotes","removeMaskedNotes","maskedNotes","DELETE_MASKED_NOTES","getPitchFromScaleIndex","scaleIndex","addGeneratedSequence","sequence","startNoteDrag","endNoteDrag","other","MOVE_NOTE","replaceAllNotes","clearNotes","notes_1","notes_1_1","getNotesInRange","positionRange","pitchRange","notesInRange","overlaps","toggleVoiceMute","voiceIndex","UNMUTE_VOICE","MUTE_VOICE","undoable","index_1","Undo","undoStack","redoStack","pendingUndoStep","undoableNesting","undoLocked","length","getSerializedNotes","mainNotes","getSerializedCandidateNotes","candidateSequences","getSerializedMasks","userMasks","mask","candidateNotes","selectedCandidateIndex","selectedCandidateSequenceIndex","label","topLabel","pop","lockUndo","unlockUndo","lastStep","rehydrateStep","UNDO","redo","REDO","step","deserializedNotes","sequences","serialized","setCandidateSequences","setMasks","target","propertyKey","descriptor","originalMethod","apply","arguments","__webpack_exports__","_Typography__WEBPACK_IMPORTED_MODULE_0__","_Button__WEBPACK_IMPORTED_MODULE_0__","_FormControl__WEBPACK_IMPORTED_MODULE_0__","_useFormControl__WEBPACK_IMPORTED_MODULE_1__","_MenuItem__WEBPACK_IMPORTED_MODULE_0__","_Select__WEBPACK_IMPORTED_MODULE_0__","_notes","setNotes","start","otherNote","startPosition","endPosition","startPitch","endPitch","mergeConsecutiveNotes","inputNotes","notesPerVoice","Map","inputNotes_1","inputNotes_1_1","set","_d","entries","_e","_f","sort","a","b","joinedNotes","joiningNote","voice_1","nextNote","newDuration","flattened","_g","_h","removeOverlappingNotes","noteSequence","nextNotes","default","_default","50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700","_FormHelperText__WEBPACK_IMPORTED_MODULE_0__","firebase","firebaseConfig","apiKey","databaseURL","projectId","messagingSenderId","appId","APIManager","isFirebaseInitialized","app","initializeApp","err","database","ref","getNoteDetails","noteText","letter","accidental","Number","RAW_NOTE_NAMES","BOTTOM_A_OCTAVE","getStaffLineNumber","indexOf","getNoteDetailsFromLine","lineDivision","floor","simplified","Scale","noteName","simplify","scaleNotes","alternate","enharmonic","CHORD_MODES","TRIAD_QUALITIES","major","minor","harmonic minor","makeNotesTriadForKey","Chord","chordNotes","getTriadsForKey","includes","quality","getHappyTriadsForKey","triad","getSadTriadsForKey","getAllHappyTriads","keyName","getAllSadTriads","nonMajorQualities","triads","core_1","coconet_1","magenta_utils_1","Generator","model","Coconet","isWorking","isModelLoaded","_nSequencesToGenerate","_conventionalSurprising","_majorMinor","_differenceFromOriginal","SomewhatDifferent","getEmptySequence","selectCandidateSequence","index","SELECT_CANDIDATE_SEQUENCE","restart","addBackOriginalSequence","clearCandidateSequences","CLEAR_CANDIDATE_SEQUENCES","loadModel","setNSequencesToGenerate","nSequences","SET_N_SAMPLES_TO_GENERATE","setConventionalSurprising","setMajorMinor","setDifferenceFromOriginal","initialize","sent","setSelectedCandidateSequence","commitSelectedCandidateSequence","clearMasks","CHOOSE_CANDIDATE_SEQUENCE","getInfillMask","infillMask","generationMasks","maskIndex","computeTemperature","conventionalSurprising","pow","binHappySad","happySad","prepareForHarmonization","doImplicitMasksExist","addImplicitMasksToUserMasks","getSimilarDifferentConfig","differenceFromOriginal","Similar","discourageNotes","nudgeFactor","Different","getMoodConfig","moodConfig","majorMinor","happyNeutralSad","happy","generate","delay","stop","nSequencesToGenerate","temperature","similarDifferentConfig","START_GENERATE","outputNotes","getMagentaNoteSequence","bpm","this_1","infill","results","output","fromMagentaSequence","maskIndices","masked","joined","filtered","noteSequences","GENERATE","toJS","ms","Promise","resolve","setTimeout","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","Level","msg","prefix","level","INFO","NONE","Error","verbosity","WARN","warn","logWithDuration","startTime","performance","toPrecision","mm","trim","truncateEndNotes","isQuantizedSequence","trimHelper","totalKey","startKey","endKey","result","clone","item","merge","magentaNote","tempos","time","qpm","totalQuantizedSteps","quantizationInfo","stepsPerQuarter","_","EditorMaskRegion","topLeftValue","topLeftPosition","bottomRightValue","bottomRightPosition","Masks","_userMasks","emptyMasks","computeMasksFromEmptyRegions","_implicitMasks","doUserMasksExist","userOrImplicitMasks","constrainToLoopBounds","loopStart","loopEnd","getPositionsPerVoice","notePositions","maskNotes","notesInMask","replaceMask","positions","setMask","addMask","_setMask","maskSet","removeMask","mask_1","mask_1_1","removeImplicitMasksFromUserMasks","some","Tone","CallbackObject","_super","__extends","run","shouldLoop","loop","BasePlayerCallback","Player","playerCallbackObject","isPlayerLoaded","SoundFontPlayer","master","loadPlayer","velocity","allNotesSeq","loadSamples","togglePlay","playNote","playNoteDown","timePerSixteenth","playNoteUp","PLAY","_start","unmutedNotes","loopSequence","STOP","_stop","_colorManipulator__WEBPACK_IMPORTED_MODULE_0__","_createMuiTheme__WEBPACK_IMPORTED_MODULE_1__","_createStyles__WEBPACK_IMPORTED_MODULE_2__","_makeStyles__WEBPACK_IMPORTED_MODULE_3__","_MuiThemeProvider__WEBPACK_IMPORTED_MODULE_4__","_responsiveFontSizes__WEBPACK_IMPORTED_MODULE_5__","_styled__WEBPACK_IMPORTED_MODULE_6__","_transitions__WEBPACK_IMPORTED_MODULE_7__","_useTheme__WEBPACK_IMPORTED_MODULE_8__","_withStyles__WEBPACK_IMPORTED_MODULE_9__","_withTheme__WEBPACK_IMPORTED_MODULE_10__","_Dialog__WEBPACK_IMPORTED_MODULE_0__","typestyle_1","Spacer","spacerStyle","style","width","display","className","useSourceMap","list","toString","content","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","sourceURLs","sources","sourceRoot","concat","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","fn","memo","stylesInDom","isOldIE","all","atob","getElement","parent","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","e","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","options","domStyle","refs","j","parts","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","insertInto","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","splice","createStyleElement","attrs","type","nonce","nc","getNonce","addAttrs","el","keys","setAttribute","obj","update","remove","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","href","styleSheet","cssText","createTextNode","newObj","DEBUG","newList","mayRemove","textStore","replaceText","replacement","Boolean","cssNode","childNodes","react_hot_loader_1","React","react_dom_1","app_1","rootEl","render","AppContainer","warnAboutHMRDisabled","Children","only","hot","shouldWrapWithAppContainer","areComponentsEqual","setConfig","cold","configureComponent","main_1","App","mobx_react_1","AppBar_1","Toolbar_1","Typography_1","controls_1","generate_1","working_1","theme_1","Main","componentDidMount","APP_LOAD","url","stageContainerStyle","marginTop","height","flexDirection","justifyContent","flexGrow","editorContainerStyle","editorWidth","alignItems","sequencesContainerStyle","sequencesWidth","ThemeProvider","color","_ref","stageRef","Controls","Generate","action","method","Working","open","title","observer","Component","_AppBar__WEBPACK_IMPORTED_MODULE_0__","_Toolbar__WEBPACK_IMPORTED_MODULE_0__","Button_1","FormControl_1","FormHelperText_1","MenuItem_1","Select_1","ToggleButton_1","ToggleButtonGroup_1","icons_1","key_signatures_1","spacer_1","state","keyDialogOpen","controlsStyle","paddingLeft","paddingRight","margin","controlsHeight","playDisabled","showPlay","maskButtonDisabled","disabled","onClick","PlayArrow","Stop","canUndo","canRedo","Redo","selectedTool","exclusive","onChange","Edit","MASK","SelectAll","ERASE","DeleteSweep","selectedVoice","autoWidth","ALTO","TENOR","BASS","setState","KeySignatures","isDialogOpen","onRequestClose","_ToggleButton__WEBPACK_IMPORTED_MODULE_0__","_ToggleButtonGroup__WEBPACK_IMPORTED_MODULE_0__","model_1","tf","coconet_utils_1","DEFAULT_SPEC","useSoftmaxLoss","batchNormVarianceEpsilon","numInstruments","numFilters","numLayers","numRegularConvLayers","dilation","layers","interleaveSplitEveryNLayers","numPointwiseSplits","ConvNet","spec","vars","residualPeriod","outputForResidual","residualCounter","rawVars","dispose","predictFromPianoroll","pianoroll","tidy","featuremaps","getConvnetInput","residualSave","applyConvolution","applyResidual","applyActivation","applyPooling","computePredictions","logits","transpose","softmax","sigmoid","residualReset","isFirst","isLast","shape","getVar","layerNum","varname","getSepConvVar","getPointwiseSplitVar","splitNum","layer","depthwise","filters","filterShape","stride","convStride","padding","convPad","toLowerCase","conv","dWeights","depthwiseConv2d","splits","split","rank","pointwiseSplits","splitIdx","outputShape","weights","dot","biases","matMul","reshape","bias","pWeights","separableConv2d","stride_1","padding_1","conv2d","applyBatchnorm","gammas","betas","mean","variance","IS_IOS","v","arraySync","stdevs","tensor","sqrt","sub","mul","div","batchNorm","squeeze","activation","relu","pooling","poolPad","maxPool","scalar","checkpointURL","initialized","instantiateFromSpec","fetch","then","response","json","manifest","io","loadWeights","convnet","isInitialized","config","assertIsRelativeQuantizedSequence","numSteps","sequenceToPianoroll","outerMasks","getCompletionMaskFromInput","numIterations","getNumIterationsFromOuterMasks","getCompletionMask","samples","outputSequence","pianorollToSequence","pianorolls","gibbs","buffer_1","buffer","toTensor","expandDims","tile","NUM_PITCHES","sum","equal","cast","zerosLike","defaultNumIterations","array","Array","isArray","first","priorOverOriginalNotes","onesLike","getTriadPitchBuffer","hardPrior","triadPitches","nPitches","pitches","triadPitchSet","mapTemperatureToNHeldSteps","nNoteDivisions","getMostLikelyMoodPrior","predictions","nBatch","nQSteps","nVoices","moodTriads","nProgressions","moodTriadPriorCandidatesJs","moodTriadPriorCandidatesTf","nCandidates","triadProgressions","predictionOverlap","slice","predsPerCandidate","triadLHs","mulStrict","bestTriadIdx","argMax","moodTriadPrior","gather","prior","fullTriadProgressionPrior","getRandomMoodPrior","nHeldQSteps","random","pitchPriorIthProgression","numStepsTensor","softPriors","pm","yaoSchedule","innerMasks","bernoulliMask","nextFrame","similarDifferentPrior","moodPrior","nudgeWithPrior","newPredictions","samplePredictions","updatedPianorolls","where","pmin","pmax","alpha","wat","secondArg","bb","tt","pp","ii","randomUniform","less","exp","cmf","cumsum","totalMasses","oneHot","flatten","QuantizationStatusException","message","setPrototypeOf","_newTarget","isRelativeQuantizedSequence","music_1","numberOfSteps","reshaped","NUM_VOICES","zeros","pitchIndex","stepIndex","test","navigator","userAgent","quantizePosition","quantizeFn","round","getQuantizedPositionFromX","notesWidth","clampPosition","clamp","clampPitch","Interactions","noteDragStartX","noteDragStartY","noteDragStartPosition","noteDragStartPitch","handleNoteHover","isEraseToolDragging","handleNoteDrag","deltaX","clientX","deltaY","clientY","deltaPosition","sixteenthWidth","deltaPitch","noteHeight","deltaQuantized","nextPitch","isInScale","handleNoteMouseDown","handleStartNoteDrag","loopStartDragStartX","loopEndDragStartX","loopStartDragStartPosition","loopEndDragStartPosition","handleLoopStartDrag","handleLoopEndDrag","handleLoopStartMouseDown","preventDefault","mouseMove","addEventListener","mouseUp","CHANGE_LOOP","removeEventListener","handleLoopEndMouseDown","isMaskToolDragging","isDrawToolDragging","handleDrawMouseDown","divisionIndex","editorGrid","gridBounds","getBoundingClientRect","handleDrawMouseMove","gridPosition","handleGridMouseDown","toolMouseUp","maskToolDragStartClientXY","maskToolDragStartXY","maskToolDragXY","maskToolShiftDrag","emptyMaskDeselectsAll","handleMaskToolDrag","handleMaskToolMouseDown","shiftKey","dim","left","top","aX","aY","bX","bY","startY","endX","endY","ceil","IMPLICITLY_COMMIT_CANDIDATE","USE_MASK_TOOL","maskLaneDragStartX","maskLaneDragX","maskLaneDragStartClientX","hasMaskDragMoved","maskLaneShiftDrag","handleMaskLaneMouseDown","candidateSequencesExist","USE_MASK_LANE","handleMaskRectClick","pendingCandidateSequences","handleGridClick","save_load_1","DEBOUNCE_TIME_MS","KeyboardManager","handlePlayPause","debounce","handleKeyDown","metaKey","saveJSON","loadJSON","SaveLoad","SAVE_STATE","ffMeta","downloadBlob","input","click","onchange","file","files","reader","FileReader","readAsText","onload","readerEvent","filename","download","clickHandler","Layout","editorHeight","sequenceHeight","loopHandleHeight","loopHandleMargin","onresize","handleResize","computeEditorHeight","editorContainer","innerWidth","defaultAppWidth","appWidth","computedWidth","maskLanesHeight","pianoRollWidth","notesHeight","maskLanesY","Dialog_1","DialogActions_1","DialogContent_1","DialogTitle_1","FormControlLabel_1","Switch_1","disableBackdropClick","disableEscapeKeyDown","onClose","control","checked","_DialogActions__WEBPACK_IMPORTED_MODULE_0__","_DialogContent__WEBPACK_IMPORTED_MODULE_0__","_DialogTitle__WEBPACK_IMPORTED_MODULE_0__","_FormControlLabel__WEBPACK_IMPORTED_MODULE_0__","_Switch__WEBPACK_IMPORTED_MODULE_0__","piano_roll_1","filters_1","grid_1","group_1","loop_overlay_1","mask_lanes_1","loop_handles_1","masks_select_1","isMaskToolSelected","maxHeight","Filters","LoopHandles","MaskLanes","labelWidth","notesY","onMouseLeave","PianoRoll","Grid","Notes","LoopOverlay","MasksSelect","onMouseEnter","body","cursor","keyProps","Key","isActive","activeNoteValue","fill","fadeDuration","rectStyle","transition","stroke","strokeWidth","highlightFill","onMouseDown","PRESS_PIANOROLL","Fragment","patternUnits","VOICE","flood-color","flood-opacity","in","in2","operator","radius","stdDeviation","renderDivision","isWhole","x1","y1","x2","y2","renderNoteGrid","divisions","gridWidth","isRoot","fillColor","fillOpacity","strokeColor","opacity","gridStyle","division","startX","loopOverlayStyle","pointerEvents","VOICE_INITIALS","renderLabels","laneHeight","rx","renderLanes","mouseDownHandler","renderMasks","maskBounds","currentBound","arrIndex","neighborLeft","bounds","boundsIndex","rectWidth","getNoteProps","scaleMax","isMuted","getFillColor","glowFilter","sizeProps","onMouseMove","toSVGPoints","coordinates","coord","caretWidth","startHandleCoordinates","endHandleCoordinates","points","renderDragRect","maskToolDragWidth","maskToolDragHeight","abs","strokeDasharray","maskOverlayStyle","Slider_1","sequence_1","getPitchRange","minPitch","maxPitch","getPositionRange","minPosition","maxPosition","horizontalSliderStyle","renderSequences","Sequence","isSelected","onSelect","isModelBusy","isGenerateButtonDisabled","doAnyMasksExist","nSequenceContainerStyle","showCandidateSequences","maskedSequenceExists","similaritySliderEnabled","MusicNote","classes","root","ParameterSlider","newValue","onChangeCommitted","SET_CONVENTIONAL_SURPRISING","labels","nMarks","SET_MAJOR_MINOR","SET_SIMILAR_DIFFERENT","MarkedSlider","withStyles","mark","backgroundColor","marginLeft","markActive","labelColor","deltaRange","marks","valueLabelDisplay","enabled","_Slider__WEBPACK_IMPORTED_MODULE_0__","core_2","renderNotes","pitchHeight","offsetY","border","titleStyle","fontFamily","marginBottom","boxSizing","hmr","locals","baseUrl","protocol","host","currentDir","pathname","replace","fullMatch","origUrl","newUrl","unquotedOrigUrl","$1","CircularProgress_1","spinnerStyle","_CircularProgress__WEBPACK_IMPORTED_MODULE_0__","esm_ServerStyleSheets_ServerStyleSheets","ServerStyleSheets","classCallCheckfrom_dll_reference_vendor_19dcb43a348424cab493","createClassfrom_dll_reference_vendor_19dcb43a348424cab493","sheetsManager","sheetsRegistry","jss_esmfrom_dll_reference_vendor_19dcb43a348424cab493","generateClassName","createGenerateClassNamefrom_dll_reference_vendor_19dcb43a348424cab493","reactfrom_dll_reference_vendor_19dcb43a348424cab493_default","StylesProviderfrom_dll_reference_vendor_19dcb43a348424cab493","extendsfrom_dll_reference_vendor_19dcb43a348424cab493","serverGenerateClassName","dangerouslySetInnerHTML","__html","createStylesfrom_dll_reference_vendor_19dcb43a348424cab493","getThemePropsfrom_dll_reference_vendor_19dcb43a348424cab493","jssPresetfrom_dll_reference_vendor_19dcb43a348424cab493","makeStylesfrom_dll_reference_vendor_19dcb43a348424cab493","mergeClassesfrom_dll_reference_vendor_19dcb43a348424cab493","styledfrom_dll_reference_vendor_19dcb43a348424cab493","ThemeProviderfrom_dll_reference_vendor_19dcb43a348424cab493","useThemefrom_dll_reference_vendor_19dcb43a348424cab493","withStylesfrom_dll_reference_vendor_19dcb43a348424cab493","withThemefrom_dll_reference_vendor_19dcb43a348424cab493"],"mappings":"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","file":"bundle.ce84d2d21b365e9ad037.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/cococo\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 78);\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./dist/react-hot-loader.production.min.js');\n} else if (process.env.NODE_ENV === 'test') {\n  module.exports = require('./dist/react-hot-loader.production.min.js');\n} else if (typeof window === 'undefined') {\n  // this is just server environment\n  module.exports = require('./dist/react-hot-loader.production.min.js');\n} else if (!module.hot) {\n  module.exports = require('./dist/react-hot-loader.production.min.js');\n  module.exports.AppContainer.warnAboutHMRDisabled = true;\n  module.exports.hot.shouldWrapWithAppContainer = true;\n} else {\n  var evalAllowed = false;\n  try {\n    eval('evalAllowed = true');\n  } catch (e) {\n    // eval not allowed due to CSP\n  }\n\n  // RHL needs setPrototypeOf to operate Component inheritance, and eval to patch methods\n  var jsFeaturesPresent = !!Object.setPrototypeOf;\n\n  if (!jsFeaturesPresent || !evalAllowed) {\n    // we are not in prod mode, but RHL could not be activated\n    console.warn('React-Hot-Loader is not supported in this environment.');\n    module.exports = require('./dist/react-hot-loader.production.min.js');\n  } else {\n    module.exports = window.reactHotLoaderGlobal = require('./dist/react-hot-loader.development.js');\n  }\n}\n","module.exports = vendor_19dcb43a348424cab493;","module.exports = (__webpack_require__(1))(182);","module.exports = (__webpack_require__(1))(0);","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport _api from './api';\nimport _editor from './editor';\nimport _generator from './generator';\nimport _interactions from './interactions';\nimport _keyboard from './keyboard';\nimport _layout from './layout';\nimport _logging from './logging';\nimport _masks from './masks';\nimport _player from './player';\nimport _undo from './undo';\n\nexport { EditorTool } from './editor';\nexport { Note } from './note';\n\nexport const api = _api;\nexport const editor = _editor;\nexport const generator = _generator;\nexport const interactions = _interactions;\nexport const keyboard = _keyboard;\nexport const layout = _layout;\nexport const logging = _logging;\nexport const masks = _masks;\nexport const player = _player;\nexport const undo = _undo;\n","module.exports = (__webpack_require__(1))(5906);","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nexport const MIDDLE_C = 60;\nexport const BOTTOM_A = 33;\n\nexport const N_NOTE_DIVISIONS = 16;\n\nexport const MIN_PITCH = 36;\nexport const MAX_PITCH = 82;\nexport const NOTE_VELOCITY = 79;\nexport const DEFAULT_BPM = 80;\n\nexport const TOTAL_SIXTEENTHS = 32;\n\nexport const SOUNDFONT_URL =\n  'https://storage.googleapis.com/magentadata/js/soundfonts/sgm_plus';\nexport const MODEL_URL =\n  'https://storage.googleapis.com/magentadata/js/checkpoints/coconet/bach';\n\nexport const DIVISIONS = [4, 8, 12, 16, 20, 24, 28];\n\nexport const DEFAULT_NOTES = [];\n\nexport const DEFAULT_EDITOR_WIDTH = 1200;\nexport const DEFAULT_SEQUENCES_WIDTH = 200;\n\nexport const PIANO_ROLL_WIDTH = 24;\nexport const NOTE_HEIGHT = 12;\nexport const MASK_LANE_HEIGHT = 20;\nexport const LOOP_HANDLE_HEIGHT = 25;\nexport const LOOP_HANDLE_MARGIN = 0;\n\nexport const VOICES = ['SOPRANO', 'ALTO', 'TENOR', 'BASS'];\n\nexport const MIN_SURPRISE_FACTOR = -3;\nexport const MAX_SURPRISE_FACTOR = 1;\n\nexport enum DifferenceFromOriginal {\n  VerySimilar = 0,\n  Similar = 1,\n  SomewhatDifferent = 2,\n  Different = 3,\n  VeryDifferent = 4,\n}\n\nexport const MIN_DIFFERENCE_FACTOR = DifferenceFromOriginal.VerySimilar;\nexport const MAX_DIFFERENCE_FACTOR = DifferenceFromOriginal.VeryDifferent;\n\nexport const MIN_HAPPY_SAD_FACTOR = -1.2;\nexport const MAX_HAPPY_SAD_FACTOR = 1.2;\nexport enum Mood {\n  SAD = -1,\n  NEUTRAL = 0,\n  HAPPY = 1,\n}\nexport const HAPPY_SAD_MARKS = [\n  { value: Mood.SAD },\n  { value: Mood.NEUTRAL },\n  { value: Mood.HAPPY },\n];\n\n// prettier-ignore\nexport const KEY_NAMES = ['C', 'Db', 'D', 'Eb', 'E', 'F', 'Gb', 'G', 'Ab', 'A', 'Bb', 'B'];\n\n// prettier-ignore\nexport const MODE_NAMES = ['major', 'minor', 'harmonic minor'];\n","module.exports = (__webpack_require__(1))(5911);","module.exports = (__webpack_require__(1))(37);","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport queryString from 'query-string';\nimport { computed, observable } from 'mobx';\n\nexport type Variant = 'a' | 'b';\n\nexport type Logging = 'console' | 'firebase' | 'sheets';\n\nexport class FeatureFlags {\n  @observable id = 'cococo';\n\n  @observable readonly variant: Variant = 'a';\n  @computed get baseline() {\n    return this.variant === 'b';\n  }\n\n  @observable readonly logging: Logging = 'console';\n  @computed get firebaseLogging() {\n    return this.logging === 'firebase';\n  }\n  @computed get sheetsLogging() {\n    return this.logging === 'sheets';\n  }\n\n  constructor() {\n    const parsed = queryString.parse(window.location.search);\n    const { variant, logging, id } = parsed;\n    if (variant === 'b') {\n      this.variant = variant;\n    }\n    if (logging === 'firebase' || logging === 'sheets') {\n      this.logging = logging;\n    }\n    if (id) {\n      this.id = `${id}`;\n    }\n  }\n}\n\nexport default new FeatureFlags();\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport api from './api';\nimport featureFlags from './feature-flags';\nimport { getDateString } from './utils';\n\nexport const enum Events {\n  // Generic Events\n  APP_LOAD = 'APP_LOAD',\n  // Note edit events\n  DRAW_NOTE = 'DRAW_NOTE',\n  DELETE_NOTE = 'DELETE_NOTE',\n  DELETE_MASKED_NOTES = 'DELETE_MASKED_NOTES',\n  MOVE_NOTE = 'MOVE_NOTE',\n  // Play pause events\n  PLAY = 'PLAY',\n  STOP = 'STOP',\n  // Undo / Redo\n  UNDO = 'UNDO',\n  REDO = 'REDO',\n  // Tool selection\n  SELECT_TOOL = 'SELECT_TOOL',\n  // Voice / Quantization\n  SELECT_VOICE = 'SELECT_VOICE',\n  SELECT_QUANTIZATION = 'SELECT_QUANTIZATION',\n  // Key / mode\n  SELECT_KEY = 'SELECT_KEY',\n  SELECT_MODE = 'SELECT_MODE',\n  SET_CONSTRAIN_TO_KEY = 'SET_CONSTRAIN_TO_KEY',\n  // Masking\n  USE_MASK_TOOL = 'USE_MASK_TOOL',\n  USE_MASK_LANE = 'USE_MASK_LANE',\n  // Mute / Unmute\n  MUTE_VOICE = 'MUTE_VOICE',\n  UNMUTE_VOICE = 'UNMUTE_VOICE',\n  // Looping\n  CHANGE_LOOP = 'CHANGE_LOOP',\n  // Pianoroll\n  PRESS_PIANOROLL = 'PRESS_PIANOROLL',\n  // Generation\n  START_GENERATE = 'START_GENERATE',\n  GENERATE = 'GENERATE',\n  SET_N_SAMPLES_TO_GENERATE = 'SET_N_SAMPLES_TO_GENERATE',\n  SET_CONVENTIONAL_SURPRISING = 'SET_CONVENTIONAL_SURPRISING',\n  SET_MAJOR_MINOR = 'SET_MAJOR_MINOR',\n  SET_SIMILAR_DIFFERENT = 'SET_SIMILAR_DIFFERENT',\n  SELECT_CANDIDATE_SEQUENCE = 'SELECT_CANDIDATE_SEQUENCE',\n  CLEAR_CANDIDATE_SEQUENCES = 'CLEAR_CANDIDATE_SEQUENCES',\n  CHOOSE_CANDIDATE_SEQUENCE = 'CHOOSE_CANDIDATE_SEQUENCE',\n  // Fired when another event triggers committing the candidate sequence,\n  // such as drawing a new mask\n  IMPLICITLY_COMMIT_CANDIDATE = 'IMPLICITLY_COMMIT_CANDIDATE',\n  // Saving state via Ctrl+S\n  SAVE_STATE = 'SAVE_STATE',\n}\n\nexport interface LogEvent {\n  event: Events;\n  timestamp: number;\n  payload?: any;\n  id: string;\n}\n\nexport class LoggingService {\n  private logEvents: LogEvent[] = [];\n  private sessionId = getDateString();\n\n  logEvent(event: Events, payload: any = undefined) {\n    const logEvent: LogEvent = {\n      event,\n      timestamp: Date.now(),\n      id: featureFlags.id,\n    };\n\n    if (payload !== undefined) {\n      logEvent.payload = payload;\n    }\n\n    console.log(event, logEvent);\n    this.logEvents.push(logEvent);\n\n    if (featureFlags.firebaseLogging) {\n      api.writeLogEvent(this.sessionId, logEvent);\n    }\n    if (featureFlags.sheetsLogging) {\n      this.logToGoogleForm(logEvent);\n    }\n  }\n\n  private logToGoogleForm(logEvent) {\n    (<HTMLTextAreaElement>(\n      document.getElementById('sheets-logging-textarea')\n    )).value = JSON.stringify(logEvent);\n    const form = <HTMLFormElement>(\n      document.getElementById('sheets-logging-form')\n    );\n    form.submit();\n    console.log('logged to googleform');\n  }\n}\n\nexport default new LoggingService();\n","module.exports = (__webpack_require__(1))(5905);","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport * as tonal from 'tonal';\nimport { computed, observable } from 'mobx';\n\nlet id = 0;\nfunction generateId() {\n  return id++;\n}\n\nexport const enum Source {\n  USER = 'USER',\n  AGENT = 'AGENT',\n}\nexport const enum Voice {\n  SOPRANO = 0,\n  ALTO = 1,\n  TENOR = 2,\n  BASS = 3,\n}\n\nexport interface SerializedNote {\n  id: number;\n  source: Source;\n  pitch: number;\n  position: number;\n  duration: number;\n  voice: number;\n}\n\nexport type Notes = Note[];\n\nexport class Note {\n  id = generateId();\n  source: Source = Source.USER;\n\n  @observable pitch: number;\n  @observable position: number;\n  @observable duration: number;\n  @observable voice: number;\n\n  @observable isPlaying = false;\n\n  @computed get name() {\n    return tonal.Note.fromMidi(this.pitch);\n  }\n\n  @computed get start() {\n    return this.position;\n  }\n\n  @computed get end() {\n    return this.position + this.duration;\n  }\n\n  constructor(\n    pitch: number,\n    position: number,\n    duration: number,\n    source: Source = Source.USER,\n    voice = Voice.SOPRANO\n  ) {\n    this.pitch = pitch;\n    this.position = position;\n    this.duration = duration;\n    this.source = source;\n    this.voice = voice;\n  }\n\n  @computed get magentaNote() {\n    return {\n      pitch: this.pitch,\n      quantizedStartStep: this.position,\n      quantizedEndStep: this.end,\n      instrument: this.voice,\n    };\n  }\n\n  serialize(): SerializedNote {\n    return {\n      id: this.id,\n      source: this.source,\n      pitch: this.pitch,\n      position: this.position,\n      duration: this.duration,\n      voice: this.voice,\n    };\n  }\n\n  moveStart(nextPosition: number) {\n    nextPosition = Math.min(nextPosition, this.end - 1);\n    const nextDuration = this.duration - (nextPosition - this.position);\n    this.duration = Math.max(1, nextDuration);\n    this.position = nextPosition;\n    return this;\n  }\n\n  moveEnd(nextEnd: number) {\n    nextEnd = Math.max(nextEnd, this.position + 1);\n    const nextDuration = this.duration - (this.end - nextEnd);\n    this.duration = Math.max(1, nextDuration);\n    return this;\n  }\n\n  static fromSerialized(serializedNote: SerializedNote) {\n    const { pitch, position, duration, source, voice } = serializedNote;\n    const newNote = new Note(pitch, position, duration, source, voice);\n    newNote.id = serializedNote.id;\n    return newNote;\n  }\n\n  // Copies all note data to a new note, with new id;\n  static fromNote(note: Note) {\n    return new Note(\n      note.pitch,\n      note.position,\n      note.duration,\n      note.source,\n      note.voice\n    );\n  }\n}\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport React from 'react';\n\nexport interface GroupProps {\n  x?: number;\n  y?: number;\n  children?: React.ReactNode;\n  onMouseEnter?: () => void;\n  onMouseLeave?: () => void;\n}\n\nexport function Group(props: GroupProps) {\n  const { x, y, children, ...restProps } = props;\n  const transform = `translate(${x},${y})`;\n  return (\n    <g transform={transform} {...restProps}>\n      {children}\n    </g>\n  );\n}\n\nGroup.defaultProps = {\n  x: 0,\n  y: 0,\n};\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport blue from '@material-ui/core/colors/blue';\nimport pink from '@material-ui/core/colors/pink';\nimport red from '@material-ui/core/colors/red';\nimport yellow from '@material-ui/core/colors/yellow';\nconst primary = blue;\nconst secondary = pink;\nconst error = red;\n\nexport const theme = createMuiTheme({\n  palette: {\n    primary,\n    secondary,\n    error,\n  },\n});\n\nexport const COLOR_PRIMARY = primary[500];\nexport const COLOR_SECONDARY = secondary[500];\nexport const COLOR_PLAYING = secondary[500];\nexport const COLOR_SELECTED = secondary[500];\nexport const COLOR_TIMELINE_HANDLE = yellow[800];\nexport const COLOR_TIMELINE_RANGE = yellow[700];\n\n// colorblind palette found using\n// http://colorbrewer2.org/#type=sequential&scheme=YlGnBu&n=5\nexport const COLOR_SOPRANO = '#a1dab4';\nexport const COLOR_ALTO = '#41b6c4';\nexport const COLOR_TENOR = '#2c7fb8';\nexport const COLOR_BASS = '#253494';\nexport const IN_KEY_COLOR = '#ffffcc';\nexport const VOICE_COLORS = [\n  COLOR_SOPRANO,\n  COLOR_ALTO,\n  COLOR_TENOR,\n  COLOR_BASS,\n];\nexport const MUTED_COLOR = '#aaa';\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport { computed, observable } from 'mobx';\nimport { range } from 'lodash';\nimport { makeNoteScale, makeNoteScaleForKey } from './tonal-utils';\nimport * as _ from 'lodash';\n\nimport generator from './generator';\nimport logging, { Events } from './logging';\nimport masks from './masks';\nimport { Note, Source, Voice } from './note';\nimport { NoteSequence } from './note-sequence';\nimport undo, { undoable } from './undo';\n\nimport {\n  DEFAULT_NOTES,\n  TOTAL_SIXTEENTHS,\n  MAX_PITCH,\n  MIN_PITCH,\n} from './constants';\nimport featureFlags, { FeatureFlags } from './feature-flags';\n\nexport const enum EditorTool {\n  DRAW = 'DRAW',\n  MASK = 'MASK',\n  ERASE = 'ERASE',\n}\n\nexport interface ScaleValue {\n  pitch: number;\n  name: string;\n  octave: number;\n}\n\nclass Editor {\n  @observable private mainSequence = new NoteSequence();\n  @observable private mutedVoices = new Set<number>();\n\n  @computed get mainNotes() {\n    return [...this.mainSequence.notes];\n  }\n\n  @computed get allNotes() {\n    return [...this.mainSequence.notes, ...this.candidateNoteSequence.notes];\n  }\n\n  @computed get candidateNoteSequence() {\n    const selectedSequence = generator.selectedCandidateSequence;\n    return selectedSequence ? selectedSequence : NoteSequence.empty();\n  }\n\n  @computed get unmutedNotes() {\n    return this.allNotes.filter(note => !this.isVoiceMuted(note.voice));\n  }\n\n  @computed get userNotes() {\n    return this.allNotes.filter(note => note.source === Source.USER);\n  }\n  @computed get agentNotes() {\n    return this.allNotes.filter(note => note.source === Source.AGENT);\n  }\n\n  @observable noteBeingDrawn: Note | null = null;\n  beginDrawingNote(note: Note) {\n    undo.beginUndoable('editor.drawNote');\n    this.noteBeingDrawn = note;\n    this._addNote(note);\n  }\n  trimNoteBeingDrawnSequence() {\n    if (!this.noteBeingDrawn) return;\n\n    if (!this.candidateNoteSequence.isEmpty()) {\n      this.candidateNoteSequence.trimOverlappingVoices(this.noteBeingDrawn);\n    } else {\n      this.mainSequence.trimOverlappingVoices(this.noteBeingDrawn);\n    }\n  }\n  endDrawingNote() {\n    if (this.noteBeingDrawn) {\n      logging.logEvent(Events.DRAW_NOTE, undo.getUndoStep());\n      this.noteBeingDrawn = null;\n      undo.completeUndoable('editor.drawNote');\n    }\n  }\n\n  @observable private _scale = makeNoteScale(MAX_PITCH, MIN_PITCH);\n  @computed get scale() {\n    return this._scale;\n  }\n\n  @observable private _key = 'C';\n  @computed get key() {\n    return this._key;\n  }\n  selectKey(key: string) {\n    logging.logEvent(Events.SELECT_KEY, key);\n    this._key = key;\n  }\n\n  @observable _mode = 'major';\n  @computed get mode() {\n    return this._mode;\n  }\n  selectMode(mode: string) {\n    logging.logEvent(Events.SELECT_MODE, mode);\n    this._mode = mode;\n  }\n\n  @observable private _constrainToKey = true;\n  @computed get constrainToKey() {\n    return this._constrainToKey;\n  }\n  setConstrainToKey(constrainToKey: boolean) {\n    logging.logEvent(Events.SET_CONSTRAIN_TO_KEY, constrainToKey);\n    this._constrainToKey = constrainToKey;\n  }\n\n  @observable private _noteHoverName = '';\n  @computed get noteHoverName() {\n    return this._noteHoverName;\n  }\n\n  setNoteHoverName(scaleValue: ScaleValue | null) {\n    if (scaleValue === null) {\n      this._noteHoverName = '';\n    } else {\n      const { name, octave } = scaleValue;\n      this._noteHoverName = `${name}${octave}`;\n    }\n  }\n\n  @computed get scaleMax() {\n    return this.scale[0].pitch;\n  }\n\n  @computed get keyScale() {\n    return makeNoteScaleForKey(this.key, this.mode);\n  }\n\n  @computed get keyPitchSet() {\n    return new Set<number>(this.keyScale.map(scaleValue => scaleValue.pitch));\n  }\n\n  isPitchInScale(pitch: number) {\n    return this.keyPitchSet.has(pitch);\n  }\n\n  @observable private _activeNoteValue: number | null = null;\n  @computed get activeNoteValue() {\n    return this._activeNoteValue;\n  }\n  setActiveNoteValue(noteValue: number | null) {\n    this._activeNoteValue = noteValue;\n  }\n\n  @observable readonly totalSixteenths = TOTAL_SIXTEENTHS;\n\n  @observable private _quantizeStep = 2;\n  @computed get quantizeStep() {\n    return this._quantizeStep;\n  }\n  selectQuantization(quantizeStep: number) {\n    logging.logEvent(Events.SELECT_QUANTIZATION, quantizeStep);\n    this._quantizeStep = quantizeStep;\n  }\n\n  @computed get nDivisions() {\n    return this.totalSixteenths / this.quantizeStep;\n  }\n  @computed get divisions() {\n    const divisions = range(this.nDivisions);\n    return divisions;\n  }\n\n  @observable private _selectedTool: EditorTool = EditorTool.DRAW;\n  @computed get selectedTool() {\n    return this._selectedTool;\n  }\n  selectTool(tool: EditorTool, shouldLog = true) {\n    shouldLog ? logging.logEvent(Events.SELECT_TOOL, tool) : null;\n    this._selectedTool = tool;\n  }\n\n  @observable private _selectedVoice: Voice = Voice.SOPRANO;\n  @computed get selectedVoice() {\n    return this._selectedVoice;\n  }\n  selectVoice(voice: number) {\n    logging.logEvent(Events.SELECT_VOICE, voice);\n    this._selectedVoice = voice;\n  }\n\n  constructor() {\n    let position = 0;\n    DEFAULT_NOTES.forEach(([pitch, duration], i) => {\n      const note = new Note(pitch, position, duration);\n      position += duration;\n      this.mainSequence.addNote(note);\n    });\n    this.currentlySelectedNotes.clear();\n  }\n\n  @observable private currentlySelectedNotes = new Set<Note>();\n  isNoteSelected = (note: Note) => {\n    return this.currentlySelectedNotes.has(note);\n  };\n\n  @observable private currentlyPlayingNotes = new Set<Note>();\n  private setCurrentlyPlaying(note: Note) {\n    note.isPlaying = true;\n    this.currentlyPlayingNotes.add(note);\n  }\n\n  clearPlayingNotes() {\n    this.currentlyPlayingNotes.clear();\n    this.allNotes.forEach(note => {\n      note.isPlaying = false;\n    });\n  }\n\n  private getNoteByPitchPosition(pitch: number, position: number) {\n    return this.allNotes.find(note => {\n      return note.pitch === pitch && note.position === position;\n    });\n  }\n\n  private getTempNoteByPitchPosition(pitch: number, position: number) {\n    return this.candidateNoteSequence.notes.find(note => {\n      return note.pitch === pitch && note.position === position;\n    });\n  }\n\n  setNotePlaying(pitch: number, position: number) {\n    const note = this.getNoteByPitchPosition(pitch, position);\n    if (note) this.setCurrentlyPlaying(note);\n\n    // Also set temp notes playing\n    const tempNote = this.getTempNoteByPitchPosition(pitch, position);\n    if (tempNote) this.setCurrentlyPlaying(tempNote);\n\n    // Clear all notes that are playing if the playhead has passed them\n    for (const playingNote of this.currentlyPlayingNotes.values()) {\n      if (playingNote.position + playingNote.duration <= position) {\n        playingNote.isPlaying = false;\n        this.currentlyPlayingNotes.delete(playingNote);\n      }\n    }\n  }\n\n  @undoable('editor.addNote')\n  addNote(note: Note, shouldSelect = false) {\n    this._addNote(note);\n    if (shouldSelect) {\n      this.currentlySelectedNotes.clear();\n      this.currentlySelectedNotes.add(note);\n    }\n  }\n\n  // The non-undoable internal method\n  private _addNote(note: Note) {\n    // We need to potentially add the note to a candidate sequence\n    const isMasked = masks.isNoteMasked(note);\n    const isCandidateSequenceSelected =\n      generator.selectedCandidateSequence !== null;\n\n    if (\n      isMasked &&\n      isCandidateSequenceSelected &&\n      !featureFlags.baseline // candidate sequence concept only valid in variant a\n    ) {\n      generator.addNoteToSelected(note);\n    }\n    // Otherwise, just add to the main note sequence\n    else {\n      this.mainSequence.addNote(note);\n    }\n  }\n\n  @undoable('editor.removeNote')\n  removeNote(note: Note) {\n    this._removeNote(note);\n    logging.logEvent(Events.DELETE_NOTE, undo.getUndoStep());\n  }\n\n  // The non-undoable internal method\n  private _removeNote(note: Note) {\n    // We need to remove the note from the candidate sequence\n    generator.removeNoteFromSelected(note);\n    this.mainSequence.removeNote(note);\n  }\n\n  removeNotes(notes: Note[]) {\n    notes.forEach(note => this._removeNote(note));\n  }\n\n  @undoable('editor.removeMaskedNotes')\n  removeMaskedNotes() {\n    const maskedNotes = masks.maskedNotes;\n    this.removeNotes(maskedNotes);\n    logging.logEvent(Events.DELETE_MASKED_NOTES, undo.getUndoStep());\n  }\n\n  getPitchFromScaleIndex(scaleIndex: number) {\n    return this.scale[scaleIndex].pitch;\n  }\n\n  addGeneratedSequence(sequence: NoteSequence) {\n    sequence.notes.forEach(note => {\n      this.mainSequence.addNote(note);\n    });\n  }\n\n  startNoteDrag() {\n    undo.beginUndoable('editor.dragNote');\n  }\n\n  // Resolves conflicting note edits\n  endNoteDrag(note: Note) {\n    for (let other of this.allNotes) {\n      if (other === note) continue;\n      if (other.position === note.position && other.pitch === note.pitch) {\n        this.mainSequence.removeNote(note);\n      }\n    }\n    undo.completeUndoable('editor.dragNote');\n    logging.logEvent(Events.MOVE_NOTE, undo.getUndoStep());\n  }\n\n  // Not an undoable function because this is what is used by the undo manager.\n  replaceAllNotes(notes: Note[]) {\n    this.mainSequence.clearNotes();\n    for (const note of notes) {\n      this.mainSequence.addNote(note);\n    }\n  }\n\n  getNotesInRange(positionRange: number[], pitchRange: number[]) {\n    const notesInRange: Note[] = [];\n    for (const note of this.allNotes) {\n      if (NoteSequence.overlaps(note, positionRange, pitchRange)) {\n        notesInRange.push(note);\n      }\n    }\n    return notesInRange;\n  }\n\n  toggleVoiceMute(voiceIndex: number) {\n    if (this.mutedVoices.has(voiceIndex)) {\n      logging.logEvent(Events.UNMUTE_VOICE, voiceIndex);\n      this.mutedVoices.delete(voiceIndex);\n    } else {\n      logging.logEvent(Events.MUTE_VOICE, voiceIndex);\n      this.mutedVoices.add(voiceIndex);\n    }\n  }\n\n  isVoiceMuted(voiceIndex: number) {\n    return this.mutedVoices.has(voiceIndex);\n  }\n}\n\nexport default new Editor();\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport { computed, observable } from 'mobx';\nimport _ from 'lodash';\n\nimport logging, { Events } from './logging';\nimport { Note, SerializedNote } from './note';\nimport { NoteSequence } from './note-sequence';\nimport { editor, generator, masks } from './index';\nimport { IMasks } from './masks';\n\nexport interface UndoStep {\n  notes: SerializedNote[];\n  candidateNotes: SerializedNote[][];\n  selectedCandidateIndex: number;\n  masks: IMasks;\n}\n\nclass Undo {\n  @observable undoStack: UndoStep[] = [];\n  @observable redoStack: UndoStep[] = [];\n\n  private pendingUndoStep: UndoStep | null = null;\n  private undoableNesting: string[] = [];\n  private undoLocked = false;\n\n  @computed get canUndo() {\n    return this.undoStack.length > 0;\n  }\n\n  @computed get canRedo() {\n    return this.redoStack.length > 0;\n  }\n\n  getSerializedNotes() {\n    return editor.mainNotes.map(note => note.serialize());\n  }\n\n  getSerializedCandidateNotes() {\n    return generator.candidateSequences.map(sequence => {\n      return sequence.notes.map(note => note.serialize());\n    });\n  }\n\n  getSerializedMasks() {\n    // Create a copy of the masks to avoid mutation.\n    return masks.userMasks.map(mask => [...mask]) as IMasks;\n  }\n\n  getUndoStep(): UndoStep {\n    return {\n      notes: this.getSerializedNotes(),\n      candidateNotes: this.getSerializedCandidateNotes(),\n      masks: this.getSerializedMasks(),\n      selectedCandidateIndex: generator.selectedCandidateSequenceIndex,\n    };\n  }\n\n  beginUndoable(label: string) {\n    if (this.undoLocked) return;\n    this.undoableNesting.push(label);\n    if (this.pendingUndoStep) {\n      return;\n    }\n    this.pendingUndoStep = this.getUndoStep();\n  }\n\n  completeUndoable(label: string) {\n    if (this.undoLocked) return;\n\n    const topLabel = this.undoableNesting.pop();\n    if (label !== topLabel) {\n      console.error(\n        `Undoables of types ${label}, ${topLabel} completed in incorrect order `\n      );\n    }\n\n    if (this.undoableNesting.length === 0) {\n      this.undoStack.push(this.pendingUndoStep);\n      this.redoStack = [];\n      this.pendingUndoStep = null;\n    }\n  }\n\n  private lockUndo() {\n    this.undoLocked = true;\n  }\n\n  private unlockUndo() {\n    this.undoLocked = false;\n  }\n\n  undo() {\n    if (this.undoStack.length) {\n      this.redoStack.push(this.getUndoStep());\n      const lastStep = this.undoStack.pop();\n      this.rehydrateStep(lastStep);\n      logging.logEvent(Events.UNDO, lastStep);\n    }\n  }\n\n  redo() {\n    if (this.redoStack.length) {\n      this.undoStack.push(this.getUndoStep());\n      const lastStep = this.redoStack.pop();\n      this.rehydrateStep(lastStep);\n      logging.logEvent(Events.REDO, lastStep);\n    }\n  }\n\n  rehydrateStep(step: UndoStep) {\n    this.lockUndo();\n    const deserializedNotes = step.notes.map(note => Note.fromSerialized(note));\n    editor.replaceAllNotes(deserializedNotes);\n\n    const sequences = step.candidateNotes.map(serialized => {\n      const sequence = new NoteSequence(\n        serialized.map(note => Note.fromSerialized(note))\n      );\n      return sequence;\n    });\n    generator.setCandidateSequences(sequences);\n    generator.selectedCandidateSequenceIndex = step.selectedCandidateIndex;\n    masks.setMasks(step.masks);\n    this.unlockUndo();\n  }\n}\n\nconst undo = new Undo();\nexport default undo;\n\nexport function undoable(label: string) {\n  return function(\n    target: any,\n    propertyKey: string,\n    descriptor: PropertyDescriptor\n  ) {\n    const originalMethod = descriptor.value;\n    descriptor.value = function() {\n      undo.beginUndoable(label);\n      originalMethod.apply(this, arguments);\n      undo.completeUndoable(label);\n    };\n    return descriptor;\n  };\n}\n","export { default } from './Typography';","export { default } from './Button';","export { default } from './FormControl';\nexport { default as useFormControl } from './useFormControl';","export { default } from './MenuItem';","export { default } from './Select';","import { computed, observable } from 'mobx';\nimport { Note, SerializedNote } from './note';\nimport { MIN_PITCH, MAX_PITCH } from './constants';\n\nexport class NoteSequence {\n  @observable private _notes: Note[];\n  @computed get notes() {\n    return [...this._notes];\n  }\n\n  constructor(notes: Note[] = []) {\n    this._notes = notes;\n  }\n\n  addNote(note: Note, trimOverlappingVoices = true) {\n    if (trimOverlappingVoices) {\n      this.trimOverlappingVoices(note);\n    }\n    this._notes.push(note);\n  }\n\n  removeNote(note: Note) {\n    this._notes = this._notes.filter(other => other !== note);\n  }\n\n  setNotes(notes: Note[]) {\n    this._notes = notes;\n  }\n\n  clearNotes() {\n    this._notes = [];\n  }\n\n  trimOverlappingVoices(note: Note) {\n    const range = [note.start, note.end];\n    const overlappingNotes = this._notes.filter(\n      otherNote =>\n        otherNote !== note &&\n        otherNote.voice === note.voice &&\n        NoteSequence.overlaps(otherNote, range, [MIN_PITCH, MAX_PITCH])\n    );\n\n    overlappingNotes.forEach(otherNote => {\n      if (otherNote.end > note.end) {\n        otherNote.moveStart(note.end);\n      } else {\n        this.removeNote(otherNote);\n      }\n    });\n  }\n\n  isEmpty() {\n    return this.notes.length === 0;\n  }\n\n  static overlaps(note: Note, positionRange: number[], pitchRange: number[]) {\n    const { pitch: pitch, position, duration } = note;\n    const [startPosition, endPosition] = positionRange;\n    const [startPitch, endPitch] = pitchRange;\n\n    if (pitch < startPitch || pitch > endPitch) {\n      return false;\n    } else if (position >= startPosition && position < endPosition) {\n      return true;\n    } else if (\n      position < startPosition &&\n      position + duration > startPosition\n    ) {\n      return true;\n    }\n\n    return false;\n  }\n\n  static mergeConsecutiveNotes(inputNotes: Note[]) {\n    const notesPerVoice = new Map<number, Note[]>();\n    for (const note of inputNotes) {\n      const notes = notesPerVoice.get(note.voice) || [];\n      notes.push(note);\n      notesPerVoice.set(note.voice, notes);\n    }\n\n    for (const [voice, notes] of notesPerVoice.entries()) {\n      notes.sort((a, b) => a.position - b.position);\n      const joinedNotes: Note[] = [];\n      let joiningNote: Note | null = null;\n\n      for (let i = 0; i < notes.length; i++) {\n        if (joiningNote === null) joiningNote = notes[i];\n        const { end, pitch, duration, position, source, voice } = joiningNote;\n        const nextNote = notes[i + 1];\n        if (nextNote && end === nextNote.start && pitch === nextNote.pitch) {\n          const newDuration = duration + nextNote.duration;\n          joiningNote = new Note(pitch, position, newDuration, source, voice);\n        } else {\n          joinedNotes.push(joiningNote);\n          joiningNote = null;\n        }\n      }\n      notesPerVoice.set(voice, joinedNotes);\n    }\n\n    const flattened: Note[] = [];\n    for (const notes of notesPerVoice.values()) {\n      flattened.push(...notes);\n    }\n    return new NoteSequence(flattened);\n  }\n\n  static removeOverlappingNotes(noteSequence: NoteSequence) {\n    // An extremely naiive n^2 solution for removing note overlap, but it only\n    // takes a ms or so so no big deal...\n    const nextNotes = noteSequence.notes.filter(note => {\n      for (const otherNote of noteSequence.notes) {\n        const positionRange = [otherNote.start, otherNote.end];\n        const pitchRange = [otherNote.pitch, otherNote.pitch];\n        if (\n          otherNote !== note &&\n          NoteSequence.overlaps(note, positionRange, pitchRange)\n        ) {\n          return false;\n        }\n      }\n      return true;\n    });\n    return new NoteSequence(nextNotes);\n  }\n\n  static empty() {\n    return new NoteSequence();\n  }\n}\n\nexport interface SerializedNoteSequence {\n  notes: SerializedNote[];\n}\n","module.exports = (__webpack_require__(1))(170);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar blue = {\n  50: '#e3f2fd',\n  100: '#bbdefb',\n  200: '#90caf9',\n  300: '#64b5f6',\n  400: '#42a5f5',\n  500: '#2196f3',\n  600: '#1e88e5',\n  700: '#1976d2',\n  800: '#1565c0',\n  900: '#0d47a1',\n  A100: '#82b1ff',\n  A200: '#448aff',\n  A400: '#2979ff',\n  A700: '#2962ff'\n};\nvar _default = blue;\nexports.default = _default;","module.exports = (__webpack_require__(1))(3);","module.exports = (__webpack_require__(1))(5792);","module.exports = (__webpack_require__(1))(5595);","module.exports = (__webpack_require__(1))(33);","module.exports = (__webpack_require__(1))(5801);","module.exports = (__webpack_require__(1))(5561);","module.exports = (__webpack_require__(1))(47);","export { default } from './FormHelperText';","module.exports = (__webpack_require__(1))(5563);","module.exports = (__webpack_require__(1))(5574);","module.exports = (__webpack_require__(1))(206);","module.exports = (__webpack_require__(1))(5872);","module.exports = (__webpack_require__(1))(5874);","module.exports = (__webpack_require__(1))(5862);","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport * as firebase from 'firebase';\nimport { LogEvent } from './logging';\n\nconst firebaseConfig = {\n  apiKey: process.env.FIREBASE_API_KEY,\n  databaseURL: process.env.FIREBASE_DATA_URL,\n  projectId: process.env.FIREBASE_PROJECT_ID,\n  messagingSenderId: process.env.FIREBASE_SENDER_ID,\n  appId: process.env.FIREBASE_APP_ID,\n};\n\nclass APIManager {\n  app: firebase.app.App;\n  isFirebaseInitialized = false;\n\n  constructor() {\n    try {\n      this.app = firebase.initializeApp(firebaseConfig);\n      this.isFirebaseInitialized = true;\n    } catch (err) {\n      console.log('Firebase not initialized with config:', firebaseConfig);\n    }\n  }\n\n  writeLogEvent(sessionId: string, logEvent: LogEvent) {\n    if (!this.isFirebaseInitialized) {\n      return;\n    }\n\n    firebase\n      .database()\n      .ref(`logs/${sessionId}/${logEvent.timestamp}`)\n      .set(logEvent);\n  }\n}\n\nexport default new APIManager();\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport * as tonal from 'tonal';\nimport {\n  BOTTOM_A,\n  MIN_PITCH,\n  MAX_PITCH,\n  MODE_NAMES,\n  KEY_NAMES,\n} from './constants';\nimport { range } from 'lodash';\nimport { ScaleValue } from './editor';\n\nexport function getNoteDetails(noteValue: number) {\n  const noteText = tonal.Note.fromMidi(noteValue);\n  const letter = noteText[0];\n  const accidental = noteText.length > 2 ? noteText[1] : '';\n  const octave = Number(noteText[noteText.length - 1]);\n\n  return { letter, accidental, octave };\n}\n\nconst RAW_NOTE_NAMES = 'ABCDEFG';\nconst { octave: BOTTOM_A_OCTAVE } = getNoteDetails(BOTTOM_A);\n\nexport function getStaffLineNumber(name: string, octave: number) {\n  const deltaOctave = octave - BOTTOM_A_OCTAVE;\n  const deltaNote = RAW_NOTE_NAMES.indexOf(name) - RAW_NOTE_NAMES.indexOf('A');\n\n  return deltaOctave * 7 + deltaNote;\n}\n\nexport function getNoteDetailsFromLine(lineDivision: number) {\n  const name = RAW_NOTE_NAMES[lineDivision % 7];\n  const octave = Math.floor(lineDivision / 7) + BOTTOM_A_OCTAVE;\n  return { name, octave };\n}\n\nexport function makeNoteScale(max = MAX_PITCH, min = MIN_PITCH): ScaleValue[] {\n  return range(max, min - 1 /* inclusive */).map(pitch => {\n    const { letter, accidental, octave } = getNoteDetails(pitch);\n    return {\n      pitch,\n      name: `${letter}${accidental}`,\n      octave,\n    };\n  });\n}\n\nexport function makeNoteScaleForKey(key: string, mode: string): ScaleValue[] {\n  const noteNames = tonal.Scale.notes(key, mode);\n  const simplified = noteNames.map(noteName => tonal.Note.simplify(noteName));\n  const scaleNotes = new Set<string>(simplified);\n\n  const scale = makeNoteScale(MAX_PITCH, MIN_PITCH);\n  return scale.filter(note => {\n    const { pitch } = note;\n    const { accidental, letter } = getNoteDetails(pitch);\n    const name = `${letter}${accidental}`;\n    const alternate = tonal.Note.enharmonic(name);\n    return scaleNotes.has(name) || scaleNotes.has(alternate);\n  });\n}\n\nconst CHORD_MODES = new Set<string>(['M', 'm', 'dim', 'aug']);\n\n// source:\n// https://en.wikipedia.org/wiki/Roman_numeral_analysis#/media/File:Roman_numeral_analysis_major,_natural_minor,_harmonic_minor,_melodic_minor.png\nconst TRIAD_QUALITIES = {\n  major: ['M', 'm', 'm', 'M', 'M', 'm', 'm'],\n  minor: ['m', 'dim', 'M', 'm', 'm', 'M', 'M'],\n  'harmonic minor': ['m', 'dim', 'aug', 'm', 'M', 'M', 'dim'],\n};\n\nexport function makeNotesTriadForKey(key: string, mode: string): ScaleValue[] {\n  if (!CHORD_MODES.has(mode)) {\n    console.error(\n      `Violated contract for makeNotesTriadForKey; (mode = ${mode}) is not one of ${JSON.stringify(\n        CHORD_MODES\n      )}`\n    );\n    return;\n  }\n\n  const noteNames = tonal.Chord.notes(key, mode);\n  const simplified = noteNames.map(noteName => tonal.Note.simplify(noteName));\n  const chordNotes = new Set<string>(simplified);\n\n  const scale = makeNoteScale(MIN_PITCH, MAX_PITCH);\n  return scale.filter(note => {\n    const { pitch } = note;\n    const { accidental, letter } = getNoteDetails(pitch);\n    const name = `${letter}${accidental}`;\n    const alternate = tonal.Note.enharmonic(name);\n    return chordNotes.has(name) || chordNotes.has(alternate);\n  });\n}\n\ninterface TriadValue {\n  key: string;\n  quality: string;\n}\n\nexport function getTriadsForKey(key: string, mode: string): TriadValue[] {\n  if (!MODE_NAMES.includes(mode)) {\n    console.error(\n      `Violated contract for getTriadsForKey; (mode = ${mode}) is not one of ${JSON.stringify(\n        CHORD_MODES\n      )}`\n    );\n    return;\n  }\n  const scaleNotes = tonal.Scale.notes(key, mode);\n  return scaleNotes.map((noteName, i) => {\n    // zip together note key names and the qualities\n    return {\n      key: noteName,\n      quality: TRIAD_QUALITIES[mode][i],\n    };\n  });\n}\n\nexport function getHappyTriadsForKey(key: string, mode: string): TriadValue[] {\n  const triads = getTriadsForKey(key, mode);\n  return triads.filter(triad => {\n    return triad.quality === 'M';\n  });\n}\n\nexport function getSadTriadsForKey(key: string, mode: string): TriadValue[] {\n  const triads = getTriadsForKey(key, mode);\n  return triads.filter(triad => {\n    // TODO: could semantically separate m, aug, dim\n    return triad.quality !== 'M';\n  });\n}\n\nexport function getAllHappyTriads(): TriadValue[] {\n  return KEY_NAMES.map(keyName => {\n    return {\n      key: keyName,\n      quality: 'M',\n    };\n  });\n}\n\nexport function getAllSadTriads(): TriadValue[] {\n  const nonMajorQualities = ['m', 'aug', 'dim'];\n  const triads: TriadValue[] = [];\n  KEY_NAMES.forEach(keyName => {\n    nonMajorQualities.forEach(quality => {\n      triads.push({ key: keyName, quality: quality });\n    });\n  });\n  return triads;\n}\n","module.exports = (__webpack_require__(1))(261);","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\nimport { computed, observable, toJS } from 'mobx';\nimport * as mm from '@magenta/music';\n\nimport featureFlags from './feature-flags';\nimport logging, { Events } from './logging';\nimport { Note } from './note';\nimport { NoteSequence } from './note-sequence';\nimport { editor, masks, player } from '../core';\nimport { Coconet } from './coconet';\nimport { fromMagentaSequence, getMagentaNoteSequence } from './magenta-utils';\nimport { MODEL_URL, DifferenceFromOriginal, Mood } from './constants';\nimport undo, { undoable } from '../core/undo';\n\ninterface InfillMask {\n  step: number;\n  voice: number;\n}\n\nexport class Generator {\n  model = new Coconet(MODEL_URL);\n  @observable isWorking = false;\n  @observable isModelLoaded = true;\n\n  @observable private _nSequencesToGenerate = featureFlags.baseline ? 1 : 3;\n  @computed get nSequencesToGenerate() {\n    return this._nSequencesToGenerate;\n  }\n  setNSequencesToGenerate(nSequences: number) {\n    logging.logEvent(Events.SET_N_SAMPLES_TO_GENERATE, nSequences);\n    this._nSequencesToGenerate = nSequences;\n  }\n\n  @observable private _conventionalSurprising = 0;\n  @computed get conventionalSurprising() {\n    return this._conventionalSurprising;\n  }\n  setConventionalSurprising(value: number) {\n    this._conventionalSurprising = value;\n  }\n\n  @observable private _majorMinor = 0;\n  @computed get majorMinor() {\n    return this._majorMinor;\n  }\n  setMajorMinor(value: number) {\n    this._majorMinor = value;\n  }\n\n  @observable private _differenceFromOriginal =\n    DifferenceFromOriginal.SomewhatDifferent;\n  @computed get differenceFromOriginal() {\n    return this._differenceFromOriginal;\n  }\n  setDifferenceFromOriginal(value: number) {\n    this._differenceFromOriginal = value;\n  }\n\n  @observable candidateSequences: NoteSequence[] = [];\n  @observable selectedCandidateSequenceIndex: number | null = null;\n\n  @computed get selectedCandidateSequence(): NoteSequence | null {\n    const index = this.selectedCandidateSequenceIndex;\n    if (index === null || this.candidateSequences.length === 0) return null;\n    return this.candidateSequences[index] || null;\n  }\n\n  constructor() {\n    this.loadModel();\n  }\n\n  async loadModel() {\n    await this.model.initialize();\n    this.isModelLoaded = true;\n  }\n\n  addNoteToSelected(note: Note) {\n    const sequence = this.selectedCandidateSequence;\n    if (sequence) {\n      sequence.addNote(note);\n    }\n  }\n\n  removeNoteFromSelected(note: Note) {\n    const sequence = this.selectedCandidateSequence;\n    if (sequence) {\n      sequence.removeNote(note);\n    }\n  }\n\n  setSelectedCandidateSequence(sequence: NoteSequence) {\n    const index = this.selectedCandidateSequenceIndex;\n    this.candidateSequences[index] = sequence;\n  }\n\n  setCandidateSequences = (sequences: NoteSequence[]) => {\n    this.candidateSequences = sequences;\n  };\n\n  getEmptySequence = () => {\n    return [];\n  };\n\n  selectCandidateSequence = (index: number | null, shouldLog = true) => {\n    if (shouldLog) logging.logEvent(Events.SELECT_CANDIDATE_SEQUENCE, index);\n    this.selectedCandidateSequenceIndex = index;\n\n    // Try restarting the player with the new sequence added.\n    if (player.isPlaying) {\n      player.restart();\n    }\n  };\n\n  @undoable('generator.commitSelectedCandidateSequence')\n  commitSelectedCandidateSequence(clearMasks = true, shouldLog = true) {\n    if (shouldLog) {\n      logging.logEvent(Events.CHOOSE_CANDIDATE_SEQUENCE, undo.getUndoStep());\n    }\n    // Add the selected sequence\n    const sequence = this.selectedCandidateSequence;\n    if (sequence) {\n      editor.addGeneratedSequence(sequence);\n      if (clearMasks) masks.clearMasks();\n    }\n\n    // Then, clear the sequences\n    this.clearCandidateSequences(false /** shouldLog */);\n  }\n\n  addBackOriginalSequence = () => {\n    // Add back the original sequence\n    editor.addGeneratedSequence(this.candidateSequences[0]);\n\n    // Then, clear the sequences\n    this.clearCandidateSequences();\n  };\n\n  clearCandidateSequences = (shouldLog = true) => {\n    if (shouldLog) logging.logEvent(Events.CLEAR_CANDIDATE_SEQUENCES);\n    this.selectedCandidateSequenceIndex = null;\n    this.candidateSequences = [];\n  };\n\n  getInfillMask(): InfillMask[] | undefined {\n    const infillMask = [];\n    masks.generationMasks.forEach((mask, voice) => {\n      mask.forEach(maskIndex => {\n        infillMask.push({ voice, step: maskIndex });\n      });\n    });\n    if (infillMask.length === 0) return undefined;\n    return infillMask.sort((a, b) => {\n      if (a.voice === b.voice) return a.step - b.step;\n      return a.voice - b.voice;\n    });\n  }\n\n  computeTemperature(conventionalSurprising: number) {\n    // 0.5 = 1/2 = 2^(-1) is midpoint\n    // 0.125 = 1/8 = 2^(-3) is min\n    // 2 = 2^(1) is max\n    return 2 ** conventionalSurprising;\n  }\n\n  binHappySad(happySad: number) {\n    if (happySad < -0.33) {\n      return Mood.SAD;\n    } else if (happySad < 0.33) {\n      return Mood.NEUTRAL;\n    } else {\n      return Mood.HAPPY;\n    }\n  }\n\n  private prepareForHarmonization() {\n    // First, commit any selected candidate sequence before beginning harmonization\n    if (this.candidateSequences.length) {\n      const clearMasks = false;\n      const shouldLog = false;\n      this.commitSelectedCandidateSequence(clearMasks, shouldLog);\n    }\n\n    // If we're working from an implicit mask, promote that mask to the\n    // _userMasks in order to properly handle note highlighting\n    if (featureFlags.baseline && masks.doImplicitMasksExist) {\n      masks.addImplicitMasksToUserMasks();\n    }\n  }\n\n  private getSimilarDifferentConfig() {\n    const { differenceFromOriginal } = this;\n\n    // Check to see if the selected value is less than the cap values for\n    // similarity\n    if (differenceFromOriginal < DifferenceFromOriginal.Similar) {\n      return {\n        discourageNotes: false,\n        nudgeFactor: 2, // 2 translates to a 1:12 ratio\n      };\n    } else if (\n      differenceFromOriginal < DifferenceFromOriginal.SomewhatDifferent\n    ) {\n      return {\n        discourageNotes: false,\n        nudgeFactor: 1, // 1 translates to a 1:3 ratio\n      };\n    } else if (differenceFromOriginal < DifferenceFromOriginal.Different) {\n      return {\n        discourageNotes: true,\n        nudgeFactor: 1,\n      };\n    } else if (differenceFromOriginal <= DifferenceFromOriginal.VeryDifferent) {\n      return {\n        discourageNotes: true,\n        nudgeFactor: 2,\n      };\n    } else {\n      return {\n        discourageNotes: true,\n        nudgeFactor: 2,\n      };\n    }\n  }\n\n  private getMoodConfig() {\n    const { majorMinor: happySad } = this;\n    const happyNeutralSad = this.binHappySad(happySad);\n\n    let moodConfig;\n    if (happyNeutralSad !== Mood.NEUTRAL) {\n      moodConfig = {\n        key: editor.key,\n        mode: editor.mode,\n        happy: happyNeutralSad === Mood.HAPPY,\n      };\n    }\n    return moodConfig;\n  }\n\n  async generate() {\n    undo.beginUndoable('generator.generate');\n\n    this.prepareForHarmonization();\n    this.isWorking = true;\n\n    // Allow the UX to respond before computing so heavily!\n    await delay(200);\n\n    if (player.isPlaying) {\n      player.stop();\n    }\n\n    const { conventionalSurprising, nSequencesToGenerate } = this;\n    const temperature = this.computeTemperature(conventionalSurprising);\n    const similarDifferentConfig = this.getSimilarDifferentConfig();\n    const moodConfig = this.getMoodConfig();\n\n    logging.logEvent(Events.START_GENERATE, {\n      conventionalSurprising,\n      nSequencesToGenerate,\n      differenceFromOriginal: this.differenceFromOriginal,\n      majorMinor: this.majorMinor,\n      masks: masks.generationMasks,\n    });\n\n    const outputNotes: Note[][] = [];\n    for (let i = 0; i < nSequencesToGenerate; i++) {\n      const inputNotes = [...editor.allNotes];\n      const sequence = getMagentaNoteSequence(\n        inputNotes,\n        player.bpm,\n        editor.totalSixteenths\n      );\n      const infillMask = this.getInfillMask();\n      const results = await this.model.infill(sequence, {\n        temperature,\n        infillMask,\n        similarDifferentConfig,\n        moodConfig,\n      });\n\n      const output = fromMagentaSequence(results);\n      // Now, we need to remove the notes that have been returned that weren't\n      // masked\n      const generationMasks = masks.generationMasks;\n      const maskIndices = new Set<string>();\n      generationMasks.forEach((mask, voice) => {\n        mask.forEach(index => maskIndices.add(`${voice}:${index}`));\n      });\n      const masked = output.filter(note => {\n        const key = `${note.voice}:${note.position}`;\n        return maskIndices.has(key);\n      });\n\n      // Unfortunately, the magenta util doesn't merge notes that touch on a\n      // measure boundary, so we'll have to do it ourselves...\n      const joined = NoteSequence.mergeConsecutiveNotes(masked);\n\n      // Also, remove notes that overlap with other generated notes.\n      const filtered = NoteSequence.removeOverlappingNotes(joined);\n      outputNotes.push(filtered.notes);\n    }\n\n    // Now, set the first candidate sequence to be the original, masked sequence\n    const maskedNotes = masks.maskedNotes;\n    editor.removeNotes(maskedNotes);\n    const noteSequences = [maskedNotes, ...outputNotes].map(notes => {\n      return new NoteSequence(notes);\n    });\n\n    logging.logEvent(Events.GENERATE, undo.getUndoStep());\n\n    this.setCandidateSequences(noteSequences);\n    // Select the first, non-masked sequence\n    this.selectCandidateSequence(1, false /** shouldLog */);\n\n    if (featureFlags.baseline) {\n      const generationMasks = toJS(masks.generationMasks);\n      const clearMasks = true;\n      const shouldLog = false;\n      this.commitSelectedCandidateSequence(clearMasks, shouldLog);\n      masks.setMasks(generationMasks);\n    }\n\n    this.isWorking = false;\n    undo.completeUndoable('generator.generate');\n  }\n}\n\nexport default new Generator();\n\nfunction delay(ms = 1) {\n  return new Promise(resolve => setTimeout(() => resolve(), ms));\n}\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nexport function getDateString() {\n  const now = new Date();\n  const year = now.getFullYear();\n  const month = now.getMonth();\n  const day = now.getDate();\n  const hour = now.getHours();\n  const minute = now.getMinutes();\n  const second = now.getSeconds();\n  return `${year}-${month}-${day}_${hour}:${minute}:${second}`;\n}\n","module.exports = (__webpack_require__(1))(2);","/**\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The different verbosity levels.\n */\nexport const enum Level {\n  NONE = 0, // No messages will be logged.\n  WARN = 5, // WARN messages will be logged.\n  INFO = 10, // INFO and WARN messages will be logged.\n  DEBUG = 20, // DEBUG, INFO, and WARN messages will be logged.\n}\n\n/**\n * The global verbosity level for Magenta.js.\n */\nexport let verbosity: Level = Level.INFO;\n\n/**\n * Logs a message at the given verbosity level.\n *\n * If `level` is below the global `verbosity` level, the message is ignored.\n *\n * @param msg The message to log.\n * @param prefix The prefix of the message, should specify the model or library\n * that is doing the logging.\n * @param level The verbosity level of the message. The message will not be\n * logged if this level is greater than the `verbosity` setting.\n */\nexport function log(msg: string, prefix = 'Magenta.js', level = Level.INFO) {\n  if (level === Level.NONE) {\n    throw Error('Logging level cannot be NONE.');\n  }\n  if (verbosity >= level) {\n    const logMethod = level === Level.WARN ? console.warn : console.log;\n    logMethod(`%c ${prefix} `, 'background:magenta; color:white', msg);\n  }\n}\n\n/**\n * Logs a message at the given verbosity level, with the duration.\n *\n * If `level` is below the global `verbosity` level, the message is ignored.\n *\n * @param msg The message to log.\n * @param startTime The start time to use for duration calculation, in ms.\n * @param prefix The prefix of the message, should specify the model or library\n * that is doing the logging.\n * @param level The verbosity level of the message. The message will not be\n * logged if this level is greater than the `verbosity` setting.\n */\nexport function logWithDuration(\n  msg: string,\n  startTime: number,\n  prefix = 'Magenta.js',\n  level = Level.INFO\n) {\n  const durationSeconds = (performance.now() - startTime) / 1000;\n  log(`${msg} in ${durationSeconds.toPrecision(3)}s`, prefix, level);\n}\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport * as mm from '@magenta/music';\nimport { Note, Source } from './note';\n\n/**\n * NOTE: duplicate of trim wrapper function in magent.music.sequences\n *\n * Trim notes from a NoteSequence to lie within a specified time range.\n * Notes starting before `start` are not included. Notes ending after\n * `end` are not included, unless `truncateEndNotes` is true.\n * @param ns The NoteSequence for which to trim notes.\n * @param start The time after which all notes should begin. This should be\n * either seconds (if ns is unquantized), or a quantized step (if ns is\n * quantized).\n * @param end The time before which all notes should end. This should be\n * either seconds (if ns is unquantized), or a quantized step (if ns is\n * quantized).\n * @param truncateEndNotes Optional. If true, then notes starting before\n * the end time but ending after it will be included and truncated.\n * @returns A new NoteSequence with all notes trimmed to lie between `start`\n * and `end`, and time-shifted to begin at 0.\n */\nexport function trim(\n  ns: mm.INoteSequence,\n  start: number,\n  end: number,\n  truncateEndNotes?: boolean\n) {\n  return mm.sequences.isQuantizedSequence(ns)\n    ? trimHelper(\n        ns,\n        start,\n        end,\n        'totalQuantizedSteps',\n        'quantizedStartStep',\n        'quantizedEndStep',\n        truncateEndNotes\n      )\n    : trimHelper(\n        ns,\n        start,\n        end,\n        'totalTime',\n        'startTime',\n        'endTime',\n        truncateEndNotes\n      );\n}\n\n// CHANGELOG from magenta/music/sequences.ts:\n// (1) notes filtered to when note[startKey] < end (exclusive instead of inclusive).\n// This correctly excludes notes that would have started on the end limit\nfunction trimHelper(\n  ns: mm.INoteSequence,\n  start: number,\n  end: number,\n  totalKey: 'totalQuantizedSteps' | 'totalTime',\n  startKey: 'startTime' | 'quantizedStartStep',\n  endKey: 'endTime' | 'quantizedEndStep',\n  truncateEndNotes?: boolean\n) {\n  const result = mm.sequences.clone(ns);\n  result[totalKey] = end;\n  //\n  result.notes = result.notes.filter(\n    n =>\n      n[startKey] >= start &&\n      n[startKey] < end &&\n      (truncateEndNotes || n[endKey] <= end)\n  );\n\n  // Shift the sequence to start at 0.\n  for (let i = 0; i < result.notes.length; i++) {\n    result.notes[i][startKey] -= start;\n    result.notes[i][endKey] -= start;\n\n    if (truncateEndNotes) {\n      result.notes[i][endKey] = Math.min(result.notes[i][endKey], end);\n    }\n  }\n  result[totalKey] = Math.min(ns[totalKey] - start, end);\n  return result;\n}\n\nexport function fromMagentaSequence(\n  sequence: mm.NoteSequence,\n  source = Source.AGENT\n): Note[] {\n  return sequence.notes.map(item => {\n    const position = item.quantizedStartStep;\n    const duration = item.quantizedEndStep - item.quantizedStartStep;\n    const voice = item.instrument;\n    const note = new Note(item.pitch, position, duration, source, voice);\n    return note;\n  });\n}\n\nexport function getMagentaNoteSequence(\n  notes: Note[],\n  bpm: number,\n  totalSixteenths: number,\n  merge = false\n) {\n  const noteSequence = {\n    notes: notes.map(note => note.magentaNote),\n    tempos: [{ time: 0, qpm: bpm }],\n    totalQuantizedSteps: totalSixteenths,\n    quantizationInfo: { stepsPerQuarter: 4 },\n  };\n  return merge\n    ? mm.sequences.mergeConsecutiveNotes(noteSequence)\n    : mm.sequences.clone(noteSequence);\n}\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport { computed, observable } from 'mobx';\nimport * as _ from 'lodash';\n\nimport editor from './editor';\nimport featureFlags from './feature-flags';\nimport { Note } from './note';\nimport { TOTAL_SIXTEENTHS } from './constants';\nimport { undoable } from './undo';\nimport { player } from '../core';\n\nexport class EditorMaskRegion {\n  constructor(\n    public topLeftValue: number,\n    public topLeftPosition: number,\n    public bottomRightValue: number,\n    public bottomRightPosition: number\n  ) {}\n}\n\nexport type IMask = number[];\nexport type IMasks = [IMask, IMask, IMask, IMask];\n\nclass Masks {\n  // Masks are maintained as an array of masked sixteenth notes, one per voice.\n  @observable private _userMasks: IMasks = this.emptyMasks();\n\n  @computed private get _implicitMasks() {\n    return featureFlags.baseline\n      ? this.computeMasksFromEmptyRegions()\n      : this.emptyMasks();\n  }\n\n  // We're going to constrain our bounds to the loop start / end\n  @computed get userMasks() {\n    return this._userMasks;\n  }\n\n  @computed get implicitMasks() {\n    return this._implicitMasks;\n  }\n\n  @computed private get userOrImplicitMasks() {\n    // When in baseline mode, we want to infill all voices that are either\n    // masked or empty.\n    if (featureFlags.baseline) {\n      return this.doUserMasksExist ? this._userMasks : this._implicitMasks;\n    } else {\n      return this._userMasks;\n    }\n  }\n\n  // The masks that will be used to generate, which are constrained by the loop\n  // bounds - but only when not in baseline mode.\n  @computed get generationMasks(): IMasks {\n    if (featureFlags.baseline) {\n      return this.userOrImplicitMasks;\n    } else {\n      return this.constrainToLoopBounds(this.userOrImplicitMasks);\n    }\n  }\n\n  private constrainToLoopBounds(masks: IMasks): IMasks {\n    const { loopStart, loopEnd } = player;\n    return masks.map(mask => {\n      return mask.filter(value => value >= loopStart && value < loopEnd);\n    }) as IMasks;\n  }\n\n  emptyMasks(): IMasks {\n    return [[], [], [], []];\n  }\n\n  private getPositionsPerVoice(notes: Note[]) {\n    const notePositions = _.range(4).map(() => new Set<number>());\n    notes.forEach(note => {\n      const positions = _.range(note.start, note.end);\n      positions.forEach(position => notePositions[note.voice].add(position));\n    });\n    return notePositions;\n  }\n\n  private computeMasksFromEmptyRegions(): IMasks {\n    const notePositions = this.getPositionsPerVoice(editor.allNotes);\n    const _masks = _.range(4).map(voice => {\n      return _.range(TOTAL_SIXTEENTHS).filter(\n        position => !notePositions[voice].has(position)\n      );\n    }) as IMasks;\n    return _masks;\n  }\n\n  @undoable('masks.maskNotes')\n  maskNotes(notesInMask: Note[], replaceMask = true) {\n    const notePositions = this.getPositionsPerVoice(notesInMask);\n    notePositions.forEach((positions, voice) => {\n      if (replaceMask) {\n        this.setMask(voice, [...positions.values()]);\n      } else {\n        this.addMask(voice, [...positions.values()]);\n      }\n    });\n  }\n\n  @undoable('masks.setMask')\n  setMask(voiceIndex: number, mask: IMask) {\n    this._setMask(voiceIndex, mask);\n  }\n\n  _setMask(voiceIndex: number, mask: IMask) {\n    this._userMasks[voiceIndex] = [...mask];\n  }\n\n  @undoable('masks.setMasks')\n  setMasks(masks: IMasks) {\n    this._userMasks = masks;\n  }\n\n  addMask(voiceIndex: number, mask: number[]) {\n    const maskSet = new Set<number>(this._userMasks[voiceIndex]);\n    mask.forEach(maskIndex => maskSet.add(maskIndex));\n    this._userMasks[voiceIndex] = [...maskSet.values()].sort((a, b) => a - b);\n  }\n\n  removeMask(voiceIndex: number, mask: number[]) {\n    const maskSet = new Set<number>(this._userMasks[voiceIndex]);\n    mask.forEach(maskIndex => maskSet.delete(maskIndex));\n    this._userMasks[voiceIndex] = [...maskSet.values()].sort((a, b) => a - b);\n  }\n\n  clearMasks() {\n    this._userMasks = this.emptyMasks();\n  }\n\n  isNoteMasked(note: Note) {\n    const { voice, start, end } = note;\n    const mask = this.userOrImplicitMasks[voice];\n\n    for (let maskIndex of mask) {\n      if (maskIndex >= start && maskIndex < end) return true;\n    }\n    return false;\n  }\n\n  @computed get maskedNotes() {\n    const notes = editor.allNotes;\n    const maskedNotes: Note[] = [];\n\n    for (const note of notes) {\n      if (this.isNoteMasked(note)) maskedNotes.push(note);\n    }\n\n    return maskedNotes;\n  }\n\n  @computed get nonMaskedNotes() {\n    return editor.allNotes.filter(note => !this.isNoteMasked(note));\n  }\n\n  addImplicitMasksToUserMasks() {\n    this._implicitMasks.forEach((mask, voice) => {\n      this.addMask(voice, mask);\n    });\n  }\n\n  removeImplicitMasksFromUserMasks() {\n    this._implicitMasks.forEach((mask, voice) => {\n      this.removeMask(voice, mask);\n    });\n  }\n\n  @computed get doUserMasksExist() {\n    return _.some(this._userMasks, mask => mask.length > 0);\n  }\n\n  @computed get doImplicitMasksExist() {\n    return _.some(this._implicitMasks, mask => mask.length > 0);\n  }\n\n  @computed get doAnyMasksExist() {\n    return this.doUserMasksExist || this.doImplicitMasksExist;\n  }\n}\n\nexport default new Masks();\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport * as mm from '@magenta/music';\nimport { observable } from 'mobx';\nimport logging, { Events } from './logging';\nimport { Note } from './note';\nimport { editor } from './index';\nimport { range } from 'lodash';\nimport * as Tone from 'tone';\nimport { trim, getMagentaNoteSequence } from './magenta-utils';\n\nimport {\n  DEFAULT_BPM,\n  MIN_PITCH,\n  MAX_PITCH,\n  NOTE_VELOCITY,\n  SOUNDFONT_URL,\n  TOTAL_SIXTEENTHS,\n} from './constants';\n\nexport class CallbackObject extends mm.BasePlayerCallback {\n  constructor(private player: Player) {\n    super();\n  }\n\n  run(note: mm.NoteSequence.INote, t: number) {\n    const { pitch, quantizedStartStep } = note;\n\n    // this offsets the position by loopStart, so that the notes correspond to the notes in the notesMap\n    // which allows the notes to be highlighted red for playing\n    editor.setNotePlaying(pitch, quantizedStartStep + this.player.loopStart);\n  }\n  stop() {\n    if (this.player.shouldLoop) {\n      this.player.loop();\n    } else {\n      this.player.stop();\n    }\n  }\n}\n\nclass Player {\n  playerCallbackObject = new CallbackObject(this);\n  @observable isPlayerLoaded = false;\n  @observable isPlaying = false;\n\n  @observable shouldLoop = true;\n\n  @observable loopStart = 0;\n  @observable loopEnd = TOTAL_SIXTEENTHS;\n\n  private player = new mm.SoundFontPlayer(\n    SOUNDFONT_URL,\n    Tone.master,\n    undefined,\n    undefined,\n    this.playerCallbackObject\n  );\n\n  @observable bpm = DEFAULT_BPM;\n\n  constructor() {\n    this.loadPlayer();\n  }\n\n  async loadPlayer() {\n    const allNotes: mm.NoteSequence.INote[] = range(\n      MIN_PITCH,\n      MAX_PITCH + 1\n    ).map(pitch => ({\n      pitch,\n      velocity: NOTE_VELOCITY,\n    }));\n    const allNotesSeq = { notes: allNotes };\n    await this.player.loadSamples(allNotesSeq);\n    this.isPlayerLoaded = true;\n  }\n\n  togglePlay() {\n    if (editor.allNotes.length === 0) return;\n\n    if (this.isPlaying) {\n      this.stop();\n    } else {\n      this.start();\n    }\n  }\n\n  playNote(note: Note) {\n    if (this.isPlayerLoaded) {\n      this.playNoteDown(note);\n      const timePerSixteenth = (((1 / this.bpm) * 60) / 4) * 1000;\n      const delay = note.duration * timePerSixteenth;\n      setTimeout(() => this.playNoteUp(note), delay);\n    }\n  }\n\n  playNoteDown(note: Note) {\n    if (this.isPlayerLoaded) {\n      editor.setActiveNoteValue(note.pitch);\n      this.player.playNoteDown(note.magentaNote);\n    }\n  }\n\n  playNoteUp(note: Note) {\n    if (this.isPlayerLoaded) {\n      editor.setActiveNoteValue(null);\n      this.player.playNoteUp(note.magentaNote);\n    }\n  }\n\n  // Logged play method\n  start() {\n    logging.logEvent(Events.PLAY);\n    this._start();\n  }\n\n  private _start() {\n    if (this.isPlayerLoaded) {\n      if (editor.allNotes.length === 0) {\n        return;\n      }\n\n      const sequence = getMagentaNoteSequence(\n        editor.unmutedNotes,\n        this.bpm,\n        editor.totalSixteenths\n      );\n      const loopSequence = trim(sequence, this.loopStart, this.loopEnd, true);\n\n      // trim can give a note that has quantizedStartStep == quantizedEndStep\n      // when on border of trim region.\n      loopSequence.notes = loopSequence.notes.filter(note => {\n        return note.quantizedStartStep !== note.quantizedEndStep;\n      });\n\n      this.player.start(loopSequence);\n      this.isPlaying = true;\n    }\n  }\n\n  loop() {\n    editor.clearPlayingNotes();\n    this.start();\n  }\n\n  // Logged stop method\n  stop() {\n    logging.logEvent(Events.STOP);\n    this._stop();\n  }\n\n  private _stop() {\n    this.player.stop();\n    this.isPlaying = false;\n    editor.clearPlayingNotes();\n  }\n\n  restart() {\n    this._stop();\n    this._start();\n  }\n}\n\nexport default new Player();\n","export * from './colorManipulator';\nexport { default as createMuiTheme } from './createMuiTheme';\nexport { default as createStyles } from './createStyles';\nexport { default as makeStyles } from './makeStyles';\nexport { default as MuiThemeProvider } from './MuiThemeProvider';\nexport { default as responsiveFontSizes } from './responsiveFontSizes';\nexport { default as styled } from './styled';\nexport * from './transitions';\nexport { default as useTheme } from './useTheme';\nexport { default as withStyles } from './withStyles';\nexport { default as withTheme } from './withTheme';","module.exports = (__webpack_require__(1))(10);","module.exports = (__webpack_require__(1))(192);","module.exports = (__webpack_require__(1))(5783);","module.exports = (__webpack_require__(1))(5532);","module.exports = (__webpack_require__(1))(5787);","module.exports = (__webpack_require__(1))(5788);","module.exports = (__webpack_require__(1))(194);","module.exports = (__webpack_require__(1))(22);","module.exports = (__webpack_require__(1))(35);","module.exports = (__webpack_require__(1))(6);","module.exports = (__webpack_require__(1))(5791);","export { default } from './Dialog';","module.exports = (__webpack_require__(1))(5814);","module.exports = (__webpack_require__(1))(5815);","module.exports = (__webpack_require__(1))(5816);","module.exports = (__webpack_require__(1))(5818);","module.exports = (__webpack_require__(1))(5824);","module.exports = (__webpack_require__(1))(5849);","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport React from 'react';\nimport { style } from 'typestyle';\n\ninterface SpacerProps {\n  width: number;\n}\nexport function Spacer(props: SpacerProps) {\n  const spacerStyle = style({\n    width: props.width,\n    display: 'inline-block',\n  });\n  return <div className={spacerStyle} />;\n}\nSpacer.defaultProps = { width: 5 };\n","module.exports = (__webpack_require__(1))(5842);","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return '@media ' + item[2] + '{' + content + '}';\n      } else {\n        return content;\n      }\n    }).join('');\n  }; // import a list of modules into the list\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (i = 0; i < modules.length; i++) {\n      var item = modules[i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = '(' + item[2] + ') and (' + mediaQuery + ')';\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || '';\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */';\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n  return '/*# ' + data + ' */';\n}","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","module.exports = (__webpack_require__(1))(5811);","module.exports = (__webpack_require__(1))(142);","module.exports = (__webpack_require__(1))(79);","module.exports = (__webpack_require__(1))(36);","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport { AppContainer, hot } from 'react-hot-loader';\nimport * as React from 'react';\nimport { render } from 'react-dom';\nimport App from './components/app';\nimport './index.css';\n\nconst rootEl = document.getElementById('root');\n\nrender(\n  <AppContainer>\n    <App />\n  </AppContainer>,\n  rootEl\n);\n\n// Hot Module Replacement API\nif ((module as any).hot) {\n  (module as any).hot.accept('./components/app', () => {\n    const NewApp = require('./components/app').default;\n\n    render(\n      <AppContainer>\n        <NewApp />\n      </AppContainer>,\n      rootEl\n    );\n  });\n}\n","\"use strict\";function _interopDefault(e){return e&&\"object\"==typeof e&&\"default\"in e?e.default:e}Object.defineProperty(exports,\"__esModule\",{value:!0});var React=_interopDefault(require(\"react\"));function AppContainer(e){return AppContainer.warnAboutHMRDisabled&&(AppContainer.warnAboutHMRDisabled=!0,console.error(\"React-Hot-Loader: misconfiguration detected, using production version in non-production environment.\"),console.error(\"React-Hot-Loader: Hot Module Replacement is not enabled.\")),React.Children.only(e.children)}AppContainer.warnAboutHMRDisabled=!1;var hot=function e(){return e.shouldWrapWithAppContainer?function(e){return function(n){return React.createElement(AppContainer,null,React.createElement(e,n))}}:function(e){return e}};hot.shouldWrapWithAppContainer=!1;var areComponentsEqual=function(e,n){return e===n},setConfig=function(){},cold=function(e){return e},configureComponent=function(){};exports.AppContainer=AppContainer,exports.hot=hot,exports.areComponentsEqual=areComponentsEqual,exports.setConfig=setConfig,exports.cold=cold,exports.configureComponent=configureComponent;\n","module.exports = (__webpack_require__(1))(16);","import React from 'react';\n\nimport Main from './main';\n\nexport default function App() {\n  return <Main />;\n}\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport React from 'react';\nimport { observer } from 'mobx-react';\nimport { style } from 'typestyle';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport { ThemeProvider } from '@material-ui/styles';\n\nimport { Controls } from './controls';\nimport { Editor } from './editor';\nimport { Generate } from './generate';\nimport { Working } from './working';\n\nimport logging, { Events } from '../core/logging';\nimport { generator, layout } from '../core';\nimport { theme } from '../core/theme';\nimport featureFlags from '../core/feature-flags';\n\n@observer\nexport default class Main extends React.Component {\n  componentDidMount() {\n    logging.logEvent(Events.APP_LOAD, {\n      baseline: featureFlags.baseline,\n      id: featureFlags.id,\n      url: window.location.href,\n    });\n  }\n\n  stageRef: HTMLDivElement;\n\n  render() {\n    const stageContainerStyle = style({\n      marginTop: 20,\n      width: '100%',\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'row',\n      justifyContent: 'center',\n      flexGrow: 1,\n    });\n    const editorContainerStyle = style({\n      width: layout.editorWidth,\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n    });\n    const sequencesContainerStyle = style({\n      width: layout.sequencesWidth,\n      height: '100%',\n    });\n\n    return (\n      <ThemeProvider theme={theme}>\n        <AppBar position=\"static\" color=\"primary\">\n          <Toolbar>\n            <Typography variant=\"h6\" color=\"inherit\">\n              𝄡 Bach CoCoCo\n            </Typography>\n          </Toolbar>\n        </AppBar>\n        <div className={stageContainerStyle} ref={ref => (this.stageRef = ref)}>\n          <div className={editorContainerStyle}>\n            <Editor />\n            <Controls />\n          </div>\n          <div className={sequencesContainerStyle}>\n            <Generate />\n          </div>\n        </div>\n        <div id=\"sheets-logging\">\n          <form\n            action={process.env.GOOGLE_FORM_LOGGING_URL}\n            target=\"sheets-logging-iframe\"\n            method=\"POST\"\n            id=\"sheets-logging-form\"\n          >\n            <textarea\n              id=\"sheets-logging-textarea\"\n              name={process.env.GOOGLE_FORM_ENTRY_ID}\n            />\n          </form>\n          <iframe id=\"sheets-logging-iframe\" name=\"sheets-logging-iframe\" />\n        </div>\n        <Working open={generator.isWorking} title=\"Working...\" />\n      </ThemeProvider>\n    );\n  }\n}\n","export { default } from './AppBar';","export { default } from './Toolbar';","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport React from 'react';\nimport { style } from 'typestyle';\nimport Button from '@material-ui/core/Button';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport ToggleButton from '@material-ui/lab/ToggleButton';\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\nimport {\n  PlayArrow,\n  Stop,\n  DeleteSweep,\n  Edit,\n  SelectAll,\n  Undo,\n  Redo,\n} from '@material-ui/icons';\nimport { observer } from 'mobx-react';\n\nimport { generator, player, layout, editor, EditorTool, undo } from '../core';\nimport * as theme from '../core/theme';\nimport { Voice } from '../core/note';\n\nimport { KeySignatures } from './key-signatures';\nimport { Spacer } from './spacer';\n\ninterface State {\n  keyDialogOpen: boolean;\n}\n\n@observer\nexport class Controls extends React.Component<{}, State> {\n  state = {\n    keyDialogOpen: false,\n  };\n\n  render() {\n    const PADDING = 0;\n    const width = layout.editorWidth;\n\n    const controlsStyle = style({\n      width: width - 2 * PADDING,\n      display: 'flex',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      paddingLeft: PADDING,\n      paddingRight: PADDING,\n      margin: '20px 0 60px',\n      height: layout.controlsHeight,\n    });\n\n    const playDisabled = !player.isPlayerLoaded || editor.allNotes.length === 0;\n    const showPlay = !player.isPlaying;\n    const maskButtonDisabled = generator.candidateSequences.length > 1;\n\n    return (\n      <div className={controlsStyle}>\n        <div>\n          <Button\n            disabled={playDisabled}\n            variant=\"outlined\"\n            color=\"primary\"\n            onClick={() => player.togglePlay()}\n          >\n            {showPlay ? <PlayArrow /> : <Stop />}\n          </Button>\n        </div>\n        <div>\n          <Button\n            disabled={!undo.canUndo}\n            variant=\"outlined\"\n            color=\"primary\"\n            onClick={() => undo.undo()}\n          >\n            {<Undo />}\n          </Button>\n          <Spacer />\n          <Button\n            disabled={!undo.canRedo}\n            variant=\"outlined\"\n            color=\"primary\"\n            onClick={() => undo.redo()}\n          >\n            {<Redo />}\n          </Button>\n        </div>\n        <ToggleButtonGroup\n          value={editor.selectedTool}\n          exclusive\n          onChange={(e, value: EditorTool) => {\n            if (value !== null) {\n              editor.selectTool(value);\n            }\n          }}\n        >\n          <ToggleButton value={EditorTool.DRAW}>\n            <Edit />\n          </ToggleButton>\n          <ToggleButton value={EditorTool.MASK} disabled={maskButtonDisabled}>\n            <SelectAll />\n          </ToggleButton>\n          <ToggleButton value={EditorTool.ERASE}>\n            <DeleteSweep />\n          </ToggleButton>\n        </ToggleButtonGroup>\n        <div>\n          <FormControl>\n            <Select\n              style={{ color: theme.VOICE_COLORS[editor.selectedVoice] }}\n              value={editor.selectedVoice}\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n                const value = e.target.value;\n                if (value !== null) {\n                  editor.selectVoice(Number(value));\n                  // If user changes voices, user very likely wants to start editing\n                  editor.selectTool(EditorTool.DRAW, false /** logging */);\n                }\n              }}\n              autoWidth\n            >\n              <MenuItem\n                style={{ color: theme.COLOR_SOPRANO }}\n                value={Voice.SOPRANO}\n              >\n                Soprano\n              </MenuItem>\n              <MenuItem style={{ color: theme.COLOR_ALTO }} value={Voice.ALTO}>\n                Alto\n              </MenuItem>\n              <MenuItem\n                style={{ color: theme.COLOR_TENOR }}\n                value={Voice.TENOR}\n              >\n                Tenor\n              </MenuItem>\n              <MenuItem style={{ color: theme.COLOR_BASS }} value={Voice.BASS}>\n                Bass\n              </MenuItem>\n            </Select>\n            <FormHelperText style={{ width: 100 }}>Voice</FormHelperText>\n          </FormControl>\n          <Spacer width={10} />\n          <FormControl>\n            <Select\n              value={editor.quantizeStep}\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n                const value = e.target.value;\n                if (value !== null) {\n                  editor.selectQuantization(Number(value));\n                  // If user changes step size\n                  // and they are in erase mode, user very likely wants to start editing\n                  if (editor.selectedTool === EditorTool.ERASE) {\n                    editor.selectTool(EditorTool.DRAW, false /** logging */);\n                  }\n                  // if they are in mask mode, they might want a more refined mask size\n                  // in which case don't change it automatically\n                }\n              }}\n              autoWidth\n            >\n              <MenuItem value={1}>1/16</MenuItem>\n              <MenuItem value={2}>1/8</MenuItem>\n              <MenuItem value={4}>1/4</MenuItem>\n              <MenuItem value={8}>1/2</MenuItem>\n            </Select>\n            <FormHelperText style={{ width: 100 }}>Quantization</FormHelperText>\n          </FormControl>\n        </div>\n        <div>\n          <Button\n            onClick={() => this.setState({ keyDialogOpen: true })}\n            variant=\"outlined\"\n            color=\"primary\"\n          >\n            {editor.key} {editor.mode}\n          </Button>\n        </div>\n        <KeySignatures\n          isDialogOpen={this.state.keyDialogOpen}\n          onRequestClose={() => this.setState({ keyDialogOpen: false })}\n        />\n      </div>\n    );\n  }\n}\n","export { default } from './ToggleButton';","export { default } from './ToggleButtonGroup';","module.exports = (__webpack_require__(1))(5895);","module.exports = (__webpack_require__(1))(5907);","/**\n * @license\n * Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nexport { Coconet } from './model';\n","/**\n * Implementation for [Coconet]{@link\n * https://ismir2017.smcnus.org/wp-content/uploads/2017/10/187_Paper.pdf%7D}\n * models.\n *\n * @license\n * Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport * as tf from '@tensorflow/tfjs-core';\n\nimport { INoteSequence } from '@magenta/music';\nimport * as logging from './magenta/logging';\nimport * as sequences from './magenta/sequences';\n\nimport {\n  IS_IOS,\n  NUM_PITCHES,\n  MIN_PITCH,\n  pianorollToSequence,\n  sequenceToPianoroll,\n} from './coconet_utils';\n\nimport {\n  makeNotesTriadForKey,\n  getHappyTriadsForKey,\n  getSadTriadsForKey,\n  getAllHappyTriads,\n  getAllSadTriads,\n} from '../tonal-utils';\n\nimport { N_NOTE_DIVISIONS } from '../constants';\n\n/**\n * An interface for providing an infilling mask.\n * @param step The quantized time step at which to infill.\n * @param voice The voice to infill at the time step.\n */\ninterface InfillMask {\n  step: number;\n  voice: number;\n}\n\n/**\n * @param discourageNotes (Optional) discourageNotes flag saying whether to\n * adjust gibbs sampling of notes. If true, the sampling is nudged towards not\n * sampling notes from the original pianoroll. If false, the sampling is nudged\n * towards sampling more of the notes. If not provided, sampling remains same.\n * @param nudgeFactor (Optional) multiplier for how much to nudge notes, when\n * discourageNotes is set to true or false\n */\ninterface SimilarDifferentConfig {\n  discourageNotes: boolean;\n  nudgeFactor: number;\n}\n\n/**\n *\n * @interface MoodConfig\n * @param key The letter of the musical key e.g., `C` or `Db`\n * @param mode either `major`, `minor`, `harmonic minor`\n */\ninterface MoodConfig {\n  key: string;\n  mode: string;\n  happy: boolean;\n}\n\n/**\n * An interface for providing configurable properties to a Coconet model.\n * @param temperature (Optional) The softmax temperature to use when sampling\n * from the logits. Default is 0.99.\n * @param numIterations (Optional) The number of Gibbs sampling iterations\n * before the final output. Fewer iterations will be faster but have poorer\n * results; more iterations will be slower but have better results.\n * @param infillMask (Optional) Array of timesteps at which the model should\n * infill notes. The array should contain pairs of the form\n * `{step: number, voice: number}`, indicating which voice should be\n * infilled for a particular step. If this value isn't provided, then the model\n * will attempt to infill all the \"silent\" steps in the input sequence.\n * @param moodConfig (Optional) generation can be conditioned on the happy/major triads or\n * sad/minor/augmented/diminished triads of a major, minor, or harmonic minor scale.\n * This parameter is an object with a `key` ('C') and a `mode` ('major', 'minor', 'harmonic minor')\n * to indicate the key the piece is in\n */\ninterface CoconetConfig {\n  temperature?: number;\n  numIterations?: number;\n  infillMask?: InfillMask[];\n  similarDifferentConfig?: SimilarDifferentConfig;\n  moodConfig?: MoodConfig;\n}\n\ninterface LayerSpec {\n  pooling?: number[];\n  filters?: number[];\n  activation?: string;\n  dilation?: number[];\n  activeNoteRGB?: string;\n  minPitch?: number;\n  maxPitch?: number;\n  poolPad?: 'same' | 'valid';\n  convPad?: string;\n  convStride?: number;\n}\n\ninterface ModelSpec {\n  useSoftmaxLoss: boolean;\n  batchNormVarianceEpsilon: number;\n  numInstruments: number;\n  numFilters: number;\n  numLayers: number;\n  numRegularConvLayers: number;\n  dilation?: number[][];\n  layers: LayerSpec[];\n  interleaveSplitEveryNLayers?: number;\n  numPointwiseSplits?: number;\n}\n\nconst DEFAULT_SPEC: ModelSpec = {\n  useSoftmaxLoss: true,\n  batchNormVarianceEpsilon: 1.0e-7,\n  numInstruments: 4,\n  numFilters: 128,\n  numLayers: 33,\n  numRegularConvLayers: 0,\n  dilation: [\n    [1, 1],\n    [2, 2],\n    [4, 4],\n    [8, 8],\n    [16, 16],\n    [16, 32],\n    [1, 1],\n    [2, 2],\n    [4, 4],\n    [8, 8],\n    [16, 16],\n    [16, 32],\n    [1, 1],\n    [2, 2],\n    [4, 4],\n    [8, 8],\n    [16, 16],\n    [16, 32],\n    [1, 1],\n    [2, 2],\n    [4, 4],\n    [8, 8],\n    [16, 16],\n    [16, 32],\n    [1, 1],\n    [2, 2],\n    [4, 4],\n    [8, 8],\n    [16, 16],\n    [16, 32],\n  ],\n  layers: null,\n  interleaveSplitEveryNLayers: 16,\n  numPointwiseSplits: 4,\n};\n\nclass ConvNet {\n  private residualPeriod = 2;\n  private outputForResidual: tf.Tensor = null;\n  private residualCounter = -1;\n  private spec: ModelSpec;\n\n  // Save for disposal.\n  private rawVars: { [varName: string]: tf.Tensor } = null;\n\n  constructor(spec: ModelSpec, vars: { [varName: string]: tf.Tensor }) {\n    this.spec = spec;\n    this.rawVars = vars;\n  }\n\n  dispose() {\n    if (this.rawVars !== null) {\n      tf.dispose(this.rawVars);\n    }\n    if (this.outputForResidual) {\n      this.outputForResidual.dispose();\n    }\n  }\n\n  public predictFromPianoroll(\n    pianoroll: tf.Tensor4D,\n    masks: tf.Tensor4D\n  ): tf.Tensor {\n    return tf.tidy(() => {\n      let featuremaps = this.getConvnetInput(pianoroll, masks);\n\n      const n = this.spec.layers.length;\n      for (let i = 0; i < n; i++) {\n        this.residualCounter += 1;\n        this.residualSave(featuremaps);\n        let numPointwiseSplits = null;\n        if (\n          this.spec.interleaveSplitEveryNLayers &&\n          i > 0 &&\n          i < n - 2 &&\n          i % (this.spec.interleaveSplitEveryNLayers + 1) === 0\n        ) {\n          numPointwiseSplits = this.spec.numPointwiseSplits;\n        }\n        featuremaps = this.applyConvolution(\n          featuremaps,\n          this.spec.layers[i],\n          i,\n          i >= this.spec.numRegularConvLayers,\n          numPointwiseSplits\n        );\n        featuremaps = this.applyResidual(featuremaps, i === 0, i === n - 1, i);\n        featuremaps = this.applyActivation(featuremaps, this.spec.layers[i], i);\n        featuremaps = this.applyPooling(featuremaps, this.spec.layers[i], i);\n      }\n      return this.computePredictions(featuremaps);\n    });\n  }\n\n  private computePredictions(logits: tf.Tensor): tf.Tensor {\n    if (this.spec.useSoftmaxLoss) {\n      return logits\n        .transpose([0, 1, 3, 2])\n        .softmax()\n        .transpose([0, 1, 3, 2]);\n    }\n    return logits.sigmoid();\n  }\n\n  private residualReset() {\n    this.outputForResidual = null;\n    this.residualCounter = 0;\n  }\n\n  private residualSave(x: tf.Tensor) {\n    if (this.residualCounter % this.residualPeriod === 1) {\n      this.outputForResidual = x;\n    }\n  }\n\n  private applyResidual(\n    x: tf.Tensor4D,\n    isFirst: boolean,\n    isLast: boolean,\n    i: number\n  ): tf.Tensor4D {\n    if (this.outputForResidual == null) {\n      return x;\n    }\n    if (\n      this.outputForResidual.shape[this.outputForResidual.shape.length - 1] !==\n      x.shape[x.shape.length - 1]\n    ) {\n      this.residualReset();\n      return x;\n    }\n    if (this.residualCounter % this.residualPeriod === 0) {\n      if (!isFirst && !isLast) {\n        x = x.add(this.outputForResidual);\n      }\n    }\n    return x;\n  }\n\n  private getVar(name: string, layerNum: number): tf.Tensor4D {\n    const varname = `model/conv${layerNum}/${name}`;\n    return this.rawVars[varname] as tf.Tensor4D;\n  }\n\n  private getSepConvVar(name: string, layerNum: number): tf.Tensor4D {\n    const varname = `model/conv${layerNum}/SeparableConv2d/${name}`;\n    return this.rawVars[varname] as tf.Tensor4D;\n  }\n\n  private getPointwiseSplitVar(\n    name: string,\n    layerNum: number,\n    splitNum: number\n  ) {\n    // tslint:disable-next-line:max-line-length\n    const varname = `model/conv${layerNum}/split_${layerNum}_${splitNum}/${name}`;\n    return this.rawVars[varname];\n  }\n\n  private applyConvolution(\n    x: tf.Tensor4D,\n    layer: LayerSpec,\n    i: number,\n    depthwise: boolean,\n    numPointwiseSplits?: number\n  ): tf.Tensor4D {\n    if (layer.filters == null) {\n      return x;\n    }\n    const filterShape = layer.filters;\n    const stride = layer.convStride || 1;\n    const padding = layer.convPad\n      ? (layer.convPad.toLowerCase() as 'same' | 'valid')\n      : 'same';\n    let conv = null;\n    if (depthwise) {\n      const dWeights = this.getSepConvVar('depthwise_weights', i);\n      if (!numPointwiseSplits) {\n        const pWeights = this.getSepConvVar('pointwise_weights', i);\n        const biases = this.getSepConvVar('biases', i);\n        const sepConv = tf.separableConv2d(\n          x,\n          dWeights,\n          pWeights,\n          [stride, stride],\n          padding,\n          layer.dilation as [number, number],\n          'NHWC'\n        );\n        conv = sepConv.add(biases);\n      } else {\n        conv = tf.depthwiseConv2d(\n          x,\n          dWeights,\n          [stride, stride],\n          padding,\n          'NHWC',\n          layer.dilation as [number, number]\n        );\n        const splits = tf.split(conv, numPointwiseSplits, conv.rank - 1);\n        const pointwiseSplits = [];\n        for (let splitIdx = 0; splitIdx < numPointwiseSplits; splitIdx++) {\n          const outputShape = filterShape[3] / numPointwiseSplits;\n          const weights = this.getPointwiseSplitVar('kernel', i, splitIdx);\n          const biases = this.getPointwiseSplitVar('bias', i, splitIdx);\n          const dot = tf.matMul(\n            splits[splitIdx].reshape([-1, outputShape]),\n            weights,\n            false,\n            false\n          );\n          const bias = tf.add(dot, biases);\n          pointwiseSplits.push(\n            bias.reshape([\n              splits[splitIdx].shape[0],\n              splits[splitIdx].shape[1],\n              splits[splitIdx].shape[2],\n              outputShape,\n            ])\n          );\n        }\n        conv = tf.concat(pointwiseSplits, conv.rank - 1);\n      }\n    } else {\n      const weights = this.getVar('weights', i);\n      const stride = layer.convStride || 1;\n      const padding = layer.convPad\n        ? (layer.convPad.toLowerCase() as 'same' | 'valid')\n        : 'same';\n      conv = tf.conv2d(x, weights, [stride, stride], padding, 'NHWC', [1, 1]);\n    }\n    return this.applyBatchnorm(conv as tf.Tensor4D, i) as tf.Tensor4D;\n  }\n\n  private applyBatchnorm(x: tf.Tensor4D, i: number): tf.Tensor {\n    const gammas = this.getVar('gamma', i);\n    const betas = this.getVar('beta', i);\n    const mean = this.getVar('popmean', i);\n    const variance = this.getVar('popvariance', i);\n    if (IS_IOS) {\n      // iOS WebGL floats are 16-bit, and the variance is outside this range.\n      // This loads the variance to 32-bit floats in JS to compute batchnorm.\n      // This arraySync is OK because we don't use the variance anywhere,\n      // so it doesn't actually get uploaded to the GPU, so we don't\n      // continuously download it and upload it which is the problem with\n      // dataSync.\n      const v = variance.arraySync()[0][0][0];\n      const stdevs = tf.tensor(\n        v.map((x: number) => Math.sqrt(x + this.spec.batchNormVarianceEpsilon))\n      );\n      return x\n        .sub(mean)\n        .mul(gammas.div(stdevs))\n        .add(betas);\n    }\n    return tf.batchNorm(\n      x,\n      tf.squeeze(mean),\n      tf.squeeze(variance),\n      tf.squeeze(betas),\n      tf.squeeze(gammas),\n      this.spec.batchNormVarianceEpsilon\n    );\n  }\n\n  private applyActivation(\n    x: tf.Tensor4D,\n    layer: LayerSpec,\n    i: number\n  ): tf.Tensor4D {\n    if (layer.activation === 'identity') {\n      return x;\n    }\n    return x.relu();\n  }\n\n  private applyPooling(\n    x: tf.Tensor4D,\n    layer: LayerSpec,\n    i: number\n  ): tf.Tensor4D {\n    if (layer.pooling == null) {\n      return x;\n    }\n    const pooling = layer.pooling;\n    const padding = layer.poolPad\n      ? (layer.poolPad.toLowerCase() as 'same' | 'valid')\n      : 'same';\n    return tf.maxPool(\n      x,\n      [pooling[0], pooling[1]],\n      [pooling[0], pooling[1]],\n      padding\n    );\n  }\n\n  private getConvnetInput(\n    pianoroll: tf.Tensor4D,\n    masks: tf.Tensor4D\n  ): tf.Tensor4D {\n    pianoroll = tf\n      .scalar(1, 'float32')\n      .sub(masks)\n      .mul(pianoroll);\n    masks = tf.scalar(1, 'float32').sub(masks);\n    return pianoroll.concat(masks, 3);\n  }\n}\n\n/**\n * Coconet model implementation in TensorflowJS.\n * Thanks to [James Wexler](https://github.com/jameswex) for the original\n * implementation.\n */\nclass Coconet {\n  private checkpointURL: string;\n  private spec: ModelSpec = null;\n  private convnet: ConvNet;\n  private initialized = false;\n\n  /**\n   * `Coconet` constructor.\n   *\n   * @param checkpointURL Path to the checkpoint directory.\n   */\n  constructor(checkpointURL: string) {\n    this.checkpointURL = checkpointURL;\n    this.spec = DEFAULT_SPEC;\n  }\n\n  /**\n   * Loads variables from the checkpoint and instantiates the model.\n   */\n  async initialize() {\n    this.dispose();\n\n    const startTime = performance.now();\n    this.instantiateFromSpec();\n    const vars = await fetch(`${this.checkpointURL}/weights_manifest.json`)\n      .then(response => response.json())\n      .then((manifest: tf.io.WeightsManifestConfig) =>\n        tf.io.loadWeights(manifest, this.checkpointURL)\n      );\n    this.convnet = new ConvNet(this.spec, vars);\n    this.initialized = true;\n    logging.logWithDuration('Initialized model', startTime, 'Coconet');\n  }\n\n  dispose() {\n    if (this.convnet) {\n      this.convnet.dispose();\n    }\n    this.initialized = false;\n  }\n\n  isInitialized() {\n    return this.initialized;\n  }\n\n  /**\n   * Sets up layer configuration from params\n   */\n  instantiateFromSpec() {\n    // Outermost dimensions' sizes of the non-final layers in the network.\n    const nonFinalLayerFilterOuterSizes = 3;\n\n    // Outermost dimensions' sizes of the last two layers in the network.\n    const finalTwoLayersFilterOuterSizes = 2;\n\n    this.spec.layers = [];\n    // Set-up filter size of first convolutional layer.\n    this.spec.layers.push({\n      filters: [\n        nonFinalLayerFilterOuterSizes,\n        nonFinalLayerFilterOuterSizes,\n        this.spec.numInstruments * 2,\n        this.spec.numFilters,\n      ],\n    });\n    // Set-up filter sizes of middle convolutional layers.\n    for (let i = 0; i < this.spec.numLayers - 3; i++) {\n      this.spec.layers.push({\n        filters: [\n          nonFinalLayerFilterOuterSizes,\n          nonFinalLayerFilterOuterSizes,\n          this.spec.numFilters,\n          this.spec.numFilters,\n        ],\n        dilation: this.spec.dilation ? this.spec.dilation[i] : null,\n      });\n    }\n    // Set-up filter size of penultimate convolutional layer.\n    this.spec.layers.push({\n      filters: [\n        finalTwoLayersFilterOuterSizes,\n        finalTwoLayersFilterOuterSizes,\n        this.spec.numFilters,\n        this.spec.numFilters,\n      ],\n    });\n    // Set-up filter size and activation of final convolutional layer.\n    this.spec.layers.push({\n      filters: [\n        finalTwoLayersFilterOuterSizes,\n        finalTwoLayersFilterOuterSizes,\n        this.spec.numFilters,\n        this.spec.numInstruments,\n      ],\n      activation: 'identity',\n    });\n  }\n\n  /*\n   private printPianorolls(pianorolls: tf.Tensor4D) {\n     const voiceIdxs = [0, 1, 2, 3];\n     voiceIdxs.forEach(voice => {\n       const voiceroll = pianorolls.slice(\n         [0, 0, 0, voice],\n         [1, pianorolls.shape[1], NUM_PITCHES, 1]);\n       console.log(voiceroll.shape);\n       voiceroll.print();\n     });\n   }\n   */\n\n  /**\n   * Use the model to generate a Bach-style 4-part harmony, conditioned on an\n   * input sequence. The notes in the input sequence should have the\n   * `instrument` property set corresponding to which voice the note belongs to:\n   * 0 for Soprano, 1 for Alto, 2 for Tenor and 3 for Bass.\n   *\n   * **Note**: regardless of the length of the notes in the original sequence,\n   * all the notes in the generated sequence will be 1 step long. If you want\n   * to clean up the sequence to consider consecutive notes for the same\n   * pitch and instruments as \"held\", you can call `mergeHeldNotes` on the\n   * result. This function will replace any of the existing voices with\n   * the output of the model. If you want to restore any of the original voices,\n   * you can call `replaceVoice` on the output, specifying which voice should be\n   * restored.\n   *\n   * @param sequence The sequence to infill. Must be quantized.\n   * @param config (Optional) Infill parameterers like temperature, the number\n   * of sampling iterations, or masks.\n   */\n  async infill(sequence: INoteSequence, config?: CoconetConfig) {\n    sequences.assertIsRelativeQuantizedSequence(sequence);\n    const numSteps =\n      sequence.totalQuantizedSteps ||\n      sequence.notes[sequence.notes.length - 1].quantizedEndStep;\n\n    // Convert the sequence to a pianoroll.\n    const pianoroll = sequenceToPianoroll(sequence, numSteps);\n\n    // Figure out the sampling configuration.\n    let temperature = 0.99;\n    let numIterations;\n    let outerMasks;\n    let moodConfig;\n    let similarDifferentConfig;\n\n    if (config) {\n      temperature = config.temperature || temperature;\n      outerMasks = this.getCompletionMaskFromInput(\n        config.infillMask,\n        pianoroll\n      );\n      numIterations =\n        config.numIterations ||\n        (await this.getNumIterationsFromOuterMasks(outerMasks));\n      moodConfig = config.moodConfig || moodConfig;\n      similarDifferentConfig =\n        config.similarDifferentConfig || similarDifferentConfig;\n    } else {\n      outerMasks = this.getCompletionMask(pianoroll);\n      numIterations = await this.getNumIterationsFromOuterMasks(outerMasks);\n    }\n\n    // Run sampling on the pianoroll.\n    const samples = await this.run(\n      pianoroll,\n      numIterations,\n      temperature,\n      outerMasks,\n      moodConfig,\n      similarDifferentConfig\n    );\n\n    // Convert the resulting pianoroll to a noteSequence.\n    const outputSequence = pianorollToSequence(samples, numSteps);\n\n    pianoroll.dispose();\n    samples.dispose();\n    outerMasks.dispose();\n    return outputSequence;\n  }\n\n  /**\n   * Runs sampling on pianorolls.\n   */\n  private async run(\n    pianorolls: tf.Tensor4D,\n    numSteps: number,\n    temperature: number,\n    outerMasks: tf.Tensor4D,\n    moodConfig: MoodConfig,\n    similarDifferentConfig: SimilarDifferentConfig\n  ): Promise<tf.Tensor4D> {\n    return this.gibbs(\n      pianorolls,\n      numSteps,\n      temperature,\n      outerMasks,\n      moodConfig,\n      similarDifferentConfig\n    );\n  }\n\n  private getCompletionMaskFromInput(\n    masks: InfillMask[],\n    pianorolls: tf.Tensor4D\n  ): tf.Tensor4D {\n    if (!masks) {\n      return this.getCompletionMask(pianorolls);\n    } else {\n      // Create a buffer to store the input.\n      const buffer = tf.buffer([pianorolls.shape[1], 4]);\n      for (let i = 0; i < masks.length; i++) {\n        buffer.set(1, masks[i].step, masks[i].voice);\n      }\n      // Expand that buffer to the right shape.\n      return tf.tidy(() => {\n        return buffer\n          .toTensor()\n          .expandDims(1)\n          .tile([1, NUM_PITCHES, 1])\n          .expandDims(0) as tf.Tensor4D;\n      });\n    }\n  }\n\n  private getCompletionMask(pianorolls: tf.Tensor4D): tf.Tensor4D {\n    return tf.tidy(() => {\n      const isEmpty = pianorolls.sum(2, true).equal(tf.scalar(0, 'float32'));\n      // Explicit broadcasting.\n      return tf.cast(isEmpty, 'float32').add(tf.zerosLike(pianorolls));\n    });\n  }\n\n  private async getNumIterationsFromOuterMasks(\n    outerMasks: tf.Tensor4D\n  ): Promise<number> {\n    const defaultNumIterations = 96;\n    // numIterations ~ batchSize * numQuantizeSteps * numVoices\n    const numIterations = await tf.sum(tf.max(outerMasks, 2)).array();\n    if (typeof numIterations === 'number') {\n      return numIterations;\n    } else if (Array.isArray(numIterations)) {\n      const first = numIterations[0];\n      return typeof first === 'number' ? first : defaultNumIterations;\n    }\n    return defaultNumIterations;\n  }\n\n  /**\n   * Idea: we don't care about the mask area of notes that will be\n   * nudged by the soft prior since the masking code already handles\n   *\n   * @param {tf.Tensor4D} pianorolls\n   * @param {bool} [discourageNotes] if undefined, creates an identity prior\n   * @param {number} [nudgeFactor] The probabilities will be\n   * nudged ~ 3^(nudgeFactor)\n   * @returns {tf.Tensor4D}\n   */\n  private priorOverOriginalNotes(\n    pianorolls: tf.Tensor4D,\n    similarDifferentConfig: SimilarDifferentConfig\n  ): tf.Tensor4D {\n    if (\n      similarDifferentConfig === undefined ||\n      similarDifferentConfig.discourageNotes === undefined ||\n      similarDifferentConfig.nudgeFactor === undefined\n    ) {\n      return tf.onesLike(pianorolls);\n    }\n    return similarDifferentConfig.discourageNotes\n      ? // nudge * (1.5 - pianorolls)\n        // when prior is used, probabilities for...\n        // notes in pianoroll (1s) are nudge*0.5 smaller\n        // notes not in pianoroll (0s) are nudge*1.5 larger\n        // Thus, 3^(nudgeFactor) likelihood decrease for\n        // notes in pianoroll to be selected\n        (tf.mul(\n          tf.scalar(similarDifferentConfig.nudgeFactor),\n          tf.scalar(1.5).sub(pianorolls)\n        ) as tf.Tensor4D)\n      : // nudge * (0.5 + pianorolls)\n        // when prior is used, probabilities for...\n        // notes in pianoroll (1s) are nudge*1.5 larger\n        // notes not in pianoroll (0s) are nudge*0.5 smaller\n        // Thus, 3^(nudgeFactor) likelihood decrease for\n        // notes in pianoroll to be selected\n        (tf.mul(\n          tf.scalar(similarDifferentConfig.nudgeFactor),\n          tf.scalar(0.5).add(pianorolls)\n        ) as tf.Tensor4D);\n  }\n\n  /*\n  private getScalePrior(\n    pianorolls: tf.Tensor4D,\n    keyScaleName: KeyScaleName\n  ): tf.Tensor4D {\n    if (keyScaleName === undefined) {\n      return tf.onesLike(pianorolls);\n    }\n    const [nBatch, nQSteps, nPitches, nVoices] = pianorolls.shape;\n    const keyScale = keyScaleName.chords\n      ? makeNotesTriadForKey(keyScaleName.key, keyScaleName.mode)\n      : makeNoteScaleForKey(keyScaleName.key, keyScaleName.mode);\n    // Create a buffer to store the input.\n    const pitches = tf.buffer([nPitches]);\n    if (keyScaleName.constrainToKey) {\n      for (let i = 0; i < keyScale.length; i++) {\n        pitches.set(1, keyScale[i].pitch - MIN_PITCH);\n      }\n    } else {\n      const keyPitchSet = new Set<number>(\n        keyScale.map(scaleValue => scaleValue.pitch)\n      );\n      for (let i = 0; i < nPitches; i++) {\n        if (keyPitchSet.has(i + MIN_PITCH)) {\n          pitches.set(1.5, i);\n        } else {\n          pitches.set(0.5, i);\n        }\n      }\n    }\n    // Expand that buffer to the right shape.\n    return tf.tidy(() => {\n      return pitches\n        .toTensor()\n        .expandDims(0)\n        .tile([nQSteps, 1])\n        .expandDims(2)\n        .tile([1, 1, nVoices])\n        .expandDims(0)\n        .tile([nBatch, 1, 1, 1]) as tf.Tensor4D;\n    });\n  }\n  */\n\n  private getTriadPitchBuffer(\n    pianorolls: tf.Tensor4D,\n    key: string,\n    mode: string,\n    hardPrior: boolean\n  ) {\n    const triadPitches = makeNotesTriadForKey(key, mode);\n    const nPitches = pianorolls.shape[2];\n    const pitches = tf.buffer([nPitches]);\n    if (hardPrior) {\n      for (let i = 0; i < triadPitches.length; i++) {\n        pitches.set(1, triadPitches[i].pitch - MIN_PITCH);\n      }\n    } else {\n      const triadPitchSet = new Set<number>(\n        triadPitches.map(note => note.pitch)\n      );\n      for (let i = 0; i < nPitches; i++) {\n        if (triadPitchSet.has(i + MIN_PITCH)) {\n          pitches.set(1.5, i);\n        } else {\n          pitches.set(0.5, i);\n        }\n      }\n    }\n    return pitches;\n  }\n\n  private mapTemperatureToNHeldSteps(\n    temperature: number,\n    nNoteDivisions: number = N_NOTE_DIVISIONS\n  ): number {\n    if (temperature <= 0.25) {\n      return nNoteDivisions / 2; // progressions are half steps\n    } else if (temperature <= 0.75) {\n      return nNoteDivisions / 4; // progressions are quarter steps\n    } else if (temperature <= 1.5) {\n      return nNoteDivisions / 8; // progressions are eighth steps\n    } else {\n      return nNoteDivisions / 16; // progressions are sixteenth steps\n    }\n  }\n\n  private getMostLikelyMoodPrior(\n    predictions: tf.Tensor4D,\n    moodConfig: MoodConfig,\n    temperature: number\n  ) {\n    if (moodConfig === undefined) {\n      return tf.onesLike(predictions);\n    }\n    const [nBatch, nQSteps, nPitches, nVoices] = predictions.shape;\n\n    // Technique 1: Get Triads of a happy/sad quality only within the current user set key/mode\n    // const moodTriads = moodConfig.happy\n    // ? getHappyTriadsForKey(moodConfig.key, moodConfig.mode)\n    // : getSadTriadsForKey(moodConfig.key, moodConfig.mode);\n\n    // Technique 2: Get triads of a happy/sad quality from all available ones from the 12 tones\n    const moodTriads = moodConfig.happy\n      ? getAllHappyTriads()\n      : getAllSadTriads();\n\n    // FINDING: making nHeldSteps larger based on temperature makes the music more conservative,\n    // even for higher values of surprising. We choose to decide the most likely triad per\n    // quantization step to maintain the expectations of the surprising slider.\n    // const nHeldQSteps = this.mapTemperatureToNHeldSteps(temperature);\n    const nHeldQSteps = 1;\n    const nProgressions = nQSteps / nHeldQSteps;\n\n    const moodTriadPriorCandidatesJs = moodTriads.map(triad => {\n      return tf.tidy(() => {\n        const pitches = this.getTriadPitchBuffer(\n          predictions,\n          triad.key,\n          triad.quality,\n          true // to compute likelihood for each triad, we need a hard prior to use as a\n        );\n        // triad prior for n held steps\n        return pitches\n          .toTensor()\n          .expandDims(0)\n          .tile([nHeldQSteps, 1])\n          .expandDims(2)\n          .tile([1, 1, nVoices])\n          .expandDims(0)\n          .tile([nBatch, 1, 1, 1]) as tf.Tensor4D;\n      });\n    });\n    const moodTriadPriorCandidatesTf = tf.concat(moodTriadPriorCandidatesJs, 0);\n    const nCandidates = moodTriadPriorCandidatesTf.shape[0];\n    const triadProgressions: tf.Tensor4D[] = [];\n    for (let i = 0; i < nProgressions; i++) {\n      // check most likely triad at each progression\n      const predictionOverlap = predictions.slice(\n        [0, i * nHeldQSteps, 0, 0],\n        [nBatch, nHeldQSteps, nPitches, nVoices]\n      );\n      const predsPerCandidate = predictionOverlap.tile([nCandidates, 1, 1, 1]);\n      const triadLHs = tf\n        .mulStrict(predsPerCandidate, moodTriadPriorCandidatesTf)\n        .sum([1, 2, 3]);\n      const bestTriadIdx = tf.argMax(triadLHs);\n      const moodTriadPrior = moodTriadPriorCandidatesTf\n        .gather(bestTriadIdx, 0)\n        .expandDims(0) as tf.Tensor4D;\n      triadProgressions.push(moodTriadPrior);\n      predictionOverlap.dispose();\n      predsPerCandidate.dispose();\n      triadLHs.dispose();\n      bestTriadIdx.dispose();\n    }\n    moodTriadPriorCandidatesJs.forEach(prior => prior.dispose());\n    moodTriadPriorCandidatesTf.dispose();\n    return tf.tidy(() => {\n      const fullTriadProgressionPrior = tf.concat(triadProgressions, 1);\n      triadProgressions.forEach(prior => prior.dispose());\n      return fullTriadProgressionPrior;\n    });\n  }\n\n  private getRandomMoodPrior(\n    predictions: tf.Tensor4D,\n    moodConfig: MoodConfig,\n    temperature: number\n  ) {\n    if (moodConfig === undefined) {\n      return tf.onesLike(predictions);\n    }\n    const [nBatch, nQSteps, nPitches, nVoices] = predictions.shape;\n    const moodTriads = moodConfig.happy\n      ? getHappyTriadsForKey(moodConfig.key, moodConfig.mode)\n      : getSadTriadsForKey(moodConfig.key, moodConfig.mode);\n    const nHeldQSteps = this.mapTemperatureToNHeldSteps(temperature);\n    const nProgressions = nQSteps / nHeldQSteps;\n    const triadProgressions: tf.Tensor2D[] = [];\n    for (let i = 0; i < nProgressions; i++) {\n      const triadIdx = Math.floor(Math.random() * moodTriads.length);\n      const triad = moodTriads[triadIdx];\n      // triad prior for a single timestep\n      const pitches = this.getTriadPitchBuffer(\n        predictions,\n        triad.key,\n        triad.quality,\n        false\n      );\n      // triad prior for n held steps\n      const pitchPriorIthProgression = pitches\n        .toTensor()\n        .expandDims(0)\n        .tile([nHeldQSteps, 1]) as tf.Tensor2D;\n      triadProgressions.push(pitchPriorIthProgression);\n    }\n    return tf\n      .concat(triadProgressions, 0)\n      .expandDims(2)\n      .tile([1, 1, nVoices])\n      .expandDims(0)\n      .tile([nBatch, 1, 1, 1]) as tf.Tensor4D;\n  }\n\n  /*\n   private makeDumbSoftPrior(pianorolls: tf.Tensor4D): tf.Tensor4D {\n     return tf.tidy(() => {\n       const division = 4;\n       const lowPitches = Math.floor(pianorolls.shape[2] / division);\n       const highPitches = pianorolls.shape[2] - lowPitches;\n       return tf.concat([\n         tf.ones([1, pianorolls.shape[1], lowPitches, 4], 'float32'),\n         tf.zeros([1, pianorolls.shape[1], highPitches, 4], 'float32'),\n       ], 2);\n     });\n   }\n   */\n\n  private async gibbs(\n    pianorolls: tf.Tensor4D,\n    numSteps: number,\n    temperature: number,\n    outerMasks: tf.Tensor4D,\n    moodConfig: MoodConfig,\n    similarDifferentConfig: SimilarDifferentConfig\n  ): Promise<tf.Tensor4D> {\n    const numStepsTensor = tf.scalar(numSteps, 'float32');\n    let pianoroll = pianorolls.clone();\n    let softPriors;\n    // If not creating a mood prior, we can compute prior once before sampling steps\n    // Otherwise, we must recompute the prior every sampling step\n    if (!moodConfig) {\n      softPriors = this.priorOverOriginalNotes(\n        pianorolls,\n        similarDifferentConfig\n      );\n    }\n    for (let s = 0; s < numSteps; s++) {\n      const pm = this.yaoSchedule(s, numStepsTensor);\n      const innerMasks = this.bernoulliMask(pianoroll.shape, pm, outerMasks);\n      await tf.nextFrame();\n      const predictions = tf.tidy(() => {\n        return this.convnet.predictFromPianoroll(pianoroll, innerMasks);\n      }) as tf.Tensor4D;\n      await tf.nextFrame();\n      // If we want most likely mood triad progression, we must compute the prior based on prediction\n      if (moodConfig) {\n        softPriors = tf.tidy(() => {\n          const similarDifferentPrior = this.priorOverOriginalNotes(\n            pianorolls,\n            similarDifferentConfig\n          );\n          // FINDING: Our decision to nudged predictions with similar/differnt prior before computing\n          // the most likely mood prior based on predictions allows us to make queries that work like\n          // What would keeping similar notes like the original, but making it minor, look like?\n          const moodPrior = this.getMostLikelyMoodPrior(\n            this.nudgeWithPrior(predictions, similarDifferentPrior),\n            moodConfig,\n            temperature\n          );\n          // nudge goes from logspace back to probability space... and then we go back into log once again. Is there risks here?\n          return this.nudgeWithPrior(similarDifferentPrior, moodPrior);\n        });\n      }\n      const newPredictions = softPriors\n        ? this.nudgeWithPrior(predictions, softPriors)\n        : predictions;\n      await tf.nextFrame();\n      pianoroll = tf.tidy(() => {\n        const samples = this.samplePredictions(\n          newPredictions,\n          temperature\n        ) as tf.Tensor4D;\n        const updatedPianorolls = tf.where(\n          tf.cast(innerMasks, 'bool'),\n          samples,\n          pianoroll\n        );\n        pianoroll.dispose();\n        predictions.dispose();\n        newPredictions.dispose();\n        innerMasks.dispose();\n        pm.dispose();\n        return updatedPianorolls;\n      });\n      await tf.nextFrame();\n    }\n    numStepsTensor.dispose();\n    return pianoroll;\n  }\n\n  private yaoSchedule(i: number, n: tf.Scalar) {\n    return tf.tidy(() => {\n      const pmin = tf.scalar(0.1, 'float32');\n      const pmax = tf.scalar(0.9, 'float32');\n      const alpha = tf.scalar(0.7, 'float32');\n      const wat = pmax\n        .sub(pmin)\n        .mul(tf.scalar(i, 'float32'))\n        .div(n);\n      const secondArg = pmax.sub(wat).div(alpha);\n      return pmin\n        .reshape([1])\n        .concat(secondArg.reshape([1]))\n        .max();\n    });\n  }\n\n  private bernoulliMask(\n    shape: number[],\n    pm: tf.Tensor,\n    outerMasks: tf.Tensor4D\n  ): tf.Tensor4D {\n    return tf.tidy(() => {\n      const [bb, tt, pp, ii] = shape;\n      const probs = tf.tile(\n        tf.randomUniform([bb, tt, 1, ii], 0, 1, 'float32'),\n        [1, 1, pp, 1]\n      );\n      const masks = probs.less(pm);\n      return tf.cast(masks, 'float32').mul(outerMasks);\n    });\n  }\n\n  private nudgeWithPrior(\n    predictions: tf.Tensor4D,\n    softPriors: tf.Tensor4D\n  ): tf.Tensor4D {\n    return tf.tidy(() => {\n      const newPredictions = tf.add(\n        tf.log(predictions),\n        tf.log(softPriors)\n      ) as tf.Tensor4D;\n      return tf.exp(newPredictions);\n    });\n  }\n\n  private samplePredictions(\n    predictions: tf.Tensor4D,\n    temperature: number\n  ): tf.Tensor {\n    return tf.tidy(() => {\n      predictions = tf.pow(predictions, tf.scalar(1 / temperature, 'float32'));\n      const cmf = tf.cumsum(predictions, 2, false, false);\n      const totalMasses = cmf.slice(\n        [0, 0, cmf.shape[2] - 1, 0],\n        [cmf.shape[0], cmf.shape[1], 1, cmf.shape[3]]\n      );\n      const u = tf.randomUniform(totalMasses.shape, 0, 1, 'float32');\n      const i = u\n        .mul(totalMasses)\n        .less(cmf)\n        .argMax(2);\n      return tf\n        .oneHot(i.flatten(), predictions.shape[2], 1, 0)\n        .reshape([\n          predictions.shape[0],\n          predictions.shape[1],\n          predictions.shape[3],\n          predictions.shape[2],\n        ])\n        .transpose([0, 1, 3, 2]);\n    });\n  }\n}\n\nexport { Coconet };\n","/**\n * A library for common manipulations of `NoteSequence`s.\n *\n * @license\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { INoteSequence } from '@magenta/music';\n\n/**\n * Exception for when a sequence was unexpectedly quantized or unquantized.\n *\n * Should not happen during normal operation and likely indicates a programming\n * error.\n */\nexport class QuantizationStatusException extends Error {\n  constructor(message?: string) {\n    super(message);\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n}\n\n/**\n * Returns whether the given NoteSequence has been quantized relative to tempo.\n */\nexport function isRelativeQuantizedSequence(ns: INoteSequence) {\n  return ns.quantizationInfo && ns.quantizationInfo.stepsPerQuarter > 0;\n}\n\n/**\n * Confirms that the given NoteSequence has been quantized relative to tempo.\n */\nexport function assertIsRelativeQuantizedSequence(ns: INoteSequence) {\n  if (!isRelativeQuantizedSequence(ns)) {\n    throw new QuantizationStatusException(\n      `NoteSequence ${\n        ns.id\n      } is not quantized or is quantized based on absolute timing`\n    );\n  }\n}\n","/**\n * Utility functions for the [Coconet]{@link} model.\n *\n * @license\n * Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Imports\n */\nimport * as tf from '@tensorflow/tfjs-core';\nimport { INoteSequence, NoteSequence } from '@magenta/music';\nimport * as logging from './magenta/logging';\n\nexport const IS_IOS = /iPad|iPhone|iPod/.test(navigator.userAgent);\n\n// The length of the pitch array in Pianoroll.\nexport const NUM_PITCHES = 46;\n// The pitch array in Pianoroll is shifted so that index 0 is MIN_PITCH.\nexport const MIN_PITCH = 36;\n// Number of voices used in the model. 0 represents Soprano, 1 Alto,\n// 2 Tenor and 3 is Bass.\nexport const NUM_VOICES = 4;\n\n/**\n * Converts a pianoroll representation to a `NoteSequence`. Note that since\n * the pianoroll representation can't distinguish between multiple eighth notes\n * and held notes, the resulting `NoteSequence` won't either.\n *\n * @param pianoroll Tensor of shape `[steps][NUM_PITCHES][NUM_VOICES]`,\n * where each entry represents an instrument being played at a particular step\n * and for a particular pitch. For example, `pianoroll[0][64] =[0, 0, 1, 0]`\n * means that the third instrument plays pitch 64 at time 0.\n * @param numberOfSteps The number of quantized steps in the sequence.\n * @returns A `NoteSequence`.\n */\nexport function pianorollToSequence(\n  pianoroll: tf.Tensor4D,\n  numberOfSteps: number\n): NoteSequence {\n  // First reshape the flat tensor so that it's shaped [steps][NUM_PITCHES][4].\n  const reshaped = tf.tidy(\n    () =>\n      pianoroll\n        .reshape([numberOfSteps, NUM_PITCHES, NUM_VOICES])\n        .arraySync() as number[][][]\n  );\n  const sequence = NoteSequence.create();\n  const notes: NoteSequence.Note[] = [];\n\n  for (let s = 0; s < numberOfSteps; s++) {\n    for (let p = 0; p < NUM_PITCHES; p++) {\n      for (let v = 0; v < NUM_VOICES; v++) {\n        const value = reshaped[s][p][v];\n        // If this note is on, then it's being played by a voice and\n        // it should be added to the note sequence.\n        if (value === 1.0) {\n          const note = NoteSequence.Note.create({\n            pitch: p + MIN_PITCH,\n            instrument: v,\n            quantizedStartStep: s,\n            quantizedEndStep: s + 1,\n          });\n          notes.push(note);\n        }\n      }\n    }\n  }\n  sequence.notes = notes;\n  sequence.totalQuantizedSteps = notes[notes.length - 1].quantizedEndStep;\n  sequence.quantizationInfo = { stepsPerQuarter: 4 };\n  return sequence;\n}\n\n/**\n * Converts a `NoteSequence` to a pianoroll representation. This sequence\n * needs to contain notes with a valid set of instruments, representing the\n * voices in a Bach harmony: 0 is Soprano, 1 is Alto, 2 Tenor and 3 Bass. Any\n * notes with instruments outside of this range are ignored. Note that this\n * pianoroll representation can't distinguish between multiple eighth notes and\n * held notes, so that information will be lost.\n *\n * @param ns A quantized `NoteSequence` with at least one note.\n * @param numberOfSteps The number of quantized steps in the sequence.\n * @returns A Tensor of shape `[numberOfSteps][NUM_PITCHES][NUM_VOICES]`\n * where each entry represents an instrument being played at a particular\n * step and for a particular pitch. For example,\n * `pianoroll[0][64] = [0, 0, 1, 0]` means that the third instrument plays\n * pitch 64 at time 0.\n */\nexport function sequenceToPianoroll(\n  ns: INoteSequence,\n  numberOfSteps: number\n): tf.Tensor4D {\n  const pianoroll = tf.tidy(\n    () =>\n      tf\n        .zeros([numberOfSteps, NUM_PITCHES, NUM_VOICES])\n        .arraySync() as number[][][]\n  );\n  const notes = ns.notes;\n  notes.forEach(note => {\n    const pitchIndex = note.pitch - MIN_PITCH;\n    const stepIndex = note.quantizedStartStep;\n    const duration = note.quantizedEndStep - note.quantizedStartStep;\n    const voice = note.instrument;\n\n    if (voice < 0 || voice >= NUM_VOICES) {\n      logging.log(\n        `Found invalid voice ${voice}. Skipping.`,\n        'Coconet',\n        logging.Level.WARN\n      );\n    } else {\n      if (stepIndex + duration > numberOfSteps) {\n        throw new Error(\n          `NoteSequence ${ns.id} has notes that are longer than the sequence's\n          totalQuantizedSteps.`\n        );\n      }\n      for (let i = stepIndex; i < stepIndex + duration; i++) {\n        pianoroll[i][pitchIndex][voice] = 1;\n      }\n    }\n  });\n  return tf.tensor([pianoroll]);\n}\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport React from 'react';\nimport _ from 'lodash';\nimport { observable } from 'mobx';\nimport {\n  EditorTool,\n  editor,\n  generator,\n  masks,\n  player,\n  layout,\n  undo,\n} from './index';\nimport { MAX_PITCH, MIN_PITCH } from './constants';\nimport logging, { Events } from './logging';\nimport { Note, Source } from './note';\nimport featureFlags from './feature-flags';\n\n/**\n * @param position position in sixteenths\n * @param quantizeFn Math.round for nearest, Math.floor for previous\n */\nfunction quantizePosition(position: number, quantizeFn = Math.round) {\n  return quantizeFn(position / editor.quantizeStep) * editor.quantizeStep;\n}\n\nfunction getQuantizedPositionFromX(x: number) {\n  const width = layout.notesWidth;\n  const position = Math.floor((x / width) * editor.totalSixteenths);\n  return quantizePosition(clampPosition(position), Math.floor);\n}\n\nfunction clampPosition(position: number, endPosition = false) {\n  return _.clamp(position, 0, editor.totalSixteenths - (endPosition ? 0 : 1));\n}\n\nfunction clampPitch(pitch: number) {\n  return _.clamp(pitch, MIN_PITCH, MAX_PITCH);\n}\n\nclass Interactions {\n  constructor() {\n    const { baseline } = featureFlags;\n    this.emptyMaskDeselectsAll = baseline ? true : false;\n  }\n\n  /**\n   * Note Interactions\n   * ===========================================================================\n   */\n  private noteDragStartX = 0;\n  private noteDragStartY = 0;\n  private noteDragStartPosition = 0;\n  private noteDragStartPitch = 0;\n\n  handleNoteHover = (note: Note) => (e: React.MouseEvent) => {\n    if (this.isEraseToolDragging) {\n      editor.removeNote(note);\n    }\n  };\n\n  // TODO: Let's make this a more reasonable system - position drag is disabled\n  // for now because of overlapping voice\n  private handleNoteDrag = (note: Note) => (e: MouseEvent) => {\n    const deltaX = e.clientX - this.noteDragStartX;\n    const deltaY = e.clientY - this.noteDragStartY;\n\n    const deltaPosition = Math.floor(deltaX / layout.sixteenthWidth);\n    const deltaPitch = Math.floor(deltaY / layout.noteHeight);\n\n    const deltaQuantized = quantizePosition(deltaPosition);\n    const nextPosition = clampPosition(\n      this.noteDragStartPosition + deltaQuantized\n    );\n    const nextPitch = clampPitch(this.noteDragStartPitch - deltaPitch);\n    const isInScale = editor.isPitchInScale(nextPitch);\n    const canMoveNote = editor.constrainToKey ? isInScale : true;\n\n    if (!canMoveNote) return;\n    if (nextPosition !== note.position || nextPitch !== note.pitch) {\n      // Disabled temporarily until we sort out the way to handle note overlaps\n      // note.position = nextPosition;\n      note.pitch = nextPitch;\n      player.playNote(note);\n    }\n  };\n\n  handleStartNoteDrag(note: Note, e: React.MouseEvent) {\n    editor.startNoteDrag();\n    e.preventDefault();\n\n    this.noteDragStartX = e.clientX;\n    this.noteDragStartY = e.clientY;\n    this.noteDragStartPosition = note.position;\n    this.noteDragStartPitch = note.pitch;\n\n    const mouseMove = this.handleNoteDrag(note);\n    const mouseUp = () => {\n      editor.endNoteDrag(note);\n      document.removeEventListener('mousemove', mouseMove);\n      document.removeEventListener('mouseup', mouseUp);\n    };\n    document.addEventListener('mousemove', mouseMove);\n    document.addEventListener('mouseup', mouseUp);\n  }\n\n  handleNoteMouseDown = (note: Note) => (e: React.MouseEvent) => {\n    if (editor.selectedTool === EditorTool.ERASE) {\n      editor.removeNote(note);\n    } else if (editor.selectedTool === EditorTool.DRAW) {\n      this.handleStartNoteDrag(note, e);\n    }\n  };\n\n  /**\n   * Loop Interactions\n   * ===========================================================================\n   */\n  private loopStartDragStartX = 0;\n  private loopEndDragStartX = 0;\n  private loopStartDragStartPosition = 0;\n  private loopEndDragStartPosition = 0;\n\n  private handleLoopStartDrag = (e: MouseEvent) => {\n    const deltaX = e.clientX - this.loopStartDragStartX;\n\n    const deltaPosition = Math.floor(deltaX / layout.sixteenthWidth);\n\n    const deltaQuantized = quantizePosition(deltaPosition);\n    const nextPosition = clampPosition(\n      this.loopStartDragStartPosition + deltaQuantized,\n      true\n    );\n\n    if (nextPosition !== player.loopStart && nextPosition < player.loopEnd) {\n      player.loopStart = nextPosition;\n    }\n  };\n\n  private handleLoopEndDrag = (e: MouseEvent) => {\n    const deltaX = e.clientX - this.loopEndDragStartX;\n\n    const deltaPosition = Math.floor(deltaX / layout.sixteenthWidth);\n\n    const deltaQuantized = quantizePosition(deltaPosition);\n    const nextPosition = clampPosition(\n      this.loopEndDragStartPosition + deltaQuantized,\n      true\n    );\n\n    if (nextPosition !== player.loopEnd && nextPosition > player.loopStart) {\n      player.loopEnd = nextPosition;\n    }\n  };\n\n  handleLoopStartMouseDown = (e: React.MouseEvent) => {\n    e.preventDefault();\n\n    this.loopStartDragStartX = e.clientX;\n    this.loopStartDragStartPosition = player.loopStart;\n\n    const mouseMove = this.handleLoopStartDrag;\n    const mouseUp = () => {\n      logging.logEvent(Events.CHANGE_LOOP, [player.loopStart, player.loopEnd]);\n      document.removeEventListener('mousemove', mouseMove);\n      document.removeEventListener('mouseup', mouseUp);\n    };\n    document.addEventListener('mousemove', mouseMove);\n    document.addEventListener('mouseup', mouseUp);\n  };\n\n  handleLoopEndMouseDown = (e: React.MouseEvent) => {\n    e.preventDefault();\n\n    this.loopEndDragStartX = e.clientX;\n    this.loopEndDragStartPosition = player.loopEnd;\n\n    const mouseMove = this.handleLoopEndDrag;\n    const mouseUp = () => {\n      logging.logEvent(Events.CHANGE_LOOP, [player.loopStart, player.loopEnd]);\n      document.removeEventListener('mousemove', mouseMove);\n      document.removeEventListener('mouseup', mouseUp);\n    };\n    document.addEventListener('mousemove', mouseMove);\n    document.addEventListener('mouseup', mouseUp);\n  };\n\n  /**\n   * Grid Interactions\n   * ===========================================================================\n   */\n\n  handleGridClick(scaleIndex: number, divisionIndex: number) {\n    if (editor.selectedTool !== EditorTool.DRAW) {\n      return;\n    }\n\n    const value = editor.getPitchFromScaleIndex(scaleIndex);\n    const position = divisionIndex * editor.quantizeStep;\n    const duration = editor.quantizeStep;\n    const note = new Note(value, position, duration);\n\n    editor.addNote(note);\n    player.playNote(note);\n  }\n\n  @observable isMaskToolDragging = false;\n  @observable isEraseToolDragging = false;\n  @observable isDrawToolDragging = false;\n\n  private gridBounds: DOMRect;\n\n  private handleDrawMouseDown = (\n    scaleIndex: number,\n    divisionIndex: number,\n    e: React.MouseEvent\n  ) => {\n    const pitch = editor.getPitchFromScaleIndex(scaleIndex);\n    const voice = editor.selectedVoice;\n    const position = divisionIndex * editor.quantizeStep;\n    const duration = editor.quantizeStep;\n\n    if (editor.constrainToKey) {\n      if (!editor.isPitchInScale(pitch)) return;\n    }\n\n    const note = new Note(pitch, position, duration, Source.USER, voice);\n    const editorGrid = document.getElementById('editor-grid')!;\n    this.gridBounds = editorGrid.getBoundingClientRect() as DOMRect;\n\n    editor.beginDrawingNote(note);\n    player.playNote(note);\n  };\n\n  handleDrawMouseMove = (e: MouseEvent) => {\n    const noteBeingDrawn = editor.noteBeingDrawn;\n    if (!noteBeingDrawn) {\n      return;\n    }\n    const gridX = e.clientX - this.gridBounds.x;\n    const gridPosition = getQuantizedPositionFromX(gridX);\n\n    const shouldUpdateDrawn =\n      gridPosition >= noteBeingDrawn.position &&\n      gridPosition + editor.quantizeStep !== noteBeingDrawn.end;\n    if (shouldUpdateDrawn) {\n      noteBeingDrawn.moveEnd(gridPosition + editor.quantizeStep);\n      editor.trimNoteBeingDrawnSequence(); // Trims overlapping notes in the sequence\n    }\n  };\n\n  handleGridMouseDown = (scaleIndex: number, divisionIndex: number) => (\n    e: React.MouseEvent\n  ) => {\n    let toolMouseUp: () => void = () => {};\n    let mouseMove: (e: MouseEvent) => void = () => {};\n\n    if (editor.selectedTool === EditorTool.ERASE) {\n      this.isEraseToolDragging = true;\n      toolMouseUp = () => (this.isEraseToolDragging = false);\n    } else if (editor.selectedTool === EditorTool.DRAW) {\n      this.isDrawToolDragging = true;\n      toolMouseUp = () => {\n        this.isDrawToolDragging = false;\n        editor.endDrawingNote();\n      };\n      this.handleDrawMouseDown(scaleIndex, divisionIndex, e);\n      mouseMove = this.handleDrawMouseMove;\n    }\n\n    const mouseUp = () => {\n      toolMouseUp();\n      document.removeEventListener('mousemove', mouseMove);\n      document.removeEventListener('mouseup', mouseUp);\n    };\n    document.addEventListener('mousemove', mouseMove);\n    document.addEventListener('mouseup', mouseUp);\n  };\n\n  /**\n   * Mask Tool Interactions\n   * ===========================================================================\n   */\n  private maskToolDragStartClientXY = [0, 0];\n  @observable maskToolDragStartXY = [0, 0];\n  @observable maskToolDragXY = [0, 0];\n  private maskToolShiftDrag = false;\n  private emptyMaskDeselectsAll = false; // To be set in baseline mode\n\n  handleMaskToolDrag = (e: MouseEvent) => {\n    this.maskToolDragXY = [\n      e.clientX -\n        this.maskToolDragStartClientXY[0] +\n        this.maskToolDragStartXY[0],\n      e.clientY -\n        this.maskToolDragStartClientXY[1] +\n        this.maskToolDragStartXY[1],\n    ];\n  };\n\n  handleMaskToolMouseDown = (e: React.MouseEvent<SVGRectElement>) => {\n    e.preventDefault();\n    this.maskToolShiftDrag = e.shiftKey;\n    const target = e.target as SVGRectElement;\n    const dim = target.getBoundingClientRect();\n    this.maskToolDragStartXY = [e.clientX - dim.left, e.clientY - dim.top];\n    this.maskToolDragXY = [e.clientX - dim.left, e.clientY - dim.top];\n    this.maskToolDragStartClientXY = [e.clientX, e.clientY];\n\n    this.isMaskToolDragging = true;\n\n    const mouseUp = () => {\n      let [aX, aY] = this.maskToolDragStartXY;\n      const [bX, bY] = this.maskToolDragXY;\n      const startX = aX <= bX ? aX : bX;\n      const startY = aY <= bY ? aY : bY;\n      const endX = aX > bX ? aX : bX;\n      const endY = aY > bY ? aY : bY;\n\n      const positionRange = [\n        quantizePosition(startX / layout.sixteenthWidth, Math.floor),\n        quantizePosition(endX / layout.sixteenthWidth, Math.ceil),\n      ];\n      const pitchRange = [\n        MAX_PITCH - Math.floor(endY / layout.noteHeight),\n        MAX_PITCH - Math.floor(startY / layout.noteHeight),\n      ];\n\n      undo.beginUndoable('maskTool.drawMasks');\n      const notesInRange = editor.getNotesInRange(positionRange, pitchRange);\n      if (notesInRange.length === 0 && this.emptyMaskDeselectsAll) {\n        masks.clearMasks();\n      } else {\n        const replaceMask = !this.maskToolShiftDrag;\n        if (generator.candidateSequences.length > 0) {\n          generator.commitSelectedCandidateSequence();\n          logging.logEvent(Events.IMPLICITLY_COMMIT_CANDIDATE, masks.userMasks);\n        }\n\n        masks.maskNotes(notesInRange, replaceMask);\n      }\n      undo.completeUndoable('maskTool.drawMasks');\n\n      logging.logEvent(Events.USE_MASK_TOOL, masks.userMasks);\n\n      this.isMaskToolDragging = false;\n      this.maskToolDragStartClientXY = [0, 0];\n      this.maskToolDragStartXY = [0, 0];\n      this.maskToolDragXY = [0, 0];\n      this.maskToolShiftDrag = false;\n      document.removeEventListener('mousemove', this.handleMaskToolDrag);\n      document.removeEventListener('mouseup', mouseUp);\n    };\n    document.addEventListener('mousemove', this.handleMaskToolDrag);\n    document.addEventListener('mouseup', mouseUp);\n  };\n\n  /**\n   * Mask Lane Interactions\n   * ===========================================================================\n   */\n  private maskLaneDragStartX = 0;\n  private maskLaneDragX = 0;\n  private maskLaneDragStartClientX = 0;\n  private hasMaskDragMoved = false;\n  private maskLaneShiftDrag = false;\n\n  handleMaskLaneMouseDown = (voiceIndex, candidateSequencesExist = false) => (\n    e: React.MouseEvent<SVGRectElement>\n  ) => {\n    undo.beginUndoable('masks.drawMaskLane');\n    this.maskLaneShiftDrag = e.shiftKey;\n\n    if (candidateSequencesExist) {\n      generator.commitSelectedCandidateSequence();\n      logging.logEvent(Events.IMPLICITLY_COMMIT_CANDIDATE, masks.userMasks);\n    }\n\n    e.preventDefault();\n    const editorGrid = document.getElementById('editor-grid')!;\n    const dim = editorGrid.getBoundingClientRect() as DOMRect;\n\n    this.maskLaneDragStartX = e.clientX - dim.left;\n    this.maskLaneDragX = e.clientX - dim.left;\n    this.maskLaneDragStartClientX = e.clientX;\n    this.hasMaskDragMoved = false;\n\n    const mouseMove = (e: MouseEvent) => {\n      this.maskLaneDragX =\n        e.clientX - this.maskLaneDragStartClientX + this.maskLaneDragStartX;\n      const deltaX = this.maskLaneDragStartX - this.maskLaneDragX;\n      if (deltaX !== 0) {\n        this.hasMaskDragMoved = true;\n      }\n\n      let aX = this.maskLaneDragStartX;\n      const bX = this.maskLaneDragX;\n      const startX = aX <= bX ? aX : bX;\n      const endX = aX > bX ? aX : bX;\n\n      const startPosition = clampPosition(\n        quantizePosition(startX / layout.sixteenthWidth, Math.floor),\n        true\n      );\n      const endPosition = clampPosition(\n        quantizePosition(endX / layout.sixteenthWidth, Math.ceil),\n        true\n      );\n\n      const range = _.range(startPosition, endPosition);\n      if (this.maskLaneShiftDrag) {\n        masks.addMask(voiceIndex, range);\n      } else {\n        masks.setMask(voiceIndex, range);\n      }\n    };\n\n    const mouseUp = () => {\n      if (!this.hasMaskDragMoved) {\n        const { loopStart, loopEnd } = player;\n        const range = _.range(loopStart, loopEnd);\n        if (this.maskLaneShiftDrag) {\n          masks.addMask(voiceIndex, range);\n        } else {\n          masks.setMask(voiceIndex, range);\n        }\n      }\n\n      logging.logEvent(Events.USE_MASK_LANE, masks.userMasks);\n      this.hasMaskDragMoved = false;\n      undo.completeUndoable('masks.drawMaskLane');\n\n      document.removeEventListener('mouseup', mouseUp);\n      document.removeEventListener('mousemove', mouseMove);\n    };\n\n    document.addEventListener('mousemove', mouseMove);\n    document.addEventListener('mouseup', mouseUp);\n  };\n\n  handleMaskRectClick = (\n    voiceIndex: number,\n    maskIndices: number[],\n    pendingCandidateSequences = false\n  ) => () => {\n    if (!this.hasMaskDragMoved) {\n      if (pendingCandidateSequences) {\n        generator.commitSelectedCandidateSequence();\n        logging.logEvent(Events.IMPLICITLY_COMMIT_CANDIDATE, masks.userMasks);\n      } else {\n        masks.removeMask(voiceIndex, maskIndices);\n      }\n      logging.logEvent(Events.USE_MASK_LANE, masks.userMasks);\n    }\n  };\n}\n\nexport default new Interactions();\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport player from './player';\nimport editor, { EditorTool } from './editor';\nimport saveLoad from './save-load';\nimport undo from './undo';\nimport { Voice } from './note';\nimport { debounce } from 'lodash';\n\nconst DEBOUNCE_TIME_MS = 100;\n\nclass KeyboardManager {\n  constructor() {\n    document.addEventListener('keydown', this.handleKeyDown, false);\n  }\n\n  handlePlayPause = debounce(() => {\n    player.togglePlay();\n  }, DEBOUNCE_TIME_MS);\n\n  handleKeyDown = (e: KeyboardEvent) => {\n    if (e.key === ' ') {\n      this.handlePlayPause();\n    } else if (e.key === 's' && !e.metaKey) {\n      editor.selectVoice(Voice.SOPRANO);\n      editor.selectTool(EditorTool.DRAW, false /** logging */);\n    } else if (e.key === 'a' && !e.metaKey) {\n      editor.selectVoice(Voice.ALTO);\n      editor.selectTool(EditorTool.DRAW, false /** logging */);\n    } else if (e.key === 't' && !e.metaKey) {\n      editor.selectVoice(Voice.TENOR);\n      editor.selectTool(EditorTool.DRAW, false /** logging */);\n    } else if (e.key === 'b' && !e.metaKey) {\n      editor.selectVoice(Voice.BASS);\n      editor.selectTool(EditorTool.DRAW, false /** logging */);\n    } else if (e.key === 'z' && e.metaKey && !e.shiftKey) {\n      undo.undo();\n    } else if (e.key === 'z' && e.metaKey && e.shiftKey) {\n      undo.redo();\n    } else if (e.key === 's' && e.metaKey) {\n      e.preventDefault();\n      saveLoad.saveJSON();\n      return false;\n    } else if (e.key === 'l' && e.metaKey) {\n      e.preventDefault();\n      saveLoad.loadJSON();\n      return false;\n    } else if (e.key === 'Backspace') {\n      editor.removeMaskedNotes();\n    }\n  };\n}\n\nexport default new KeyboardManager();\n","module.exports = (__webpack_require__(1))(187);","import { undo } from '../core';\nimport { getDateString } from './utils';\nimport featureFlags from './feature-flags';\nimport logging, { Events } from './logging';\n\nexport class SaveLoad {\n  saveJSON() {\n    const state = undo.getUndoStep();\n    logging.logEvent(Events.SAVE_STATE, state);\n    const json = JSON.stringify(state);\n    const blob = new Blob([json], { type: 'application/json' });\n    const ffMeta = `${featureFlags.id}_variant-${featureFlags.variant}`;\n    this.downloadBlob(blob, `cococo_state_${getDateString()}_${ffMeta}`);\n  }\n\n  loadJSON() {\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.click();\n\n    input.onchange = (e: any) => {\n      const file = e.target.files[0];\n\n      const reader = new FileReader();\n      reader.readAsText(file, 'UTF-8');\n\n      reader.onload = (readerEvent: any) => {\n        var content = readerEvent.target.result;\n        const state = JSON.parse(content);\n        console.log(state);\n        undo.rehydrateStep(state);\n      };\n    };\n  }\n\n  private downloadBlob(blob: Blob, filename: string) {\n    const url = URL.createObjectURL(blob);\n\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename || 'download';\n\n    const clickHandler = () => {\n      setTimeout(() => {\n        URL.revokeObjectURL(url);\n        a.removeEventListener('click', clickHandler);\n      }, 150);\n    };\n\n    a.addEventListener('click', clickHandler, false);\n    a.click();\n  }\n}\n\nexport default new SaveLoad();\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport { computed, observable } from 'mobx';\n\nimport editor from './editor';\nimport featureFlags from './feature-flags';\nimport {\n  DEFAULT_EDITOR_WIDTH,\n  DEFAULT_SEQUENCES_WIDTH,\n  PIANO_ROLL_WIDTH,\n  MASK_LANE_HEIGHT,\n  LOOP_HANDLE_HEIGHT,\n  LOOP_HANDLE_MARGIN,\n} from './constants';\n\nclass Layout {\n  constructor() {\n    window.onresize = () => this.handleResize();\n    this.handleResize();\n  }\n\n  computeEditorHeight() {\n    const editorContainer = document.getElementById('editor-container');\n    if (editorContainer) {\n      const { height } = editorContainer.getBoundingClientRect();\n      this.editorHeight = height;\n    }\n  }\n\n  handleResize() {\n    const { innerWidth } = window;\n    const defaultAppWidth = DEFAULT_EDITOR_WIDTH + DEFAULT_SEQUENCES_WIDTH;\n    const appWidth = Math.min(innerWidth, defaultAppWidth);\n\n    this.sequencesWidth = DEFAULT_SEQUENCES_WIDTH;\n    this.editorWidth = appWidth - this.sequencesWidth;\n  }\n\n  @observable editorHeight = 0;\n  @observable editorWidth = 1200;\n\n  @observable controlsHeight = 50;\n  @observable sequencesWidth = 200;\n  @observable sequenceHeight = 80;\n  @observable loopHandleHeight = LOOP_HANDLE_HEIGHT;\n  @observable loopHandleMargin = LOOP_HANDLE_MARGIN;\n\n  @computed get maskLanesHeight() {\n    return featureFlags.baseline ? 0 : 4 * MASK_LANE_HEIGHT;\n  }\n\n  @computed get pianoRollWidth() {\n    const computedWidth = this.editorHeight / 20;\n    return Math.max(PIANO_ROLL_WIDTH, computedWidth);\n  }\n\n  @computed get notesHeight() {\n    return (\n      this.editorHeight -\n      this.loopHandleHeight -\n      this.maskLanesHeight -\n      this.loopHandleMargin\n    );\n  }\n\n  @computed get notesWidth() {\n    return this.editorWidth - this.pianoRollWidth;\n  }\n\n  @computed get noteHeight() {\n    return this.notesHeight / editor.scale.length;\n  }\n\n  @computed get sixteenthWidth() {\n    return this.notesWidth / editor.totalSixteenths;\n  }\n\n  @computed get maskLanesY() {\n    return this.loopHandleHeight + this.loopHandleMargin;\n  }\n\n  @computed get notesY() {\n    return this.maskLanesY + this.maskLanesHeight;\n  }\n}\n\nexport default new Layout();\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar pink = {\n  50: '#fce4ec',\n  100: '#f8bbd0',\n  200: '#f48fb1',\n  300: '#f06292',\n  400: '#ec407a',\n  500: '#e91e63',\n  600: '#d81b60',\n  700: '#c2185b',\n  800: '#ad1457',\n  900: '#880e4f',\n  A100: '#ff80ab',\n  A200: '#ff4081',\n  A400: '#f50057',\n  A700: '#c51162'\n};\nvar _default = pink;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar red = {\n  50: '#ffebee',\n  100: '#ffcdd2',\n  200: '#ef9a9a',\n  300: '#e57373',\n  400: '#ef5350',\n  500: '#f44336',\n  600: '#e53935',\n  700: '#d32f2f',\n  800: '#c62828',\n  900: '#b71c1c',\n  A100: '#ff8a80',\n  A200: '#ff5252',\n  A400: '#ff1744',\n  A700: '#d50000'\n};\nvar _default = red;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar yellow = {\n  50: '#fffde7',\n  100: '#fff9c4',\n  200: '#fff59d',\n  300: '#fff176',\n  400: '#ffee58',\n  500: '#ffeb3b',\n  600: '#fdd835',\n  700: '#fbc02d',\n  800: '#f9a825',\n  900: '#f57f17',\n  A100: '#ffff8d',\n  A200: '#ffff00',\n  A400: '#ffea00',\n  A700: '#ffd600'\n};\nvar _default = yellow;\nexports.default = _default;","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport React from 'react';\nimport { observer } from 'mobx-react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport Switch from '@material-ui/core/Switch';\n\nimport { KEY_NAMES, MODE_NAMES } from '../core/constants';\nimport { editor, generator } from '../core';\n\nimport { Spacer } from './spacer';\n\nexport interface Props {\n  isDialogOpen: boolean;\n  onRequestClose: () => void;\n}\n\n@observer\nexport class KeySignatures extends React.Component<Props, {}> {\n  render() {\n    return (\n      <Dialog\n        disableBackdropClick\n        disableEscapeKeyDown\n        open={this.props.isDialogOpen}\n        onClose={() => this.props.onRequestClose()}\n      >\n        <DialogTitle>Edit Key</DialogTitle>\n        <DialogContent>\n          <form>\n            <FormControl>\n              <Select\n                value={editor.key}\n                onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n                  const value = e.target.value;\n                  if (value) editor.selectKey(value);\n                }}\n                autoWidth\n              >\n                {KEY_NAMES.map(key => {\n                  return (\n                    <MenuItem key={key} value={key}>\n                      {key}\n                    </MenuItem>\n                  );\n                })}\n              </Select>\n              <FormHelperText style={{ width: 60 }}>Key</FormHelperText>\n            </FormControl>\n            <Spacer width={30} />\n            <FormControl>\n              <Select\n                value={editor.mode}\n                onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n                  const value = e.target.value;\n                  if (value) editor.selectMode(value);\n                }}\n                autoWidth\n              >\n                {MODE_NAMES.map(mode => {\n                  return (\n                    <MenuItem key={mode} value={mode}>\n                      {mode}\n                    </MenuItem>\n                  );\n                })}\n              </Select>\n              <FormHelperText style={{ width: 100 }}>Mode</FormHelperText>\n            </FormControl>\n          </form>\n          <div>\n            <FormControlLabel\n              control={\n                <Switch\n                  checked={editor.constrainToKey}\n                  onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\n                    editor.setConstrainToKey(e.target.checked)\n                  }\n                  value={editor.constrainToKey}\n                  color=\"primary\"\n                />\n              }\n              label=\"Restrict note editing to key\"\n            />\n          </div>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => this.props.onRequestClose()} color=\"primary\">\n            Ok\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n","export { default } from './DialogActions';","export { default } from './DialogContent';","export { default } from './DialogTitle';","export { default } from './FormControlLabel';","export { default } from './Switch';","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport React from 'react';\nimport { observer } from 'mobx-react';\nimport { style } from 'typestyle';\n\nimport { editor, layout, EditorTool } from '../core';\n\nimport { PianoRoll } from './piano-roll';\nimport { Filters } from './filters';\nimport { Grid } from './grid';\nimport { Group } from './group';\nimport { LoopOverlay } from './loop-overlay';\nimport { MaskLanes } from './mask-lanes';\nimport { Notes } from './notes';\nimport { LoopHandles } from './loop-handles';\nimport { MasksSelect } from './masks-select';\nimport featureFlags from '../core/feature-flags';\n\nexport interface Props {}\n\n@observer\nexport class Editor extends React.Component<Props> {\n  componentDidMount() {\n    // We need to compute the editor height after all initial components are\n    // laid out, since the height is dependent on the flex layout of subsequent\n    // components in the react tree.\n    setTimeout(() => layout.computeEditorHeight(), 100);\n  }\n\n  render() {\n    const {\n      noteHeight,\n      pianoRollWidth,\n      maskLanesHeight,\n      editorWidth,\n      editorHeight,\n      notesWidth,\n      notesHeight,\n      loopHandleHeight,\n    } = layout;\n\n    const isMaskToolSelected = editor.selectedTool === EditorTool.MASK;\n\n    const editorContainerStyle = style({\n      flexGrow: 1,\n      maxHeight: 1000,\n    });\n\n    return (\n      <div id=\"editor-container\" className={editorContainerStyle}>\n        {editorHeight > 0 ? (\n          <svg width={editorWidth} height={editorHeight}>\n            <Filters />\n            <Group x={pianoRollWidth}>\n              <LoopHandles width={notesWidth} height={loopHandleHeight} />\n            </Group>\n            {featureFlags.baseline ? null : (\n              <Group y={layout.maskLanesY}>\n                <MaskLanes\n                  width={notesWidth}\n                  height={maskLanesHeight}\n                  labelWidth={pianoRollWidth}\n                />\n              </Group>\n            )}\n            <Group\n              y={layout.notesY}\n              onMouseLeave={() => editor.setNoteHoverName(null)}\n            >\n              <PianoRoll\n                width={pianoRollWidth}\n                height={notesHeight}\n                noteHeight={noteHeight}\n              />\n              <Group x={pianoRollWidth}>\n                <Grid width={notesWidth} noteHeight={noteHeight} />\n                <Notes width={notesWidth} noteHeight={noteHeight} />\n              </Group>\n            </Group>\n            <Group x={pianoRollWidth} y={loopHandleHeight}>\n              <LoopOverlay\n                width={notesWidth}\n                height={notesHeight + maskLanesHeight}\n              />\n              >\n            </Group>\n            <Group y={layout.notesY} x={pianoRollWidth}>\n              {isMaskToolSelected && (\n                <MasksSelect width={notesWidth} height={notesHeight} />\n              )}\n            </Group>\n          </svg>\n        ) : null}\n      </div>\n    );\n  }\n}\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport React from 'react';\nimport { style } from 'typestyle';\nimport { observer } from 'mobx-react';\n\nimport { editor, player } from '../core';\nimport { COLOR_PLAYING, COLOR_SECONDARY, COLOR_PRIMARY } from '../core/theme';\nimport { ScaleValue } from '../core/editor';\nimport logging, { Events } from '../core/logging';\nimport { Note } from '../core/note';\nimport blue from '@material-ui/core/colors/blue';\n\nimport { Group } from './group';\n\nexport interface Props {\n  width: number;\n  height: number;\n  noteHeight: number;\n}\n\n@observer\nexport class PianoRoll extends React.Component<Props> {\n  render() {\n    const { noteHeight, width } = this.props;\n\n    return (\n      <g\n        y={0}\n        width={width}\n        onMouseEnter={() => {\n          document.body.style.cursor = 'pointer';\n        }}\n        onMouseLeave={() => {\n          document.body.style.cursor = 'default';\n        }}\n      >\n        {editor.scale.map((scaleValue: ScaleValue, index: number) => {\n          const keyProps = { scaleValue, index, height: noteHeight, width };\n          return <Key {...keyProps} />;\n        })}\n      </g>\n    );\n  }\n}\n\ninterface KeyProps {\n  scaleValue: ScaleValue;\n  index: number;\n  width: number;\n  height: number;\n}\n\n@observer\nclass Key extends React.Component<KeyProps> {\n  render() {\n    const { width, height, index, scaleValue } = this.props;\n    const y = height * index;\n\n    const isActive = editor.activeNoteValue === scaleValue.pitch;\n    const isWhite = scaleValue.name.length === 1;\n    let fill = isWhite ? 'white' : 'black';\n\n    fill = isActive ? COLOR_PLAYING : fill;\n    const fadeDuration = isActive ? 0 : 0.5;\n\n    const rectStyle = style({\n      transition: `fill ${fadeDuration}s`,\n      fill,\n      stroke: '#CCC',\n      strokeWidth: 1,\n    });\n\n    const isInScale = editor.isPitchInScale(scaleValue.pitch);\n    const isRoot = editor.key === scaleValue.name;\n    const highlightFill = isRoot ? blue[600] : blue[200];\n    const highlightSize = 5;\n\n    return (\n      <Group x={0} y={y}>\n        <rect\n          key={index}\n          className={rectStyle}\n          width={width}\n          height={height}\n          onMouseDown={e => {\n            e.preventDefault();\n            const note = new Note(scaleValue.pitch, 0, 0.2);\n            player.playNoteDown(note);\n\n            const mouseup = () => {\n              player.playNoteUp(note);\n            };\n            document.addEventListener('mouseup', mouseup);\n            logging.logEvent(Events.PRESS_PIANOROLL);\n          }}\n          onMouseEnter={() => {\n            editor.setNoteHoverName(scaleValue);\n          }}\n        />\n        {isInScale && (\n          <rect\n            x={width - highlightSize}\n            y={0}\n            width={highlightSize}\n            height={height}\n            fill={highlightFill}\n          />\n        )}\n      </Group>\n    );\n  }\n}\n","import React from 'react';\nimport { VOICES } from '../core/constants';\nimport { VOICE_COLORS } from '../core/theme';\n\nexport class Filters extends React.Component {\n  render() {\n    return (\n      <>\n        <defs>\n          <pattern\n            id=\"diagonal-stripe\"\n            patternUnits=\"userSpaceOnUse\"\n            width=\"8\"\n            height=\"8\"\n          >\n            <path\n              d=\"M-2,2 l4,-4\n           M0,8 l8,-8\n           M6,10 l4,-4\"\n              style={{ stroke: 'white', strokeWidth: 2 }}\n            />\n          </pattern>\n        </defs>\n        {VOICES.map((VOICE, index) => {\n          const voice = VOICE.toLowerCase();\n          const color = VOICE_COLORS[index];\n          return (\n            <defs>\n              <filter\n                id={`glow-${voice}`}\n                x=\"-5000%\"\n                y=\"-5000%\"\n                width=\"10000%\"\n                height=\"10000%\"\n              >\n                <feFlood\n                  result=\"flood\"\n                  flood-color={`${color}`}\n                  flood-opacity=\"1\"\n                />\n                <feComposite\n                  in=\"flood\"\n                  result=\"mask\"\n                  in2=\"SourceGraphic\"\n                  operator=\"in\"\n                />\n                <feMorphology\n                  in=\"mask\"\n                  result=\"dilated\"\n                  operator=\"dilate\"\n                  radius=\"2\"\n                />\n                <feGaussianBlur\n                  in=\"dilated\"\n                  result=\"blurred\"\n                  stdDeviation=\"5\"\n                />\n                <feMerge>\n                  <feMergeNode in=\"blurred\" />\n                  <feMergeNode in=\"SourceGraphic\" />\n                </feMerge>\n              </filter>\n            </defs>\n          );\n        })}\n      </>\n    );\n  }\n}\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport React from 'react';\nimport { observer } from 'mobx-react';\nimport { range } from 'lodash';\nimport { style } from 'typestyle';\nimport blue from '@material-ui/core/colors/blue';\n\nimport { EditorTool } from '../core/editor';\nimport { editor, interactions } from '../core';\nimport { DIVISIONS } from '../core/constants';\nimport { ScaleValue } from '../core/editor';\n\nimport { Group } from './group';\n\nexport interface Props {\n  width: number;\n  noteHeight: number;\n}\n\n@observer\nexport class Grid extends React.Component<Props> {\n  renderDivision(divisionIndex: number) {\n    const x = (this.props.width / editor.totalSixteenths) * divisionIndex;\n    const height = this.props.noteHeight * editor.scale.length;\n\n    const isWhole = divisionIndex % 16 === 0;\n    const color = isWhole ? '#494949' : '#555';\n    const strokeWidth = isWhole ? 2 : 1;\n\n    return (\n      <line\n        key={divisionIndex}\n        x1={x}\n        y1={0}\n        x2={x}\n        y2={height}\n        stroke={color}\n        strokeWidth={strokeWidth}\n      />\n    );\n  }\n\n  renderNoteGrid(scaleValue: ScaleValue, scaleIndex: number) {\n    const divisions = range(editor.nDivisions);\n    const { width, noteHeight } = this.props;\n    const y = noteHeight * scaleIndex;\n    const gridWidth = width / editor.nDivisions;\n\n    return (\n      <Group key={scaleIndex} x={0} y={y}>\n        {divisions.map(divisionIndex => {\n          const x = (this.props.width / editor.nDivisions) * divisionIndex;\n\n          const isInScale = editor.isPitchInScale(scaleValue.pitch);\n          const isRoot = editor.key === scaleValue.name;\n          const fillColor = isInScale\n            ? isRoot\n              ? blue[500]\n              : blue[400]\n            : 'white';\n          const fillOpacity = isRoot ? 0.25 : 0.12;\n          const strokeColor = fillColor;\n\n          return (\n            <rect\n              key={divisionIndex}\n              x={x}\n              y={0}\n              width={gridWidth}\n              height={noteHeight}\n              stroke={strokeColor}\n              opacity={fillOpacity}\n              fill={fillColor}\n              strokeWidth={1}\n              onMouseDown={interactions.handleGridMouseDown(\n                scaleIndex,\n                divisionIndex\n              )}\n              onMouseEnter={() => {\n                editor.setNoteHoverName(scaleValue);\n              }}\n            />\n          );\n        })}\n      </Group>\n    );\n  }\n\n  render() {\n    const gridStyle = style({\n      cursor:\n        editor.selectedTool === EditorTool.ERASE ? 'context-menu' : 'default',\n    });\n\n    return (\n      <g id=\"editor-grid\" className={gridStyle}>\n        {editor.scale.map((scaleValue: ScaleValue, index: number) => {\n          return this.renderNoteGrid(scaleValue, index);\n        })}\n        {DIVISIONS.map(division => this.renderDivision(division))}\n      </g>\n    );\n  }\n}\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport React from 'react';\nimport { observer } from 'mobx-react';\n\nimport { player, editor } from '../core';\n\nimport { Group } from './group';\n\nexport interface Props {\n  width: number;\n  height: number;\n}\n\n@observer\nexport class LoopOverlay extends React.Component<Props> {\n  render() {\n    const { width, height } = this.props;\n    const startX = (width / editor.totalSixteenths) * player.loopStart - 1;\n    const endX = (width / editor.totalSixteenths) * player.loopEnd - 1;\n\n    const loopOverlayStyle = {\n      pointerEvents: 'none' as 'none', // Don't intercept clicks on this region\n    };\n\n    return (\n      <Group>\n        <rect\n          key=\"loop-border-left\"\n          x={0}\n          y={0}\n          height={height}\n          width={Math.max(startX, 0)}\n          fill={'black'}\n          fillOpacity={0.1}\n          style={loopOverlayStyle}\n        />\n        <rect\n          key=\"loop-border-right\"\n          x={endX}\n          y={0}\n          height={height}\n          width={Math.max(width - endX, 0)}\n          fill={'black'}\n          fillOpacity={0.1}\n          style={loopOverlayStyle}\n        />\n      </Group>\n    );\n  }\n}\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport React from 'react';\nimport * as _ from 'lodash';\nimport { observer } from 'mobx-react';\n\nimport { editor, generator, interactions, masks, layout } from '../core';\nimport { VOICE_COLORS, MUTED_COLOR, COLOR_PRIMARY } from '../core/theme';\n\nimport { Group } from './group';\n\nexport interface Props {\n  width: number;\n  height: number;\n  labelWidth: number;\n}\n\nconst VOICE_INITIALS = ['S', 'A', 'T', 'B'];\n\n@observer\nexport class MaskLanes extends React.Component<Props> {\n  renderLabels() {\n    const { height, labelWidth } = this.props;\n\n    return _.range(4).map(voiceIndex => {\n      const laneHeight = height / 4;\n      const y = voiceIndex * laneHeight;\n      const isMuted = editor.isVoiceMuted(voiceIndex);\n      const color = isMuted ? MUTED_COLOR : VOICE_COLORS[voiceIndex];\n      return (\n        <g\n          key={`label_${voiceIndex}`}\n          className=\"mask-lane-label\"\n          onClick={(e: React.MouseEvent<SVGGElement>) => {\n            editor.toggleVoiceMute(voiceIndex);\n          }}\n        >\n          <rect\n            x={1}\n            y={y + 1}\n            height={laneHeight - 2}\n            width={labelWidth - 2}\n            fillOpacity={0}\n            stroke={COLOR_PRIMARY}\n            strokeWidth={0.5}\n            rx=\"3\"\n          />\n          <text\n            x={layout.pianoRollWidth / 2 - 6}\n            y={y + 16}\n            height={laneHeight}\n            width={labelWidth}\n            fill={color}\n          >\n            {VOICE_INITIALS[voiceIndex]}\n          </text>\n        </g>\n      );\n    });\n  }\n\n  renderLanes() {\n    const { height, width } = this.props;\n    const laneHeight = height / 4;\n\n    return _.range(4).map(voiceIndex => {\n      const y = voiceIndex * laneHeight;\n      const isMuted = editor.isVoiceMuted(voiceIndex);\n      const color = isMuted ? MUTED_COLOR : VOICE_COLORS[voiceIndex];\n\n      const candidateSequencesExist = generator.candidateSequences.length > 0;\n      const mouseDownHandler = interactions.handleMaskLaneMouseDown(\n        voiceIndex,\n        candidateSequencesExist\n      );\n\n      return (\n        <rect\n          key={`lane_${voiceIndex}`}\n          x={0}\n          y={y}\n          height={laneHeight}\n          width={width}\n          fill={color}\n          fillOpacity={candidateSequencesExist ? 0.6 : 1}\n          onMouseDown={mouseDownHandler}\n        />\n      );\n    });\n  }\n\n  renderMasks() {\n    const { height, width } = this.props;\n    const laneHeight = height / 4;\n\n    return _.range(4).map(voiceIndex => {\n      const mask = masks.userMasks[voiceIndex];\n      const y = voiceIndex * laneHeight;\n\n      // Merge the mask indices into left/right bounds in order to draw\n      // contiguous rectangles for masked regions.\n      type Bound = { start: number; end: number };\n      const maskBounds: Bound[] = [];\n\n      let currentBound: Bound | null = null;\n      mask.forEach((maskIndex, arrIndex) => {\n        const neighborLeft =\n          arrIndex > 0 && mask[arrIndex - 1] === maskIndex - 1;\n\n        if (!currentBound || !neighborLeft) {\n          currentBound = { start: maskIndex, end: maskIndex };\n          maskBounds.push(currentBound);\n          return;\n        } else {\n          currentBound.end = maskIndex;\n        }\n      });\n\n      return maskBounds.map((bounds, boundsIndex) => {\n        const BORDER = 2;\n\n        const x = (width / editor.totalSixteenths) * bounds.start;\n        const rectWidth =\n          (width / editor.totalSixteenths) * (bounds.end - bounds.start + 1);\n        const maskIndices = _.range(bounds.start, bounds.end + 1);\n\n        const candidateSequencesExist = generator.candidateSequences.length > 0;\n\n        const clickHandler = interactions.handleMaskRectClick(\n          voiceIndex,\n          maskIndices,\n          candidateSequencesExist\n        );\n\n        const isMuted = editor.isVoiceMuted(voiceIndex);\n        const color = isMuted ? MUTED_COLOR : VOICE_COLORS[voiceIndex];\n\n        return (\n          <>\n            {candidateSequencesExist ? (\n              <rect\n                x={x}\n                y={y}\n                height={laneHeight}\n                width={rectWidth}\n                fill={color}\n              />\n            ) : null}\n            <rect\n              key={`lane_${voiceIndex}_mask_${boundsIndex}`}\n              x={x + BORDER}\n              y={y + BORDER}\n              height={laneHeight - 2 * BORDER}\n              width={rectWidth - 2 * BORDER}\n              stroke={'white'}\n              strokeWidth={2}\n              fill={`url(#diagonal-stripe)`}\n              fillOpacity={0.75}\n              onClick={clickHandler}\n              cursor={candidateSequencesExist ? 'pointer' : 'default'}\n            />\n          </>\n        );\n      });\n    });\n  }\n\n  render() {\n    const { labelWidth } = this.props;\n\n    return (\n      <Group>\n        {this.renderLabels()}\n        <Group x={labelWidth}>{this.renderLanes()}</Group>\n        <Group x={labelWidth}>{this.renderMasks()}</Group>\n      </Group>\n    );\n  }\n}\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport React from 'react';\nimport { observer } from 'mobx-react';\n\nimport { Note as NoteModel } from '../core/note';\nimport { editor } from '../core';\n\nimport { Group } from './group';\nimport { Note } from './note';\n\nexport interface NotesProps {\n  width: number;\n  noteHeight: number;\n}\n\n@observer\nexport class Notes extends React.Component<NotesProps> {\n  getNoteProps(note: NoteModel) {\n    const { noteHeight, width } = this.props;\n    const sixteenthWidth = width / editor.totalSixteenths;\n    const indexFromMax = editor.scaleMax - note.pitch;\n\n    const y = noteHeight * indexFromMax;\n    const x = note.position * sixteenthWidth;\n    const noteWidth = note.duration * sixteenthWidth;\n\n    const isMuted = editor.isVoiceMuted(note.voice);\n\n    return { x, y, height: noteHeight, width: noteWidth, isMuted };\n  }\n\n  render() {\n    return (\n      <Group>\n        {editor.allNotes.map(note => (\n          <Note key={note.id} note={note} {...this.getNoteProps(note)} />\n        ))}\n      </Group>\n    );\n  }\n}\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport React from 'react';\nimport { style } from 'typestyle';\nimport { observer } from 'mobx-react';\n\nimport { Note as NoteModel } from '../core/note';\nimport { EditorTool } from '../core/editor';\nimport { editor, interactions, masks } from '../core';\nimport { VOICES } from '../core/constants';\nimport { COLOR_PLAYING, VOICE_COLORS, MUTED_COLOR } from '../core/theme';\n\nfunction getFillColor(note: NoteModel, isMuted: boolean) {\n  const { isPlaying } = note;\n  if (isMuted) {\n    return MUTED_COLOR;\n  } else if (isPlaying) {\n    return COLOR_PLAYING;\n  } else {\n    return VOICE_COLORS[note.voice];\n  }\n}\n\nexport interface NoteProps {\n  note: NoteModel;\n  isMuted: boolean;\n  height: number;\n  width: number;\n  x: number;\n  y: number;\n}\n\nconst NOTE_BORDER = 1;\n\n@observer\nexport class Note extends React.Component<NoteProps> {\n  render() {\n    const { isMuted, note, width, height, x, y } = this.props;\n    const fill = getFillColor(note, isMuted);\n\n    const fadeDuration = note.isPlaying ? 0 : 0.5;\n\n    const rectStyle = style({\n      transition: `fill ${fadeDuration}s`,\n      fill,\n      stroke: '#ddd',\n      strokeWidth: 1,\n      cursor:\n        editor.selectedTool === EditorTool.ERASE ? 'context-menu' : 'default',\n    });\n\n    const VOICE = VOICES[note.voice];\n    const glowFilter = `url(#glow-${VOICE.toLowerCase()})`;\n\n    const isMasked = masks.isNoteMasked(note);\n    const filter = isMasked ? glowFilter : null;\n\n    const sizeProps = {\n      x: x + 1,\n      y: y + NOTE_BORDER,\n      width: width - 2 * NOTE_BORDER,\n      height: height - 2 * NOTE_BORDER,\n    };\n\n    return (\n      <>\n        <rect key={`${note.id}-glow`} filter={filter} {...sizeProps} />\n        <rect\n          key={note.id}\n          className={rectStyle}\n          {...sizeProps}\n          height={height - 2 * NOTE_BORDER}\n          onMouseDown={interactions.handleNoteMouseDown(note)}\n          onMouseMove={interactions.handleNoteHover(note)}\n        />\n      </>\n    );\n  }\n}\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport React from 'react';\nimport { observer } from 'mobx-react';\n\nimport { Group } from './group';\n\nimport { editor, player, interactions, layout } from '../core';\nimport { COLOR_TIMELINE_RANGE, COLOR_TIMELINE_HANDLE } from '../core/theme';\n\nexport interface Props {\n  width: number;\n  height: number;\n}\n\nfunction toSVGPoints(coordinates: number[][]) {\n  return coordinates\n    .map(coord => {\n      return coord.join(',');\n    })\n    .join(' ');\n}\n\n@observer\nexport class LoopHandles extends React.Component<Props> {\n  render() {\n    const { width, height } = this.props;\n\n    const startX = (width / editor.totalSixteenths) * player.loopStart;\n    const endX = (width / editor.totalSixteenths) * player.loopEnd;\n    const caretWidth = layout.sixteenthWidth / 2;\n    const lineHeight = 3;\n    const startHandleCoordinates: number[][] = [\n      [startX, 0],\n      [startX + caretWidth, height / 2],\n      [startX, height],\n    ];\n\n    const endHandleCoordinates: number[][] = [\n      [endX, 0],\n      [endX - caretWidth, height / 2],\n      [endX, height],\n    ];\n\n    return (\n      <Group>\n        <rect\n          key=\"loopRegion\"\n          x={startX}\n          y={height / 2 - 1}\n          height={lineHeight}\n          width={endX - startX}\n          fill={COLOR_TIMELINE_RANGE}\n        />\n\n        <polygon\n          key=\"loopStart\"\n          points={toSVGPoints(startHandleCoordinates)}\n          fill={COLOR_TIMELINE_HANDLE}\n          onMouseDown={interactions.handleLoopStartMouseDown}\n        />\n        <polygon\n          key=\"loopEnd\"\n          points={toSVGPoints(endHandleCoordinates)}\n          fill={COLOR_TIMELINE_HANDLE}\n          onMouseDown={interactions.handleLoopEndMouseDown}\n        />\n      </Group>\n    );\n  }\n}\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport React from 'react';\nimport { observer } from 'mobx-react';\nimport { style } from 'typestyle';\n\nimport { interactions, editor } from '../core';\n\nimport { Group } from './group';\n\nexport interface NotesProps {\n  height: number;\n  width: number;\n}\n\n@observer\nexport class MasksSelect extends React.Component<NotesProps> {\n  renderDragRect() {\n    const { maskToolDragStartXY, maskToolDragXY } = interactions;\n    const maskToolDragWidth = maskToolDragXY[0] - maskToolDragStartXY[0];\n    const maskToolDragHeight = maskToolDragXY[1] - maskToolDragStartXY[1];\n\n    const x =\n      maskToolDragWidth >= 0 ? maskToolDragStartXY[0] : maskToolDragXY[0];\n    const y =\n      maskToolDragHeight >= 0 ? maskToolDragStartXY[1] : maskToolDragXY[1];\n    const width = Math.abs(maskToolDragWidth);\n    const height = Math.abs(maskToolDragHeight);\n\n    const style = {\n      stroke: '#AAAAAA',\n      strokeWidth: 2,\n      strokeDasharray: '10 5',\n      fill: '#DDDDDD',\n      fillOpacity: 0.2,\n    };\n\n    return <rect x={x} y={y} width={width} height={height} style={style} />;\n  }\n\n  render() {\n    const { width, height } = this.props;\n\n    const maskOverlayStyle = style({\n      cursor: 'crosshair',\n    });\n\n    return (\n      <Group>\n        <rect\n          width={width}\n          height={height}\n          fillOpacity={0}\n          onMouseDown={interactions.handleMaskToolMouseDown}\n          className={maskOverlayStyle}\n        />\n        {interactions.isMaskToolDragging && this.renderDragRect()}\n      </Group>\n    );\n  }\n}\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport React from 'react';\nimport _ from 'lodash';\nimport { style } from 'typestyle';\nimport { observer } from 'mobx-react';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Slider from '@material-ui/core/Slider';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { MusicNote } from '@material-ui/icons';\n\nimport { editor, generator, logging, masks } from '../core';\nimport { Events } from '../core/logging';\nimport { NoteSequence } from '../core/note-sequence';\n\nimport { Sequence } from './sequence';\nimport {\n  MIN_HAPPY_SAD_FACTOR,\n  MAX_HAPPY_SAD_FACTOR,\n  MIN_SURPRISE_FACTOR,\n  MAX_SURPRISE_FACTOR,\n  MIN_DIFFERENCE_FACTOR,\n  MAX_DIFFERENCE_FACTOR,\n  MIN_PITCH,\n  MAX_PITCH,\n  TOTAL_SIXTEENTHS,\n} from '../core/constants';\n\nimport './generate.css';\nimport featureFlags from '../core/feature-flags';\n\nfunction getPitchRange(noteSequences: NoteSequence[]) {\n  let minPitch = MAX_PITCH;\n  let maxPitch = MIN_PITCH;\n\n  noteSequences.forEach(noteSequence => {\n    noteSequence.notes.forEach(note => {\n      minPitch = Math.min(note.pitch, minPitch);\n      maxPitch = Math.max(note.pitch, maxPitch);\n    });\n  });\n\n  return [minPitch, maxPitch];\n}\n\nfunction getPositionRange(noteSequences: NoteSequence[]) {\n  let minPosition = TOTAL_SIXTEENTHS;\n  let maxPosition = 0;\n\n  noteSequences.forEach(noteSequence => {\n    noteSequence.notes.forEach(note => {\n      minPosition = Math.min(note.start, minPosition);\n      maxPosition = Math.max(note.end, maxPosition);\n    });\n  });\n\n  return [minPosition, maxPosition];\n}\n\nconst horizontalSliderStyle = style({});\n\nexport interface GenerateProps {}\n\n@observer\nexport class Generate extends React.Component<GenerateProps> {\n  renderSequences() {\n    const noteSequences = generator.candidateSequences;\n\n    const [minPitch, maxPitch] = getPitchRange(noteSequences);\n    const [minPosition, maxPosition] = getPositionRange(noteSequences);\n\n    return (\n      <div className=\"sequences-container\">\n        {noteSequences.map((noteSequence, index) => {\n          return (\n            <Sequence\n              key={index}\n              title={index === 0 ? 'original' : ''}\n              notes={noteSequence.notes}\n              maxPitch={maxPitch}\n              minPitch={minPitch}\n              maxPosition={maxPosition}\n              minPosition={minPosition}\n              isSelected={generator.selectedCandidateSequenceIndex === index}\n              onSelect={() => generator.selectCandidateSequence(index)}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  render() {\n    const { baseline } = featureFlags;\n    const isModelBusy = !generator.isModelLoaded || generator.isWorking;\n    const noMasks = baseline ? !masks.doAnyMasksExist : !masks.doUserMasksExist;\n    const isGenerateButtonDisabled = noMasks || isModelBusy;\n\n    const nSequenceContainerStyle = style({\n      margin: '5px 0 15px',\n      width: '100%',\n    });\n\n    const showCandidateSequences =\n      !baseline && generator.candidateSequences.length > 0;\n\n    const maskedSequenceExists = masks.maskedNotes.length > 0;\n    const candidateSequenceSelected =\n      generator.selectedCandidateSequenceIndex > 0;\n    const similaritySliderEnabled = candidateSequenceSelected\n      ? true\n      : maskedSequenceExists;\n\n    return (\n      <div className=\"container\">\n        <Button\n          disabled={isGenerateButtonDisabled}\n          variant=\"outlined\"\n          color=\"primary\"\n          onClick={() => {\n            generator.generate();\n          }}\n        >\n          🤖 Generate\n          <MusicNote />\n        </Button>\n        {baseline ? null : (\n          <FormControl classes={{ root: nSequenceContainerStyle }}>\n            <Select\n              value={generator.nSequencesToGenerate}\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n                const value = e.target.value;\n                if (value !== null) {\n                  generator.setNSequencesToGenerate(Number(value));\n                }\n              }}\n              disabled={baseline}\n              autoWidth\n            >\n              <MenuItem value={1}>1 sequence</MenuItem>\n              <MenuItem value={2}>2 sequences</MenuItem>\n              <MenuItem value={3}>3 sequences</MenuItem>\n              <MenuItem value={4}>4 sequences</MenuItem>\n            </Select>\n          </FormControl>\n        )}\n        {baseline ? null : (\n          <>\n            <ParameterSlider\n              value={generator.conventionalSurprising}\n              onChange={newValue =>\n                generator.setConventionalSurprising(newValue)\n              }\n              onChangeCommitted={() => {\n                logging.logEvent(\n                  Events.SET_CONVENTIONAL_SURPRISING,\n                  generator.conventionalSurprising\n                );\n              }}\n              range={[MIN_SURPRISE_FACTOR, MAX_SURPRISE_FACTOR]}\n              labels={['Conventional', 'Surprising']}\n              nMarks={3}\n            />\n            <ParameterSlider\n              value={generator.majorMinor}\n              onChange={newValue => generator.setMajorMinor(newValue)}\n              onChangeCommitted={() => {\n                logging.logEvent(Events.SET_MAJOR_MINOR, generator.majorMinor);\n              }}\n              range={[MIN_HAPPY_SAD_FACTOR, MAX_HAPPY_SAD_FACTOR]}\n              labels={['😢 Minor', 'Major 😊']}\n              nMarks={3}\n            />\n            <ParameterSlider\n              value={generator.differenceFromOriginal}\n              onChange={newValue =>\n                generator.setDifferenceFromOriginal(newValue)\n              }\n              onChangeCommitted={() => {\n                logging.logEvent(\n                  Events.SET_SIMILAR_DIFFERENT,\n                  generator.differenceFromOriginal\n                );\n              }}\n              range={[MIN_DIFFERENCE_FACTOR, MAX_DIFFERENCE_FACTOR]}\n              labels={['Similar', 'Different']}\n              disabled={!similaritySliderEnabled}\n              nMarks={3}\n            />\n          </>\n        )}\n        {showCandidateSequences && (\n          <>\n            {this.renderSequences()}\n            <Button\n              variant=\"outlined\"\n              color=\"primary\"\n              onClick={() => generator.commitSelectedCandidateSequence()}\n            >\n              Choose\n            </Button>\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nconst MarkedSlider = withStyles({\n  mark: {\n    backgroundColor: '#bfbfbf',\n    height: 8,\n    width: 4,\n    marginTop: -3,\n    marginLeft: -2, // half of width to make it centered\n  },\n  markActive: {\n    backgroundColor: 'currentColor',\n  },\n})(Slider);\n\ninterface ParameterSliderProps {\n  value: number;\n  onChange: (newValue: number) => void;\n  onChangeCommitted?: (value: number) => void;\n  range: number[];\n  labels: string[];\n  disabled?: boolean;\n  nMarks?: number;\n}\n\nfunction ParameterSlider(props: ParameterSliderProps) {\n  const labelColor = props.disabled ? 'textSecondary' : 'textPrimary';\n\n  const deltaRange = props.range[1] - props.range[0];\n  const marks = _.range(props.nMarks).map(index => {\n    const value = props.range[0] + (deltaRange / (props.nMarks - 1)) * index;\n    return { value };\n  });\n\n  return (\n    <div className=\"horizontal-slider\">\n      <MarkedSlider\n        value={props.value}\n        onChange={(e: any, newValue: number | number[]) => {\n          if (typeof newValue === 'number') props.onChange(newValue);\n        }}\n        onChangeCommitted={(e: any, value: number) => {\n          props.onChangeCommitted(value);\n        }}\n        step={0.1}\n        valueLabelDisplay=\"off\"\n        min={props.range[0]}\n        max={props.range[1]}\n        disabled={props.disabled}\n        marks={marks}\n      />\n      <div className=\"slider-label\">\n        <Typography variant=\"caption\" color={labelColor}>\n          {props.labels[0]}\n        </Typography>\n        <Typography variant=\"caption\" color={labelColor}>\n          {props.labels[1]}\n        </Typography>\n      </div>\n    </div>\n  );\n}\n\nParameterSlider.defaultProps = {\n  enabled: true,\n  onChangeCommitted: () => {},\n};\n","export { default } from './Slider';","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport React from 'react';\nimport { observer } from 'mobx-react';\nimport { style } from 'typestyle';\n\nimport { layout, Note } from '../core';\nimport { MUTED_COLOR, VOICE_COLORS, COLOR_SELECTED } from '../core/theme';\n\nimport { Group } from './group';\nimport { editor } from '../core';\n\nexport interface SequenceProps {\n  notes: Note[];\n  minPitch: number;\n  maxPitch: number;\n  minPosition: number;\n  maxPosition: number;\n  isSelected: boolean;\n  onSelect: () => void;\n  title: string;\n}\n\nconst MIN_PITCH_RANGE = 12;\nconst MIN_POSITION_RANGE = 4;\n\n@observer\nexport class Sequence extends React.Component<SequenceProps> {\n  renderNotes() {\n    const { minPitch, maxPitch, minPosition, maxPosition, notes } = this.props;\n    const pitchRange = maxPitch - minPitch;\n    const positionRange = maxPosition - minPosition;\n    const paddingX = 4;\n    const paddingY = 4;\n    const height = layout.sequenceHeight - 4 * paddingY;\n    const width = 100; // In percent\n\n    const pitchHeight = height / Math.max(pitchRange, MIN_PITCH_RANGE);\n    const sixteenthWidth = width / Math.max(positionRange, MIN_POSITION_RANGE);\n\n    return (\n      <Group x={paddingX} y={paddingY}>\n        {notes.map(note => {\n          const x = (note.position - minPosition) * sixteenthWidth;\n          const y = height - (note.pitch - minPitch) * pitchHeight;\n          const offsetY = y;\n          const isMuted = editor.isVoiceMuted(note.voice);\n          const color = isMuted ? MUTED_COLOR : VOICE_COLORS[note.voice];\n          return (\n            <rect\n              key={note.id}\n              x={`${x}%`}\n              y={offsetY}\n              height={pitchHeight}\n              width={`${sixteenthWidth * note.duration}%`}\n              fill={color}\n            />\n          );\n        })}\n      </Group>\n    );\n  }\n\n  render() {\n    const { isSelected, notes, onSelect } = this.props;\n    const isEmpty = notes.length === 0;\n\n    const border = isSelected\n      ? `2px solid ${COLOR_SELECTED}`\n      : '1px solid gray';\n\n    const titleStyle = style({\n      fontFamily: 'Roboto',\n      backgroundColor: 'rgba(0,0,0,0.2)',\n    });\n\n    return (\n      <svg\n        width={'100%'}\n        height={layout.sequenceHeight}\n        style={{ border, marginBottom: 10, boxSizing: 'border-box' }}\n        onClick={onSelect}\n      >\n        {!isEmpty && this.renderNotes()}\n        <text x={6} y={20} className={titleStyle}>\n          {this.props.title}\n        </text>\n      </svg>\n    );\n  }\n}\n","\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!./generate.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!./generate.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-1!./generate.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".container {\\n  padding: 0 10px;\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.slider-label {\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n  margin-top: -12px;\\n}\\n\\n.sequences-container {\\n  margin-top: 10px;\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.horizontal-slider {\\n  margin-bottom: 3px;\\n}\\n\", \"\"]);\n\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","/* Copyright 2019 Google LLC. All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================*/\n\nimport React from 'react';\nimport { style } from 'typestyle';\n\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Dialog from '@material-ui/core/Dialog';\nimport Typography from '@material-ui/core/Typography';\n\nexport interface WorkingProps {\n  open: boolean;\n  title: string;\n}\n\nexport function Working(props: WorkingProps) {\n  const { open, title } = props;\n\n  const spinnerStyle = style({\n    width: 200,\n    height: 160,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'space-around',\n  });\n\n  return (\n    <Dialog open={open}>\n      <div className={spinnerStyle}>\n        <Typography variant=\"h6\" color=\"inherit\">\n          🤖 Working...\n        </Typography>{' '}\n        <CircularProgress color=\"secondary\" />\n      </div>\n    </Dialog>\n  );\n}\n","export { default } from './CircularProgress';","\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--5-1!./index.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/css-loader/dist/cjs.js??ref--5-1!./index.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--5-1!./index.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"/* Copyright 2019 Google LLC. All Rights Reserved.\\n\\nLicensed under the Apache License, Version 2.0 (the \\\"License\\\");\\nyou may not use this file except in compliance with the License.\\nYou may obtain a copy of the License at\\n\\n    http://www.apache.org/licenses/LICENSE-2.0\\n\\nUnless required by applicable law or agreed to in writing, software\\ndistributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\nSee the License for the specific language governing permissions and\\nlimitations under the License.\\n==============================================================================*/\\n\\nbody {\\n  margin: 0;\\n  padding: 0;\\n}\\n\\nbody,\\nhtml {\\n  height: 100%;\\n}\\n\\n#root {\\n  height: 100%;\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.mask-lane-label {\\n  font-family: Arial, Helvetica, sans-serif;\\n  cursor: pointer;\\n  user-select: none;\\n}\\n\\n#sheets-logging {\\n  display: none;\\n}\\n\", \"\"]);\n\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport React from 'react';\nimport { SheetsRegistry } from 'jss';\nimport StylesProvider from '../StylesProvider';\nimport createGenerateClassName from '../createGenerateClassName';\n\nvar ServerStyleSheets =\n/*#__PURE__*/\nfunction () {\n  function ServerStyleSheets() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, ServerStyleSheets);\n\n    this.options = options;\n  }\n\n  _createClass(ServerStyleSheets, [{\n    key: \"collect\",\n    value: function collect(children) {\n      // This is needed in order to deduplicate the injection of CSS in the page.\n      var sheetsManager = new Map(); // This is needed in order to inject the critical CSS.\n\n      this.sheetsRegistry = new SheetsRegistry(); // A new class name generator\n\n      var generateClassName = createGenerateClassName();\n      return React.createElement(StylesProvider, _extends({\n        sheetsManager: sheetsManager,\n        serverGenerateClassName: generateClassName,\n        sheetsRegistry: this.sheetsRegistry\n      }, this.options), children);\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return this.sheetsRegistry ? this.sheetsRegistry.toString() : '';\n    }\n  }, {\n    key: \"getStyleElement\",\n    value: function getStyleElement(props) {\n      return React.createElement('style', _extends({\n        id: 'jss-server-side',\n        key: 'jss-server-side',\n        dangerouslySetInnerHTML: {\n          __html: this.toString()\n        }\n      }, props));\n    }\n  }]);\n\n  return ServerStyleSheets;\n}();\n\nexport default ServerStyleSheets;","/** @license Material-UI v4.3.0\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { ponyfillGlobal } from '@material-ui/utils';\n/* Warning if there are several instances of @material-ui/styles */\n\nif (process.env.NODE_ENV !== 'production' && process.env.NODE_ENV !== 'test' && typeof window !== 'undefined') {\n  ponyfillGlobal['__@material-ui/styles-init__'] = ponyfillGlobal['__@material-ui/styles-init__'] || 0;\n\n  if (ponyfillGlobal['__@material-ui/styles-init__'] === 1) {\n    // eslint-disable-next-line no-console\n    console.warn(['It looks like there are several instances of `@material-ui/styles` initialized in this application.', 'This may cause theme propagation issues, broken class names, ' + 'specificity issues, and makes your application bigger without a good reason.', '', 'See https://material-ui.com/r/styles-instance-warning for more info.'].join('\\n'));\n  }\n\n  ponyfillGlobal['__@material-ui/styles-init__'] += 1;\n}\n\nexport { default as createGenerateClassName } from './createGenerateClassName';\nexport { default as createStyles } from './createStyles';\nexport { default as getThemeProps } from './getThemeProps';\nexport { default as jssPreset } from './jssPreset';\nexport { default as makeStyles } from './makeStyles';\nexport { default as mergeClasses } from './mergeClasses';\nexport { default as ServerStyleSheets } from './ServerStyleSheets';\nexport { default as styled } from './styled';\nexport { default as StylesProvider } from './StylesProvider';\nexport { default as ThemeProvider } from './ThemeProvider';\nexport { default as useTheme } from './useTheme';\nexport { default as withStyles } from './withStyles';\nexport { default as withTheme, withThemeCreator } from './withTheme';","module.exports = (__webpack_require__(1))(5915);","module.exports = (__webpack_require__(1))(5912);","module.exports = (__webpack_require__(1))(212);","module.exports = (__webpack_require__(1))(5608);","module.exports = (__webpack_require__(1))(210);","module.exports = (__webpack_require__(1))(211);","module.exports = (__webpack_require__(1))(5914);","module.exports = (__webpack_require__(1))(5917);","module.exports = (__webpack_require__(1))(5916);","module.exports = (__webpack_require__(1))(92);","module.exports = (__webpack_require__(1))(5918);","module.exports = (__webpack_require__(1))(5919);"],"sourceRoot":""}